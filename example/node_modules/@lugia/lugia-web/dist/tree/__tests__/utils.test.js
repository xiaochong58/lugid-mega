"use strict";var _react=require("react"),_react2=_interopRequireDefault(_react),_chai=require("chai"),_chai2=_interopRequireDefault(_chai);require("jest-styled-components");var _utils=require("../utils"),_utils2=_interopRequireDefault(_utils);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var _require=require("@lugia/jverify"),mockObject=_require.mockObject,VerifyOrder=_require.VerifyOrder,VerifyOrderConfig=_require.VerifyOrderConfig,exp=_chai2.default.expect;describe("utils",function(){var e,l=[3,4],i=[5,8],d=[10,13,16],n=[21],a=[0,17,27,30],r=[1,2,9],p=[18,22],k=[{key:"1",title:"1"},{key:"1.1",title:"1.1",pid:"1",path:"1",isLeaf:!0},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.2.1",title:"1.2.1",pid:"1.2",path:"1/1.2",isLeaf:!0},{key:"1.2.2",title:"1.2.2",pid:"1.2",path:"1/1.2"},{key:"1.2.2.1",title:"1.2.2.1",pid:"1.2.2",path:"1/1.2/1.2.2"},{key:"1.2.2.1.1",title:"1.2.2.1.1",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.1.2",title:"1.2.2.1.2",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.2",title:"1.2.2.2",pid:"1.2.2",path:"1/1.2/1.2.2",isLeaf:!0},{key:"1.3",title:"1.3",pid:"1",path:"1"},{key:"1.3.1",title:"1.3.1",pid:"1.3",path:"1/1.3"},{key:"1.3.1.1",title:"1.3.1.1",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.1.2",title:"1.3.1.2",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.2",title:"1.3.2",pid:"1.3",path:"1/1.3"},{key:"1.3.2.1",title:"1.3.2.1",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.2.2",title:"1.3.2.2",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.3",title:"1.3.3",pid:"1.3",path:"1/1.3",isLeaf:!0},{key:"2",title:"2"},{key:"2.1",title:"2.1",pid:"2",path:"2"},{key:"2.1.1",title:"2.1.1",pid:"2.1",path:"2/2.1",isLeaf:!0},{key:"2.1.2",title:"2.1.2",pid:"2.1",path:"2/2.1"},{key:"2.1.2.1",title:"2.1.2.1",pid:"2.1.2",path:"2/2.1/2.1.2",isLeaf:!0},{key:"2.2",title:"2.2",pid:"2",path:"2"},{key:"2.2.1",title:"2.2.1",pid:"2.2",path:"2/2.2"},{key:"2.2.1.1",title:"2.2.1.1",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{key:"2.2.1.2",title:"2.2.1.2",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{key:"2.2.2",title:"2.2.2",pid:"2.2",path:"2/2.2",isLeaf:!0},{key:"3",title:"3"},{key:"3.1",title:"3.1",pid:"3",path:"3",isLeaf:!0},{key:"3.2",title:"3.2",pid:"3",path:"3",isLeaf:!0},{key:"4",title:"4",isLeaf:!0}],o={};k.forEach(function(e){var t=e.key;o[t]=e});var c=void 0;beforeEach(function(){c=new _utils2.default(k,{expandAll:!1})}),it("checkTree",function(){var e=new _utils2.default(k,{expandAll:!1}).checkTree([{key:"201801241507506774802",path:null,pid:null,title:"中国光大银行",isLeaf:null},{key:"16073018194277629303",path:"201801241507506774802",pid:"201801241507506774802",title:"000005_XT1973_测试产品-XT1973",isLeaf:!0},{key:"16073018200233446301",path:"201801241507506774802",pid:"201801241507506774802",title:"000006_WFWJ02_测试产品-WFWJ02",isLeaf:!0},{key:"16073018203066466706",path:"201801241507506774802",pid:"201801241507506774802",title:"000008_ZH1453_测试产品-ZH1453",isLeaf:!0},{key:"16073018194231629304",path:"201801241507506774802",pid:"201801241507506774802",title:"000009_DX1212_测试产品-DX1212",isLeaf:!0},{key:"16073018194276629305",path:"201801241507506774802",pid:"201801241507506774802",title:"000010_ZH2121_测试产品-ZH2121",isLeaf:!0},{key:"16073018203037466708",path:"201801241507506774802",pid:"201801241507506774802",title:"000011_ZH1823_测试产品-ZH1823",isLeaf:!0},{key:"16073018194268629321",path:"201801241507506774802",pid:"201801241507506774802",title:"000012_AD0019_测试产品-AD0019",isLeaf:!0},{key:"16073018203041466716",path:"201801241507506774802",pid:"201801241507506774802",title:"000013_DX1611_测试产品-DX1611",isLeaf:!0},{key:"16073018194225629322",path:"201801241507506774802",pid:"201801241507506774802",title:"000014_749747_测试产品-749747",isLeaf:!0},{key:"16073018203085466719",path:"201801241507506774802",pid:"201801241507506774802",title:"000015_XT2016_测试产品-XT2016",isLeaf:!0},{key:"16073018203043466720",path:"201801241507506774802",pid:"201801241507506774802",title:"000016_ZH2160_测试产品-ZH2160",isLeaf:!0},{key:"16073018194271629323",path:"201801241507506774802",pid:"201801241507506774802",title:"000017_DX1263_测试产品-DX1263",isLeaf:!0},{key:"16073018194245629326",path:"201801241507506774802",pid:"201801241507506774802",title:"000018_XT0972_测试产品-XT0972",isLeaf:!0},{key:"16073018203074466731",path:"201801241507506774802",pid:"201801241507506774802",title:"000020_ZH2112_测试产品-ZH2112",isLeaf:!0},{key:"16092916571624086460",path:"201801241507506774802",pid:"201801241507506774802",title:"000021_XT1639_测试产品-XT1639",isLeaf:!0},{key:"16092917082095637396",path:"201801241507506774802",pid:"201801241507506774802",title:"000022_XT1830_测试产品-XT1830",isLeaf:!0},{key:"16092917082095637397",path:"201801241507506774802",pid:"201801241507506774802",title:"000023_DX1219_测试产品-DX1219",isLeaf:!0},{key:"16092916571624086463",path:"201801241507506774802",pid:"201801241507506774802",title:"000024_XT0435_测试产品-XT0435",isLeaf:!0},{key:"16092917083423477424",path:"201801241507506774802",pid:"201801241507506774802",title:"000025_ZH1515_测试产品-ZH1515",isLeaf:!0},{key:"16092916571624086464",path:"201801241507506774802",pid:"201801241507506774802",title:"000026_487021_测试产品-487021",isLeaf:!0},{key:"16092917083423477426",path:"201801241507506774802",pid:"201801241507506774802",title:"000028_ZH2100_测试产品-ZH2100",isLeaf:!0},{key:"16101319171928975429",path:"201801241507506774802",pid:"201801241507506774802",title:"000029_XT2026_测试产品-XT2026",isLeaf:!0},{key:"16101319183381565382",path:"201801241507506774802",pid:"201801241507506774802",title:"000030_ZH2199_测试产品-ZH2199",isLeaf:!0},{key:"201801241507508316518",path:null,pid:null,title:"华夏银行股份有限公司",isLeaf:null},{key:"16122014064515350523",path:"201801241507508316518",pid:"201801241507508316518",title:"000045_D10002_测试产品-D10002",isLeaf:!0},{key:"201801241507508376989",path:null,pid:null,title:"中信银行",isLeaf:null},{key:"16122113385960348561",path:"201801241507508376989",pid:"201801241507508376989",title:"000046_16BX01_测试产品-16BX01",isLeaf:!0},{key:"201801241507508423608",path:null,pid:null,title:"1",isLeaf:null},{key:"18011814123571522622",path:"201801241507508423608",pid:"201801241507508423608",title:"000078_111111111111_001",isLeaf:!0},{key:"16073011171224596301",path:"201801241507508423608",pid:"201801241507508423608",title:"000003_XT2006_测试产品-XT2006",isLeaf:!1},{key:"16073011174959377351",path:"201801241507508423608/16073011171224596301",pid:"16073011171224596301",title:"000001_XT0189_测试产品-XT0189",isLeaf:!1},{key:"18011718165573505779",path:"201801241507508423608/16073011171224596301/16073011174959377351",pid:"16073011174959377351",title:"000074_000004167_000001_xxx2121",isLeaf:!0},{key:"18011718165573505778",path:"201801241507508423608/16073011171224596301/16073011174959377351",pid:"16073011174959377351",title:"000073_0000011111_000001_xxx23111",isLeaf:!0},{key:"18011718165573505775",path:"201801241507508423608/16073011171224596301/16073011174959377351",pid:"16073011174959377351",title:"000070_000001111111111111_000001_xxxxxxxxxxxxxx",isLeaf:!0},{key:"18011718165573505774",path:"201801241507508423608/16073011171224596301/16073011174959377351",pid:"16073011174959377351",title:"000069_000001111_000001_xxxxxx",isLeaf:!0},{key:"18011718165573505777",path:"201801241507508423608/16073011171224596301/16073011174959377351",pid:"16073011174959377351",title:"000072_000001111241411_000001_xxx231221",isLeaf:!0},{key:"18011718165573505776",path:"201801241507508423608/16073011171224596301/16073011174959377351",pid:"16073011174959377351",title:"000071_000001111231_000001_xxx231",isLeaf:!0},{key:"18011718165573505780",path:"201801241507508423608/16073011171224596301/16073011174959377351",pid:"16073011174959377351",title:"000075_00000412245_000001_xx55112",isLeaf:!0},{key:"18011718165573505781",path:"201801241507508423608/16073011171224596301/16073011174959377351",pid:"16073011174959377351",title:"000076_000004121515_000001_xx55577",isLeaf:!0},{key:"18011718165573505782",path:"201801241507508423608/16073011171224596301/16073011174959377351",pid:"16073011174959377351",title:"000077_12415515161_12415515161",isLeaf:!0},{key:"16073018194274629301",path:"201801241507508423608",pid:"201801241507508423608",title:"000004_ZH1631_测试产品-ZH1631",isLeaf:!1},{key:"16073018194274629333",path:"201801241507508423608/16073018194274629301",pid:"16073018194274629301",title:"000004_ZH1632_测试产品-ZH1632",isLeaf:!0},{key:"16121921053110349526",path:"201801241507508423608",pid:"201801241507508423608",title:"000038_A80004_测试产品-A80004",isLeaf:!1},{key:"16121921053110348527",path:"201801241507508423608/16121921053110349526",pid:"16121921053110349526",title:"000038_A80005_测试产品-A80005",isLeaf:!0},{key:"16073018200277446302",path:"201801241507508423608",pid:"201801241507508423608",title:"000007_XT1636_测试产品-XT1636",isLeaf:!1},{key:"16092917082095637398",path:"201801241507508423608/16073018200277446302",pid:"16073018200277446302",title:"000027_XT0209_测试产品-XT0209",isLeaf:!0}]);exp(e).to.be.eql([])}),it("checkTree is rowData wrong",function(){var e=mockObject.create(c).mockFunction("isRightTreeRowData"),t=["1","2","3"];e.returned(t[0]),e.returned(t[1]),e.returned(t[2]),exp(c.checkTree([{},{},{}])).to.be.eql(t.map(function(e){return"{}==>"+e})),e.reset()}),it("checkTree is right",function(){var e=mockObject.create(c).mockFunction("isRightTreeRowData"),t=["","",""];e.returned(t[0]),e.returned(t[1]),e.returned(t[2]),exp(c.checkTree([{},{},{}])).to.be.eql([]),e.reset()}),it("utils.isRightTreeRowData {}",function(){exp(c.isRightTreeRowData({})).to.be.eql(c.Error.EmptyError),exp(c.isRightTreeRowData({key:"",title:""})).to.be.eql(c.Error.EmptyError)}),it("utils.isRightTreeRowData only key title",function(){exp(c.isRightTreeRowData({key:"1",title:"1"})).to.be.eql("")}),it("utils.isRightTreeRowData exist pid & path => true",function(){exp(c.isRightTreeRowData({key:"1",title:"2",pid:"2",path:"2"})).to.be.eql("")}),it("utils.isRightTreeRowData exist pid & path  path not container pid",function(){exp(c.isRightTreeRowData({key:"1",title:"2",pid:"2",path:"3"})).to.be.eql(c.Error.PathNotContainerPid)}),it("utils.isRightTreeRowData exist pid & path path == key",function(){exp(c.isRightTreeRowData({key:"1",title:"2",pid:"2",path:"1"})).to.be.eql(c.Error.PathEqlKey)}),it("utils.isRightTreeRowData exist pid & path pid == key",function(){exp(c.isRightTreeRowData({key:"1",title:"2",pid:"1",path:"3"})).to.be.eql(c.Error.PidEqlKey)}),it("utils.isRightTreeRowData exist pid, not exist  path ",function(){exp(c.isRightTreeRowData({key:"1",title:"2",pid:"2"})).to.be.eql(c.Error.PidPathMustSameExist),exp(c.isRightTreeRowData({key:"1",title:"2",path:"2"})).to.be.eql(c.Error.PidPathMustSameExist)}),it("isRightLevel pid is not exist",function(){var e=[{key:"1",pid:"3"},{key:"1",pid:"4"},{key:"1",pid:"5"},{key:"1",pid:"6"},{key:"1",pid:"7"}];exp(c.isRightLevel(e)).to.be.eql(e.map(function(e){return"找不到key:"+e.pid+"的结点."}))});function f(e){return e.key+"结点的层级位置错误，必须处于父节点【"+e.pid+"】的范围内!"}function y(e){return e.key+"结点path信息错误!"}it("isRightLevel pid level before level ",function(){var e=[{key:"1.1",pid:"2",path:"1/7"},{key:"1.2",pid:"2",path:"1/7"},{key:"1.3",pid:"2",path:"1/7"},{key:"1.4",pid:"2",path:"1/7"}],t=[{key:"1"},{key:"2",pid:"1",path:"1"}].concat(e,[{key:"3",pid:"1",path:"1"},{key:"4",pid:"1",path:"1"}]),i=c.isRightLevel(t),l=e.map(y);exp(i).to.be.eql(l)}),it("isRightLevel path is error",function(){var e=[{key:"1.1.1",pid:"1.1",path:"1"},{key:"1.1.2",pid:"1.1",path:"1"}],t=[{key:"1"},{key:"1.1",pid:"1",path:"1"}].concat(e,[{key:"3"},{key:"4"}]),i=c.isRightLevel(t),l=e.map(y);exp(i).to.be.eql(l)}),it('isRightLevel pid level after level but not join, is after "3"',function(){var e=[{key:"1.1",pid:"2",path:"1/2"},{key:"1.2",pid:"2",path:"1/2"},{key:"1.3",pid:"2",path:"1/2"},{key:"1.4",pid:"2",path:"1/2"}],t=[{key:"1"},{key:"2",pid:"1",path:"1"},{key:"3",pid:"1",path:"1"}].concat(e,[{key:"4",pid:"1",path:"1"}]),i=c.isRightLevel(t),l=e.map(f);exp(i).to.be.eql(l)}),it("generateRealTreeData  expandAll: true 第一次获取",function(){var e=new _utils2.default(k,{expandAll:!0});exp(e.generateRealTreeData({id2ExtendInfo:{}})).to.be.eql(k)}),it("generateRealTreeData expandAll: false 第一次获取",function(){var e=new _utils2.default(k,{expandAll:!1}).generateRealTreeData({id2ExtendInfo:{}});exp(e).to.be.eql([{key:"1",title:"1"},{key:"2",title:"2"},{key:"3",title:"3"},{key:"4",title:"4",isLeaf:!0}])}),it("generateRealTreeData expandAll: true 折叠全部",function(){var e={},t=new _utils2.default(k,{expandAll:!0});t.colapseNode("1",e),t.colapseNode("2",e),t.colapseNode("3",e),t.colapseNode("4",e);var i=t.generateRealTreeData({id2ExtendInfo:e});exp(i).to.be.eql([{key:"1",title:"1"},{key:"2",title:"2"},{key:"3",title:"3"},{key:"4",title:"4",isLeaf:!0}]),exp(t.generateRealTreeData({id2ExtendInfo:e})).to.be.equal(i)}),it("search 版本未变 查询条件未变 直接返回旧值",function(){var e=new _utils2.default(k,{expandAll:!0}),t=["知行合一"],i=mockObject.create(e).mockFunction("generateRealTreeData");i.returned(t);var l={id2ExtendInfo:{}};exp(e.search(l,"")).to.be.equal(t),e.oldVersion=1,e.version=1,exp(e.search(l,"")).to.be.equal(t),exp(i.callTimes()).to.be.equal(1),exp(i.getCallArgs(0)).to.be.eql([l])}),it("search 版本改变 查询条件未变 重新计算",function(){var e=new _utils2.default(k,{expandAll:!0}),t=["知行合一"],i=["有名万物之始"],l=mockObject.create(e).mockFunction("generateRealTreeData");l.returned(t),l.returned(i);var d={id2ExtendInfo:{}};exp(e.search(d,"")).to.be.equal(t),exp(e.search(d,"")).to.be.equal(i),exp(l.callTimes()).to.be.equal(2),exp(l.getCallArgs(0)).to.be.eql([d]),exp(l.getCallArgs(1)).to.be.eql([d])}),it("search 版本未变 查询条件改变 重新计算",function(){var e=new _utils2.default(k,{expandAll:!0}),t=["知行合一"],i=mockObject.create(e).mockFunction("generateRealTreeData");i.returned(t),i.returned(["有名万物之始"]);var l={id2ExtendInfo:{}};exp(e.search(l,"")).to.be.equal(t),e.oldVersion=1,e.version=1,exp(e.search(l,"different")).to.be.not.equal(t),exp(i.callTimes()).to.be.equal(2),exp(i.getCallArgs(0)).to.be.eql([l]),exp(i.getCallArgs(1)).to.be.eql([l])}),it("search query: 1.2 matchAll",function(){for(var e=new _utils2.default(k,{expandAll:!0}),t=mockObject.create(e).mockFunction("match"),i=0;i<k.length;i++)t.returned(!0);var l={id2ExtendInfo:{}};exp(e.search(l,"诸行无常")).to.be.eql(k),exp(t.getCallArgs(0)).to.be.eql(["4",["诸行无常"],"include"]),exp(t.callTimes()).to.be.eql(k.length)}),it("search query: 1.2 matchAll splitQuery: , query: 诸行无常",function(){for(var e=new _utils2.default(k,{expandAll:!0,splitQuery:","}),t=mockObject.create(e).mockFunction("match"),i=0;i<k.length;i++)t.returned(!0);var l={id2ExtendInfo:{}};exp(e.search(l,"诸行无常")).to.be.eql(k),exp(t.getCallArgs(0)).to.be.eql(["4",["诸行无常"],"include"]),exp(t.callTimes()).to.be.eql(k.length)}),it("search query: 1.2 matchAll splitQuery: , query: 1,2,3",function(){for(var e=new _utils2.default(k,{expandAll:!0,splitQuery:","}),t=mockObject.create(e).mockFunction("match"),i=0;i<k.length;i++)t.returned(!0);var l={id2ExtendInfo:{}};exp(e.search(l,"1,2,3")).to.be.eql(k),exp(t.getCallArgs(0)).to.be.eql(["4",["1","2","3"],"include"]),exp(t.callTimes()).to.be.eql(k.length)}),it("search query: 1.2 matchAll splitQuery: | query: 1,2,3",function(){for(var e=new _utils2.default(k,{expandAll:!0,splitQuery:"|"}),t=mockObject.create(e).mockFunction("match"),i=0;i<k.length;i++)t.returned(!0);var l={id2ExtendInfo:{}};exp(e.search(l,"1,2,3")).to.be.eql(k),exp(t.getCallArgs(0)).to.be.eql(["4",["1,2,3"],"include"]),exp(t.callTimes()).to.be.eql(k.length)}),it("search query: 1.2 matchAll splitQuery: | query: 1,2,3",function(){for(var e=new _utils2.default(k,{expandAll:!0,splitQuery:"|"}),t=mockObject.create(e).mockFunction("match"),i=0;i<k.length;i++)t.returned(!0);var l={id2ExtendInfo:{}};exp(e.search(l,"1|2|3")).to.be.eql(k),exp(t.getCallArgs(0)).to.be.eql(["4",["1","2","3"],"include"]),exp(t.callTimes()).to.be.eql(k.length)}),it("search query: 1.2 notMatch",function(){for(var e=new _utils2.default(k,{expandAll:!0}),t=mockObject.create(e).mockFunction("match"),i=0;i<k.length;i++)t.returned(!1);var l={id2ExtendInfo:{}};exp(e.search(l,"诸行无常")).to.be.eql([])}),it("search query: 1.2 解决断开的问题, 只匹配到叶子结点",function(){for(var e=new _utils2.default(k,{expandAll:!0}),t=mockObject.create(e).mockFunction("match"),i=0;i<k.length;i++){k[i].isLeaf;t.mock(function(e){return!!o[e].isLeaf})}var l={id2ExtendInfo:{}},d=e.search(l,"诸行无常");exp(d).to.be.eql(k)}),it("search query: 1.2.2.1",function(){var e=new _utils2.default(k,{expandAll:!0}),t="1.2.2.1",i={},l={id2ExtendInfo:i},d=e.search(l,t),n=[{key:"1",title:"1"},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.2.2",title:"1.2.2",pid:"1.2",path:"1/1.2"},{key:"1.2.2.1",title:"1.2.2.1",pid:"1.2.2",path:"1/1.2/1.2.2"},{key:"1.2.2.1.1",title:"1.2.2.1.1",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.1.2",title:"1.2.2.1.2",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0}];exp(e.treeData).to.be.eql(n),exp(d).to.be.eql(n);var a=e.treeData;e.colapseNode("1.2",l.id2ExtendInfo),exp(e.search(l,t),"查询出对应的结点").to.be.eql([{key:"1",title:"1"},{key:"1.2",title:"1.2",pid:"1",path:"1"}]),exp(e.treeData,"query没变化则treeData要是原来的值").to.be.equal(a),exp(e.search(l,"")).to.be.eql(k),e.expandNode("1.2",i),exp(e.treeData,"查询全部后，treeData会变为原始的数组值").to.be.equal(k)}),it("search Query条件变化的时候，expand id2ExpandInfo要重新计算",function(){var e=new _utils2.default(k,{expandAll:!0}),t={id2ExtendInfo:{}};e.search(t,"1.2.2.1"),e.search(t,""),exp(Object.keys(t.id2ExtendInfo).length).to.be.eql(k.length+1)}),it("search 连续查找",function(){var e=new _utils2.default(k,{expandAll:!0}),t={id2ExtendInfo:{}};exp(e.search(t,"1.2.1","eql")).to.be.eql([{key:"1",title:"1"},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.2.1",title:"1.2.1",pid:"1.2",path:"1/1.2",isLeaf:!0}]),exp(e.search(t,"1.2.1","eql")).to.be.eql([{key:"1",title:"1"},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.2.1",title:"1.2.1",pid:"1.2",path:"1/1.2",isLeaf:!0}]),exp(e.search(t,"1.2.2","eql")).to.be.eql([{key:"1",title:"1"},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.2.2",title:"1.2.2",pid:"1.2",path:"1/1.2"}]),exp(e.search(t,"1.3","eql")).to.be.eql([{key:"1",title:"1"},{key:"1.3",title:"1.3",pid:"1",path:"1"}])}),it("generateRealTreeData expandAll: true 折叠全部后 再 全部展开",function(){Array.prototype.push.apply([],k);var e={},t=new _utils2.default(k,{expandAll:!0});t.colapseNode("1",e),t.colapseNode("2",e),t.colapseNode("3",e),t.colapseNode("4",e),t.expandNode("1",e),t.expandNode("2",e),t.expandNode("3",e),t.expandNode("4",e);var i=t.generateRealTreeData({id2ExtendInfo:e});exp(i).to.be.eql(k)}),it("generateRealTreeData expandAll: true 折叠1 2 ",function(){var e={},t=new _utils2.default(k,{expandAll:!0});t.colapseNode("1",e),t.colapseNode("2",e);var i=t.generateRealTreeData({id2ExtendInfo:e});exp(i).to.be.eql([{key:"1",title:"1"},{key:"2",title:"2"},{key:"3",title:"3"},{key:"3.1",title:"3.1",pid:"3",path:"3",isLeaf:!0},{key:"3.2",title:"3.2",pid:"3",path:"3",isLeaf:!0},{key:"4",title:"4",isLeaf:!0}])}),it("match val: null",function(){exp(c.match(null,[""],"include")).to.be.false,exp(c.match(void 0,[""],"include")).to.be.false,exp(c.match(null,[""],"start")).to.be.false,exp(c.match(void 0,[""],"start")).to.be.false,exp(c.match(null,[""],"end")).to.be.false,exp(c.match(void 0,[""],"end")).to.be.false,exp(c.match(null,[""],"eql")).to.be.false,exp(c.match(void 0,[""],"eql")).to.be.false}),it("match val: 123,  start",function(){var e="123";exp(c.match(e,["1"],"start")).to.be.true,exp(c.match(e,["12"],"start")).to.be.true,exp(c.match(e,["123"],"start")).to.be.true,exp(c.match(e,["5"],"start")).to.be.false}),it("match val: 123,  end",function(){var e="123";exp(c.match(e,["1","2","3"],"end")).to.be.true,exp(c.match(e,["3"],"end")).to.be.true,exp(c.match(e,["23"],"end")).to.be.true,exp(c.match(e,["123"],"end")).to.be.true,exp(c.match(e,["5"],"end")).to.be.false}),it("match val: 123,  include",function(){var e="123";exp(c.match(e,["3"],"include")).to.be.true,exp(c.match(e,["23"],"include")).to.be.true,exp(c.match(e,["1"],"include")).to.be.true,exp(c.match(e,["2"],"include")).to.be.true,exp(c.match(e,["a"],"include")).to.be.false,exp(c.match(e,["1","2","3"],"include")).to.be.true}),it("match val: 123,  query: 空字符串",function(){exp(c.match("1",[""],"include")).to.be.false,exp(c.match("1",[""],"eql")).to.be.false,exp(c.match("1",[""],"start")).to.be.false,exp(c.match("1",[""],"end")).to.be.false}),it("match val: 123,  eql",function(){var e="123";exp(c.match(e,["3"],"eql")).to.be.false,exp(c.match(e,["23"],"eql")).to.be.false,exp(c.match(e,["1"],"eql")).to.be.false,exp(c.match(e,["2"],"eql")).to.be.false,exp(c.match(e,["123"],"eql")).to.be.true}),it("generateRealTreeData expandAll: true 折叠1.2 2",function(){var e={},t=new _utils2.default(k,{expandAll:!0});t.colapseNode("1.2",e),t.colapseNode("2",e);var i=t.generateRealTreeData({id2ExtendInfo:e});exp(i).to.be.eql([{key:"1",title:"1"},{key:"1.1",title:"1.1",pid:"1",path:"1",isLeaf:!0},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.3",title:"1.3",pid:"1",path:"1"},{key:"1.3.1",title:"1.3.1",pid:"1.3",path:"1/1.3"},{key:"1.3.1.1",title:"1.3.1.1",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.1.2",title:"1.3.1.2",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.2",title:"1.3.2",pid:"1.3",path:"1/1.3"},{key:"1.3.2.1",title:"1.3.2.1",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.2.2",title:"1.3.2.2",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.3",title:"1.3.3",pid:"1.3",path:"1/1.3",isLeaf:!0},{key:"2",title:"2"},{key:"3",title:"3"},{key:"3.1",title:"3.1",pid:"3",path:"3",isLeaf:!0},{key:"3.2",title:"3.2",pid:"3",path:"3",isLeaf:!0},{key:"4",title:"4",isLeaf:!0}])}),it("generateRealTreeData expandAll: false 展开 1 2 3 ",function(){var e={},t=new _utils2.default(k,{expandAll:!1});t.expandNode("1",e),t.expandNode("2",e),t.expandNode("3",e);var i=t.generateRealTreeData({id2ExtendInfo:e});exp(i).to.be.eql([{key:"1",title:"1"},{key:"1.1",title:"1.1",pid:"1",path:"1",isLeaf:!0},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.3",title:"1.3",pid:"1",path:"1"},{key:"2",title:"2"},{key:"2.1",title:"2.1",pid:"2",path:"2"},{key:"2.2",title:"2.2",pid:"2",path:"2"},{key:"3",title:"3"},{key:"3.1",title:"3.1",pid:"3",path:"3",isLeaf:!0},{key:"3.2",title:"3.2",pid:"3",path:"3",isLeaf:!0},{key:"4",title:"4",isLeaf:!0}])}),it("generateRealTreeData expandAll: false 展开 1 1.1  1.3 1.3.1 1.3.2 3",function(){var e={},t=new _utils2.default(k,{expandAll:!1});t.expandNode("1",e),t.expandNode("1.1",e),t.expandNode("1.3",e),t.expandNode("1.3.1",e),t.expandNode("1.3.2",e),t.expandNode("3",e);var i=t.generateRealTreeData({id2ExtendInfo:e});exp(i).to.be.eql([{key:"1",title:"1"},{key:"1.1",title:"1.1",pid:"1",path:"1",isLeaf:!0},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.3",title:"1.3",pid:"1",path:"1"},{key:"1.3.1",title:"1.3.1",pid:"1.3",path:"1/1.3"},{key:"1.3.1.1",title:"1.3.1.1",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.1.2",title:"1.3.1.2",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.2",title:"1.3.2",pid:"1.3",path:"1/1.3"},{key:"1.3.2.1",title:"1.3.2.1",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.2.2",title:"1.3.2.2",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.3",title:"1.3.3",pid:"1.3",path:"1/1.3",isLeaf:!0},{key:"2",title:"2"},{key:"3",title:"3"},{key:"3.1",title:"3.1",pid:"3",path:"3",isLeaf:!0},{key:"3.2",title:"3.2",pid:"3",path:"3",isLeaf:!0},{key:"4",title:"4",isLeaf:!0}])}),it("generateRealTreeData empty",function(){var e=new _utils2.default([],{expandAll:!1});exp(e.generateRealTreeData({id2ExtendInfo:{}})).to.be.eql([])}),it("generateTreeNode empty",function(){var e=new _utils2.default(k,{expandAll:!1});exp(e.generateTreeNode([])).to.be.eql([])}),it("generateTreeNode is tree",function(){var e=new _utils2.default(k,{expandAll:!1}),t=JSON.parse(JSON.stringify(k)),i=e.generateTreeNode(k);exp(k).to.be.eql(t),exp(i).to.be.eql([{key:"1",title:"1",children:[{key:"1.1",title:"1.1",pid:"1",path:"1",isLeaf:!0},{key:"1.2",title:"1.2",pid:"1",path:"1",children:[{key:"1.2.1",title:"1.2.1",pid:"1.2",path:"1/1.2",isLeaf:!0},{key:"1.2.2",title:"1.2.2",pid:"1.2",path:"1/1.2",children:[{path:"1/1.2/1.2.2",key:"1.2.2.1",title:"1.2.2.1",pid:"1.2.2",children:[{key:"1.2.2.1.1",title:"1.2.2.1.1",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.1.2",title:"1.2.2.1.2",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0}]},{key:"1.2.2.2",title:"1.2.2.2",pid:"1.2.2",path:"1/1.2/1.2.2",isLeaf:!0}]}]},{key:"1.3",title:"1.3",pid:"1",path:"1",children:[{key:"1.3.1",title:"1.3.1",pid:"1.3",path:"1/1.3",children:[{key:"1.3.1.1",title:"1.3.1.1",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.1.2",title:"1.3.1.2",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0}]},{key:"1.3.2",title:"1.3.2",pid:"1.3",path:"1/1.3",children:[{key:"1.3.2.1",title:"1.3.2.1",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.2.2",title:"1.3.2.2",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0}]},{key:"1.3.3",title:"1.3.3",pid:"1.3",path:"1/1.3",isLeaf:!0}]}]},{key:"2",title:"2",children:[{key:"2.1",title:"2.1",pid:"2",path:"2",children:[{key:"2.1.1",title:"2.1.1",pid:"2.1",path:"2/2.1",isLeaf:!0},{key:"2.1.2",title:"2.1.2",pid:"2.1",path:"2/2.1",children:[{key:"2.1.2.1",title:"2.1.2.1",pid:"2.1.2",path:"2/2.1/2.1.2",isLeaf:!0}]}]},{key:"2.2",title:"2.2",pid:"2",path:"2",children:[{key:"2.2.1",title:"2.2.1",pid:"2.2",path:"2/2.2",children:[{key:"2.2.1.1",title:"2.2.1.1",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{key:"2.2.1.2",title:"2.2.1.2",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0}]},{key:"2.2.2",title:"2.2.2",pid:"2.2",path:"2/2.2",isLeaf:!0}]}]},{key:"3",title:"3",children:[{key:"3.1",title:"3.1",pid:"3",path:"3",isLeaf:!0},{key:"3.2",title:"3.2",pid:"3",path:"3",isLeaf:!0}]},{key:"4",title:"4",isLeaf:!0}])}),it("getPathNodes 起始节点为1级结点",function(){var e=new _utils2.default(k,{expandAll:!1});exp(e.getPathNodes(k,1,{})).to.be.eql([{key:"1",title:"1"}])}),it("getPathNodes 起始结点非根结点 2 级",function(){var e=new _utils2.default(k,{expandAll:!1});exp(e.getPathNodes(k,3,{})).to.be.eql([{key:"1",title:"1"},{key:"1.2",title:"1.2",pid:"1",path:"1"}])}),it("getPathNodes 起始结点非根结点 3 级",function(){var e=new _utils2.default(k,{expandAll:!1});exp(e.getPathNodes(k,7,{})).to.be.eql([{key:"1",title:"1"},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.2.2",title:"1.2.2",pid:"1.2",path:"1/1.2"},{key:"1.2.2.1",title:"1.2.2.1",pid:"1.2.2",path:"1/1.2/1.2.2"}])}),it("slice empty",function(){var e=new _utils2.default(k,{expandAll:!1});exp(e.getPathNodes([],1,{})).to.be.eql([])}),it("getKeys",function(){var e=new _utils2.default(k,{expandAll:!1}).getKeys([{key:"1",title:"1"},{key:"2",title:"2"},{key:"3",title:"3"}]);exp(e).to.be.eql(["1","2","3"])}),it("fetchNodeExtendInfo will exisit",function(){var e,t=new _utils2.default(k,{expandAll:!1}),i={nowVisible:5,realyVisible:6,children:7,begats:8},l={nowVisible:8,realyVisible:7,children:6,begats:5},d=(_defineProperty(e={},"a",i),_defineProperty(e,"b",l),e);exp(t.fetchNodeExtendInfo("a",k,d)).to.be.eql(i),exp(t.fetchNodeExtendInfo("b",k,d)).to.be.eql(l)});var s=(_defineProperty(e={},"1",{index:0,can:!0}),_defineProperty(e,"2",{index:17,can:!0}),_defineProperty(e,"3",{index:27,can:!0}),_defineProperty(e,"4",{index:30,can:!0}),_defineProperty(e,"1.1",{index:1,can:!0}),_defineProperty(e,"1.2",{index:2,can:!0}),_defineProperty(e,"1.2.1",{index:3,can:!0}),_defineProperty(e,"1.2.2",{index:4,can:!0}),_defineProperty(e,"1.2.2.1",{index:5,can:!0}),_defineProperty(e,"1.2.2.1.1",{index:6,can:!0}),_defineProperty(e,"1.2.2.1.2",{index:7,can:!0}),_defineProperty(e,"1.2.2.2",{index:8,can:!0}),_defineProperty(e,"1.3",{index:9,can:!0}),_defineProperty(e,"1.3.1",{index:10,can:!0}),_defineProperty(e,"1.3.1.1",{index:11,can:!0}),_defineProperty(e,"1.3.1.2",{index:12,can:!0}),_defineProperty(e,"1.3.2",{index:13,can:!0}),_defineProperty(e,"1.3.2.1",{index:14,can:!0}),_defineProperty(e,"1.3.2.2",{index:15,can:!0}),_defineProperty(e,"1.3.3",{index:16,can:!0}),_defineProperty(e,"2.1",{index:18,can:!0}),_defineProperty(e,"2.1.1",{index:19,can:!0}),_defineProperty(e,"2.1.2",{index:20,can:!0}),_defineProperty(e,"2.1.2.1",{index:21,can:!0}),_defineProperty(e,"2.2",{index:22,can:!0}),_defineProperty(e,"2.2.1",{index:23,can:!0}),_defineProperty(e,"2.2.1.1",{index:24,can:!0}),_defineProperty(e,"2.2.1.2",{index:25,can:!0}),_defineProperty(e,"2.2.2",{index:26,can:!0}),_defineProperty(e,"3.1",{index:28,can:!0}),_defineProperty(e,"3.2",{index:29,can:!0}),e);function P(e){return e}it("fetchNodeExtendInfo for virual root for expandAll: true",function(){var e={nowVisible:k.length,realyVisible:k.length,children:4,begats:k.length,index:-1,canTotal:k.length,can:!1,childrenIdx:a},t={},i=new _utils2.default(k,{expandAll:!0}),l=i.VirtualRoot;exp(i.fetchNodeExtendInfo(l,k,t)).to.be.eql(e),exp(t[l]).to.be.eql(e),s[l]=e,exp(t).to.be.eql(s)}),it("fetchNodeExtendInfo for virual root for expandAll: false",function(){var e={nowVisible:4,realyVisible:4,children:4,begats:k.length,can:!1,childrenIdx:a,canTotal:k.length,index:-1},t=new _utils2.default(k,{expandAll:!1}),i=t.VirtualRoot,l={};exp(t.fetchNodeExtendInfo(i,k,l)).to.be.eql(e),exp(l[i]).to.be.eql(e),s[i]=e,exp(l).to.be.eql(s)}),it("fetchNodeExtendInfo for normal node for expandAll: false nodeId: 1",function(){var e={nowVisible:0,realyVisible:0,children:3,begats:16,can:!0,childrenIdx:r,index:0},t={},i=new _utils2.default(k,{expandAll:!1}).fetchNodeExtendInfo("1",k,t);exp(i).to.be.eql(e),exp(t[1]).to.be.eql(e)}),it("fetchNodeExtendInfo for normal node for expandAll: true  nodeId: 1",function(){var e={nowVisible:16,realyVisible:16,children:3,can:!0,begats:16,childrenIdx:r,index:0},t={},i=new _utils2.default(k,{expandAll:!0}).fetchNodeExtendInfo("1",k,t);exp(i).to.be.eql(e),exp(t[1]).to.be.eql(e)}),it("fetchNodeExtendInfo for normal node for expandAll: false nodeId: 2",function(){var e={nowVisible:0,realyVisible:0,children:2,begats:9,can:!0,index:17,childrenIdx:p},t={},i=new _utils2.default(k,{expandAll:!1}).fetchNodeExtendInfo("2",k,t);exp(i).to.be.eql(e),exp(t[2]).to.be.eql(e)}),it("fetchNodeExtendInfo for normal node for expandAll: true  nodeId: 2",function(){var e={nowVisible:9,realyVisible:9,children:2,begats:9,can:!0,index:17,childrenIdx:p},t={},i=new _utils2.default(k,{expandAll:!0}).fetchNodeExtendInfo("2",k,t);exp(i).to.be.eql(e),exp(t[2]).to.be.eql(e)}),it("fetchNodeExtendInfo for normal node for expandAll: false nodeId: 2.1.1",function(){var e=new _utils2.default(k,{expandAll:!1}).fetchNodeExtendInfo("2.1.1",k,{});exp(e).to.be.eql({nowVisible:0,can:!0,realyVisible:0,children:0,begats:0,index:19,childrenIdx:[]})}),it("fetchNodeExtendInfo for normal node for expandAll: true  nodeId: 2.1.1",function(){var e=new _utils2.default(k,{expandAll:!0}).fetchNodeExtendInfo("2.1.1",k,{});exp(e).to.be.eql({nowVisible:0,realyVisible:0,children:0,can:!0,begats:0,index:19,childrenIdx:[]})}),it("fetchNodeExtendInfo for normal node for expandAll: false nodeId: 2.1.2",function(){var e={nowVisible:0,realyVisible:0,children:1,can:!0,index:20,childrenIdx:n,begats:1},t={},i=new _utils2.default(k,{expandAll:!1}).fetchNodeExtendInfo("2.1.2",k,t);exp(i).to.be.eql(e),exp(t["2.1.2"]).to.be.eql(e)}),it("fetchNodeExtendInfo for normal node for expandAll: true  nodeId: 2.1.2",function(){var e={nowVisible:1,realyVisible:1,children:1,can:!0,index:20,begats:1,childrenIdx:n},t={},i=new _utils2.default(k,{expandAll:!0}).fetchNodeExtendInfo("2.1.2",k,t);exp(i).to.be.eql(e),exp(t["2.1.2"]).to.be.eql(e)}),it("expandNode expandAll: false nodeId: 1",function(){var e={};new _utils2.default(k,{expandAll:!1}).expandNode("1",e);var t={nowVisible:3,expanded:!0,childrenIdx:r,realyVisible:3,can:!0,children:3,begats:16,index:0};exp(e[1]).to.be.eql(t)}),it("expandNode expandAll: true nodeId: 1",function(){var e={};new _utils2.default(k,{expandAll:!0}).expandNode("1",e);var t={nowVisible:16,realyVisible:16,children:3,childrenIdx:r,can:!0,begats:16,index:0};exp(e[1]).to.be.eql(t)}),it("colapseNode expandAll: true nodeId: 1",function(){var e={},t=new _utils2.default(k,{expandAll:!0});t.expandNode("1",e),t.colapseNode("1",e);var i={nowVisible:0,realyVisible:16,children:3,can:!0,begats:16,childrenIdx:r,index:0,expanded:!1};exp(e[1]).to.be.eql(i),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:15,realyVisible:15,children:4,begats:31,can:!1,canTotal:k.length,index:-1,childrenIdx:a})}),it("colapseNode expandAll: false nodeId: 1",function(){var e={},t=new _utils2.default(k,{expandAll:!1});t.expandNode("1",e),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:7,realyVisible:7,children:4,canTotal:k.length,begats:31,can:!1,childrenIdx:a,index:-1}),t.colapseNode("1",e);var i={nowVisible:0,realyVisible:3,children:3,begats:16,expanded:!1,can:!0,childrenIdx:r,index:0};exp(e[1]).to.be.eql(i),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:4,realyVisible:4,canTotal:k.length,can:!1,children:4,childrenIdx:a,begats:31,index:-1})}),it("expandNode expandAll: true nodeId: 1 展开折叠的结点",function(){var e=new _utils2.default(k,{expandAll:!0}),t={};e.initAllNodeIndexAndTopRoot(k,t),t[1]={nowVisible:0,realyVisible:16,children:3,expanded:!1,begats:16,childrenIdx:r,index:0},e.expandNode("1",t),exp(t[1]).to.be.eql({nowVisible:16,realyVisible:16,children:3,expanded:!0,childrenIdx:r,begats:16,index:0})}),it("expandNode expandAll: true nodeId: 1 展开初始化的结点",function(){var e=new _utils2.default(k,{expandAll:!0}),t={};e.initAllNodeIndexAndTopRoot(k,t),t[1]={nowVisible:0,realyVisible:16,children:3,childrenIdx:[],begats:16,index:0},e.expandNode("1",t),exp(t[1]).to.be.eql({nowVisible:0,realyVisible:16,childrenIdx:[],children:3,begats:16,index:0})}),it("expandNode expandAll: false nodeId: 1 展开初始化的结点",function(){var e=new _utils2.default(k,{expandAll:!1}),t={};e.initAllNodeIndexAndTopRoot(k,t),t[1]={nowVisible:0,realyVisible:3,childrenIdx:[],children:3,begats:16,index:0},e.expandNode("1",t),exp(t[1]).to.be.eql({nowVisible:3,realyVisible:3,children:3,childrenIdx:[],begats:16,expanded:!0,index:0})}),it("expandNode expandAll: false nodeId: 1 展开展开结点",function(){var e={},t=new _utils2.default(k,{expandAll:!0});t.initAllNodeIndexAndTopRoot(k,e),e[1]={nowVisible:0,childrenIdx:[],realyVisible:3,children:3,expanded:!0,begats:16,index:0},t.expandNode("1",e),exp(e[1]).to.be.eql({nowVisible:0,childrenIdx:[],realyVisible:3,children:3,expanded:!0,begats:16,index:0})}),it("colapseNode expandAll: true nodeId: 1 折叠折叠结点",function(){var e={},t=new _utils2.default(k,{expandAll:!0});t.initAllNodeIndexAndTopRoot(k,e),e[1]={nowVisible:0,realyVisible:16,children:3,expanded:!1,childrenIdx:[],begats:16,index:0},t.colapseNode("1",e),exp(e[1]).to.be.eql({nowVisible:0,childrenIdx:[],realyVisible:16,children:3,expanded:!1,begats:16,index:0})}),it("colapseNode expandAll: true nodeId: 1 折叠初始化的结点",function(){var e={},t=new _utils2.default(k,{expandAll:!0});t.initAllNodeIndexAndTopRoot(k,e),e[1]={nowVisible:0,realyVisible:16,children:3,childrenIdx:[],begats:16,index:0},t.colapseNode("1",e),exp(e[1]).to.be.eql({nowVisible:0,realyVisible:16,children:3,childrenIdx:[],begats:16,expanded:!1,index:0})}),it("colapseNode expandAll: false nodeId: 1 折叠折叠结点",function(){var e={},t=new _utils2.default(k,{expandAll:!0});t.initAllNodeIndexAndTopRoot(k,e),e[1]={nowVisible:0,realyVisible:3,childrenIdx:[],children:3,expanded:!1,begats:16,index:0},t.colapseNode("1",e),exp(e[1]).to.be.eql({nowVisible:0,realyVisible:3,childrenIdx:[],children:3,begats:16,expanded:!1,index:0})}),it("colapseNode expandAll: false nodeId: 1 折叠初始化结点",function(){var e={},t=new _utils2.default(k,{expandAll:!0});t.initAllNodeIndexAndTopRoot(k,e),e[1]={nowVisible:3,realyVisible:3,children:3,childrenIdx:[],begats:16,index:0},t.colapseNode("1",e),exp(e[1]).to.be.eql({nowVisible:0,realyVisible:3,children:3,childrenIdx:[],expanded:!1,begats:16,index:0})}),it("expandNode expandAll: false nodeId: 1 , 1.1 重复展开",function(){var e={},t=new _utils2.default(k,{expandAll:!1});function i(){t.expandNode("1.2",e),exp(e[1]).to.be.eql({nowVisible:5,expanded:!0,realyVisible:5,children:3,can:!0,childrenIdx:r,begats:16,index:0}),exp(e[1.2]).to.be.eql({nowVisible:2,realyVisible:2,children:2,childrenIdx:l,expanded:!0,can:!0,begats:6,index:2})}t.expandNode("1",e),exp(e[1]).to.be.eql({nowVisible:3,expanded:!0,realyVisible:3,can:!0,children:3,begats:16,childrenIdx:r,index:0}),i(),i(),i()}),it("expandNode expandAll: true nodeId: 1 , 1.1 重复展开",function(){var e={},t=new _utils2.default(k,{expandAll:!0});function i(){t.expandNode("1.2",e),exp(e[1]).to.be.eql({nowVisible:16,realyVisible:16,children:3,begats:16,can:!0,childrenIdx:r,index:0}),exp(e[1.2]).to.be.eql({nowVisible:6,realyVisible:6,childrenIdx:l,children:2,begats:6,can:!0,index:2})}t.expandNode("1",e),exp(e[1]).to.be.eql({nowVisible:16,can:!0,realyVisible:16,children:3,begats:16,childrenIdx:r,index:0}),i(),i(),i()}),it("colapseNode expandAll: false 展开:(1->1.2) 折叠:(1.2) 重复折叠",function(){var e={},t=new _utils2.default(k,{expandAll:!1});function i(){t.colapseNode("1.2",e),exp(e[1]).to.be.eql({nowVisible:3,expanded:!0,can:!0,realyVisible:3,children:3,childrenIdx:r,begats:16,index:0}),exp(e[1.2]).to.be.eql({nowVisible:0,realyVisible:2,childrenIdx:l,children:2,can:!0,expanded:!1,begats:6,index:2})}t.expandNode("1",e),t.expandNode("1.2",e),i(),i(),i()}),it("colapseNode expandAll: false 展开:(1->1.2) 折叠:(1 -> 1.2) 重复折叠",function(){var e={},t=new _utils2.default(k,{expandAll:!1});function i(){t.colapseNode("1.2",e),exp(e[1]).to.be.eql({nowVisible:0,realyVisible:3,children:3,begats:16,can:!0,index:0,childrenIdx:r,expanded:!1}),exp(e[1.2]).to.be.eql({nowVisible:0,realyVisible:2,children:2,can:!0,childrenIdx:l,expanded:!1,begats:6,index:2})}t.expandNode("1",e),t.expandNode("1.2",e),t.colapseNode("1",e),exp(e[1]).to.be.eql({nowVisible:0,can:!0,expanded:!1,realyVisible:5,children:3,childrenIdx:r,begats:16,index:0}),exp(e[1.2]).to.be.eql({nowVisible:2,realyVisible:2,children:2,can:!0,expanded:!0,childrenIdx:l,begats:6,index:2}),i(),i(),i()}),it("colapseNode expandAll: true 展开:(1->1.2) 折叠:(1.2) 重复折叠",function(){var e={},t=new _utils2.default(k,{expandAll:!0});function i(){t.colapseNode("1.2",e),exp(e[1]).to.be.eql({nowVisible:10,can:!0,realyVisible:10,childrenIdx:r,children:3,begats:16,index:0}),exp(e[1.2]).to.be.eql({nowVisible:0,childrenIdx:l,can:!0,realyVisible:6,children:2,expanded:!1,begats:6,index:2})}t.expandNode("1",e),t.expandNode("1.2",e),i(),i(),i()}),it("colapseNode expandAll: true 展开:(1->1.2) 折叠:(1 -> 1.2) 重复折叠",function(){var e={},t=new _utils2.default(k,{expandAll:!0});function i(){t.colapseNode("1.2",e),exp(e[1]).to.be.eql({nowVisible:0,realyVisible:10,childrenIdx:r,children:3,can:!0,begats:16,index:0,expanded:!1}),exp(e[1.2]).to.be.eql({nowVisible:0,realyVisible:6,children:2,expanded:!1,childrenIdx:l,can:!0,begats:6,index:2})}t.expandNode("1",e),t.expandNode("1.2",e),t.colapseNode("1",e),exp(e[1]).to.be.eql({nowVisible:0,expanded:!1,can:!0,realyVisible:16,childrenIdx:r,children:3,begats:16,index:0}),exp(e[1.2]).to.be.eql({nowVisible:6,realyVisible:6,children:2,childrenIdx:l,can:!0,begats:6,index:2}),i(),i(),i()}),it("expandNode expandAll: false nodeId: 1 -> 1.1-> 1.2->1.2.2->1.3",function(){var e={},t=new _utils2.default(k,{expandAll:!1});t.expandNode("1",e),exp(e[1]).to.be.eql({nowVisible:3,expanded:!0,realyVisible:3,can:!0,children:3,begats:16,index:0,childrenIdx:r}),t.expandNode("1.1",e),exp(e[1]).to.be.eql({nowVisible:3,can:!0,expanded:!0,realyVisible:3,children:3,begats:16,childrenIdx:r,index:0}),exp(e[1.1]).to.be.eql({index:1,can:!0}),t.expandNode("1.2",e),exp(e[1]).to.be.eql({nowVisible:5,expanded:!0,can:!0,realyVisible:5,children:3,begats:16,childrenIdx:r,index:0}),exp(e[1.2]).to.be.eql({nowVisible:2,realyVisible:2,children:2,expanded:!0,can:!0,begats:6,childrenIdx:l,index:2}),t.expandNode("1.2.2",e),exp(e[1]).to.be.eql({nowVisible:7,realyVisible:7,expanded:!0,can:!0,childrenIdx:r,children:3,begats:16,index:0}),exp(e[1.2]).to.be.eql({nowVisible:4,can:!0,realyVisible:4,children:2,expanded:!0,childrenIdx:l,begats:6,index:2}),exp(e["1.2.2"]).to.be.eql({nowVisible:2,realyVisible:2,children:2,expanded:!0,can:!0,childrenIdx:i,begats:4,index:4})}),it("expandNode expandAll: true nodeId: 1 -> 1.1-> 1.2->1.2.2->1.3",function(){var e={},t=new _utils2.default(k,{expandAll:!0});t.expandNode("1",e),exp(e[1]).to.be.eql({nowVisible:16,can:!0,realyVisible:16,children:3,begats:16,childrenIdx:r,index:0}),t.expandNode("1.1",e),exp(e[1]).to.be.eql({nowVisible:16,realyVisible:16,children:3,begats:16,can:!0,childrenIdx:r,index:0}),exp(e[1.1]).to.be.eql({index:1,can:!0}),t.expandNode("1.2",e),exp(e[1]).to.be.eql({nowVisible:16,can:!0,realyVisible:16,children:3,begats:16,childrenIdx:r,index:0}),exp(e[1.2]).to.be.eql({nowVisible:6,realyVisible:6,can:!0,childrenIdx:l,children:2,begats:6,index:2}),t.expandNode("1.2.2",e),exp(e[1]).to.be.eql({nowVisible:16,realyVisible:16,children:3,begats:16,can:!0,childrenIdx:r,index:0}),exp(e[1.2]).to.be.eql({nowVisible:6,realyVisible:6,can:!0,children:2,begats:6,childrenIdx:l,index:2}),exp(e["1.2.2"]).to.be.eql({nowVisible:4,realyVisible:4,childrenIdx:i,children:2,begats:4,can:!0,index:4}),t.expandNode("1.3",e),exp(e[1]).to.be.eql({nowVisible:16,realyVisible:16,childrenIdx:r,can:!0,children:3,begats:16,index:0}),exp(e[1.2]).to.be.eql({nowVisible:6,realyVisible:6,children:2,begats:6,can:!0,index:2,childrenIdx:l}),exp(e[1.3]).to.be.eql({nowVisible:7,can:!0,realyVisible:7,children:3,childrenIdx:d,begats:7,index:9}),exp(e["1.2.2"]).to.be.eql({nowVisible:4,realyVisible:4,childrenIdx:i,children:2,can:!0,begats:4,index:4})}),it("collapsed expandAll: true nodeId: 展开( 1 -> 1.1-> 1.2->1.2.2->1.3) 折叠: (1.2)",function(){var e={},t=new _utils2.default(k,{expandAll:!0});t.expandNode("1",e),t.expandNode("1.1",e),t.expandNode("1.2",e),t.expandNode("1.2.2",e),t.expandNode("1.3",e),t.colapseNode("1.2",e),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:25,canTotal:k.length,realyVisible:25,children:4,childrenIdx:a,begats:31,can:!1,index:-1}),exp(e[1]).to.be.eql({nowVisible:10,realyVisible:10,childrenIdx:r,can:!0,children:3,begats:16,index:0}),exp(e[1.2]).to.be.eql({nowVisible:0,realyVisible:6,children:2,can:!0,expanded:!1,begats:6,index:2,childrenIdx:l}),exp(e[1.3]).to.be.eql({nowVisible:7,childrenIdx:d,realyVisible:7,children:3,begats:7,index:9,can:!0}),exp(e["1.2.2"]).to.be.eql({nowVisible:4,realyVisible:4,childrenIdx:i,children:2,can:!0,begats:4,index:4})}),it("collapsed expandAll: true nodeId: 展开( 1 -> 1.1-> 1.2->1.2.2->1.3) 折叠: (1.2.2)",function(){var e={},t=new _utils2.default(k,{expandAll:!0});t.expandNode("1",e),t.expandNode("1.1",e),t.expandNode("1.2",e),t.expandNode("1.2.2",e),t.expandNode("1.3",e),t.colapseNode("1.2.2",e),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:27,canTotal:k.length,realyVisible:27,children:4,begats:31,childrenIdx:a,index:-1,can:!1}),exp(e[1]).to.be.eql({nowVisible:12,childrenIdx:r,can:!0,realyVisible:12,children:3,begats:16,index:0}),exp(e[1.2]).to.be.eql({nowVisible:2,realyVisible:2,children:2,begats:6,can:!0,index:2,childrenIdx:l}),exp(e[1.3]).to.be.eql({nowVisible:7,realyVisible:7,childrenIdx:d,children:3,can:!0,begats:7,index:9}),exp(e["1.2.2"]).to.be.eql({nowVisible:0,childrenIdx:i,expanded:!1,can:!0,realyVisible:4,children:2,begats:4,index:4})}),it("collapsed expandAll: fasle nodeId: 展开( 1 -> 1.1-> 1.2->1.2.2->1.3) 折叠: (1.2.2)",function(){var e={},t=new _utils2.default(k,{expandAll:!1});t.expandNode("1",e),t.expandNode("1.1",e),t.expandNode("1.2",e),t.expandNode("1.2.2",e),t.expandNode("1.3",e),t.colapseNode("1.2.2",e),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:12,canTotal:k.length,childrenIdx:a,realyVisible:12,children:4,begats:31,index:-1,can:!1}),exp(e[1]).to.be.eql({nowVisible:8,childrenIdx:r,realyVisible:8,can:!0,expanded:!0,children:3,begats:16,index:0}),exp(e[1.2]).to.be.eql({nowVisible:2,realyVisible:2,children:2,can:!0,expanded:!0,begats:6,index:2,childrenIdx:l}),exp(e[1.3]).to.be.eql({nowVisible:3,realyVisible:3,children:3,can:!0,childrenIdx:d,begats:7,index:9,expanded:!0}),exp(e["1.2.2"]).to.be.eql({nowVisible:0,childrenIdx:i,expanded:!1,realyVisible:2,children:2,begats:4,index:4,can:!0})}),it("collapsed expandAll: fasle nodeId: 折叠展开交叉的情况",function(){var e={},t=new _utils2.default(k,{expandAll:!1});t.expandNode("1",e),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:7,canTotal:k.length,realyVisible:7,children:4,childrenIdx:a,begats:31,index:-1,can:!1}),exp(e[1]).to.be.eql({nowVisible:3,childrenIdx:r,realyVisible:3,children:3,begats:16,index:0,expanded:!0,can:!0}),t.colapseNode("1",e),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:4,canTotal:k.length,realyVisible:4,children:4,childrenIdx:a,begats:31,can:!1,index:-1}),exp(e[1]).to.be.eql({nowVisible:0,realyVisible:3,children:3,can:!0,begats:16,childrenIdx:r,index:0,expanded:!1}),t.expandNode("1",e),exp(e[1]).to.be.eql({nowVisible:3,realyVisible:3,children:3,childrenIdx:r,can:!0,begats:16,index:0,expanded:!0}),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:7,canTotal:k.length,realyVisible:7,children:4,can:!1,childrenIdx:a,begats:31,index:-1}),t.expandNode("1.2",e),exp(e[1]).to.be.eql({nowVisible:5,realyVisible:5,children:3,begats:16,can:!0,childrenIdx:r,index:0,expanded:!0}),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:9,realyVisible:9,canTotal:k.length,children:4,childrenIdx:a,begats:31,index:-1,can:!1}),t.colapseNode("1.2",e),exp(e[1]).to.be.eql({nowVisible:3,realyVisible:3,children:3,childrenIdx:r,can:!0,begats:16,index:0,expanded:!0}),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:7,childrenIdx:a,can:!1,canTotal:k.length,realyVisible:7,children:4,begats:31,index:-1}),t.expandNode("1.2",e),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:9,canTotal:k.length,childrenIdx:a,can:!1,realyVisible:9,children:4,begats:31,index:-1}),exp(e[1]).to.be.eql({nowVisible:5,realyVisible:5,children:3,begats:16,childrenIdx:r,can:!0,index:0,expanded:!0}),t.expandNode("1.2.2",e),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:11,realyVisible:11,canTotal:k.length,children:4,begats:31,can:!1,childrenIdx:a,index:-1}),exp(e[1]).to.be.eql({nowVisible:7,realyVisible:7,children:3,begats:16,childrenIdx:r,can:!0,index:0,expanded:!0}),t.colapseNode("1.2.2",e),exp(e[1]).to.be.eql({nowVisible:5,realyVisible:5,children:3,begats:16,index:0,childrenIdx:r,can:!0,expanded:!0}),exp(e[t.VirtualRoot]).to.be.eql({nowVisible:9,realyVisible:9,childrenIdx:a,can:!1,canTotal:k.length,children:4,begats:31,index:-1})}),it("slice all node",function(){var e=new _utils2.default(k,{expandAll:!1});exp(e.slice(k,0,100,{})).to.be.eql({rows:k,parentCount:0})}),it("slice all 1.2.2.1.2",function(){var e=new _utils2.default(k,{expandAll:!1});exp(e.slice(k,7,100,{})).to.be.eql({rows:[{key:"1",title:"1"},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.2.2",title:"1.2.2",pid:"1.2",path:"1/1.2"},{key:"1.2.2.1",title:"1.2.2.1",pid:"1.2.2",path:"1/1.2/1.2.2"},{key:"1.2.2.1.2",title:"1.2.2.1.2",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.2",title:"1.2.2.2",pid:"1.2.2",path:"1/1.2/1.2.2",isLeaf:!0},{key:"1.3",title:"1.3",pid:"1",path:"1"},{key:"1.3.1",title:"1.3.1",pid:"1.3",path:"1/1.3"},{key:"1.3.1.1",title:"1.3.1.1",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.1.2",title:"1.3.1.2",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.2",title:"1.3.2",pid:"1.3",path:"1/1.3"},{key:"1.3.2.1",title:"1.3.2.1",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.2.2",title:"1.3.2.2",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.3",title:"1.3.3",pid:"1.3",path:"1/1.3",isLeaf:!0},{key:"2",title:"2"},{key:"2.1",title:"2.1",pid:"2",path:"2"},{key:"2.1.1",title:"2.1.1",pid:"2.1",path:"2/2.1",isLeaf:!0},{key:"2.1.2",title:"2.1.2",pid:"2.1",path:"2/2.1"},{key:"2.1.2.1",title:"2.1.2.1",pid:"2.1.2",path:"2/2.1/2.1.2",isLeaf:!0},{key:"2.2",title:"2.2",pid:"2",path:"2"},{key:"2.2.1",title:"2.2.1",pid:"2.2",path:"2/2.2"},{key:"2.2.1.1",title:"2.2.1.1",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{key:"2.2.1.2",title:"2.2.1.2",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{key:"2.2.2",title:"2.2.2",pid:"2.2",path:"2/2.2",isLeaf:!0},{key:"3",title:"3"},{key:"3.1",title:"3.1",pid:"3",path:"3",isLeaf:!0},{key:"3.2",title:"3.2",pid:"3",path:"3",isLeaf:!0},{key:"4",title:"4",isLeaf:!0}],parentCount:4})}),it("generateRealTreeData children === nowVisible",function(){for(var e=[],t=0;t<3;t++){e.push({key:""+t,title:""+t});for(var i=0;i<2;i++){var l=t+"."+i;e.push({key:l,title:l,pid:""+t,path:""+t});for(var d=0;d<3;d++){var n=t+"."+i+"."+d;e.push({key:n,title:n,pid:l,path:t+"/"+l});for(var a=0;a<5;a++){var r=t+"."+i+"."+d+"."+a;e.push({key:r,title:r,pid:n,isLeaf:!0,path:t+"/"+l+"/"+n})}}}}var p=new _utils2.default(e,{expandAll:!1}),o={};p.expandNode("0",o),p.expandNode("0.0",o),p.expandNode("0.0.0",o);var c=p.generateRealTreeData({id2ExtendInfo:o});exp(c).to.be.eql([{key:"0",title:"0"},{key:"0.0",title:"0.0",pid:"0",path:"0"},{key:"0.0.0",title:"0.0.0",pid:"0.0",path:"0/0.0"},{key:"0.0.0.0",title:"0.0.0.0",pid:"0.0.0",isLeaf:!0,path:"0/0.0/0.0.0"},{key:"0.0.0.1",title:"0.0.0.1",pid:"0.0.0",isLeaf:!0,path:"0/0.0/0.0.0"},{key:"0.0.0.2",title:"0.0.0.2",pid:"0.0.0",isLeaf:!0,path:"0/0.0/0.0.0"},{key:"0.0.0.3",title:"0.0.0.3",pid:"0.0.0",isLeaf:!0,path:"0/0.0/0.0.0"},{key:"0.0.0.4",title:"0.0.0.4",pid:"0.0.0",isLeaf:!0,path:"0/0.0/0.0.0"},{key:"0.0.1",title:"0.0.1",pid:"0.0",path:"0/0.0"},{key:"0.0.2",title:"0.0.2",pid:"0.0",path:"0/0.0"},{key:"0.1",title:"0.1",pid:"0",path:"0"},{key:"1",title:"1"},{key:"2",title:"2"}])}),it("selectNode key: 1.3.2.1 unSelectNode Key: 1.3.2.1",function(){var e,t={},i={halfchecked:{},checked:{},value:{}},l=new _utils2.default(k,{expandAll:!1});l.selectNode("1.3.2.1",i,t),exp(i).to.be.eql({halfchecked:(e={},_defineProperty(e,P("1"),1),_defineProperty(e,P("1.3"),1),_defineProperty(e,P("1.3.2"),1),_defineProperty(e,P("1.3.2.1"),1),e),checked:_defineProperty({},P("1.3.2.1"),!0),value:_defineProperty({},P("1.3.2.1"),!0)}),l.unSelectNode("1.3.2.1",i,t),exp(i).to.be.eql({halfchecked:{},checked:{},value:{}})}),it("selectNode key: 1.3.2 unSelectNode Key: 1.3.2",function(){var e,t,i,l={},d={halfchecked:{},checked:{},value:{}},n=new _utils2.default(k,{expandAll:!1});n.selectNode("1.3.2",d,l),exp(d).to.be.eql({halfchecked:(e={},_defineProperty(e,P("1"),3),_defineProperty(e,P("1.3"),3),_defineProperty(e,P("1.3.2"),3),e),checked:(t={},_defineProperty(t,P("1.3.2"),!0),_defineProperty(t,P("1.3.2.1"),!0),_defineProperty(t,P("1.3.2.2"),!0),t),value:(i={},_defineProperty(i,P("1.3.2"),!0),_defineProperty(i,P("1.3.2.1"),!0),_defineProperty(i,P("1.3.2.2"),!0),i)}),n.unSelectNode("1.3.2",d,l),exp(d).to.be.eql({halfchecked:{},checked:{},value:{}})}),it("selectNode key: 1.3.2 unSelectNode Key: 1.3.2.1 1.3.2.2",function(){var e,t,i,l={},d={halfchecked:{},checked:{},value:{}},n=new _utils2.default(k,{expandAll:!1});n.selectNode("1.3.2",d,l),n.unSelectNode("1.3.2.1",d,l),exp(d).to.be.eql({halfchecked:(e={},_defineProperty(e,P("1"),2),_defineProperty(e,P("1.3"),2),_defineProperty(e,P("1.3.2"),2),e),checked:_defineProperty({},P("1.3.2.2"),!0),value:(t={},_defineProperty(t,P("1.3.2"),!0),_defineProperty(t,P("1.3.2.2"),!0),t)}),n.unSelectNode("1.3.2.2",d,l),exp(d).to.be.eql({halfchecked:(i={},_defineProperty(i,P("1"),1),_defineProperty(i,P("1.3"),1),_defineProperty(i,P("1.3.2"),1),i),checked:{},value:_defineProperty({},P("1.3.2"),!0)})}),it("selectNode key: 1.3.2.1 unSelectNode Key: 1.3.2",function(){var e,t={},i={halfchecked:{},checked:{},value:{}},l=new _utils2.default(k,{expandAll:!1});l.selectNode("1.3.2.1",i,t),exp(i).to.be.eql({halfchecked:(e={},_defineProperty(e,P("1"),1),_defineProperty(e,P("1.3"),1),_defineProperty(e,P("1.3.2"),1),_defineProperty(e,P("1.3.2.1"),1),e),checked:_defineProperty({},P("1.3.2.1"),!0),value:_defineProperty({},P("1.3.2.1"),!0)}),l.unSelectNode("1.3.2",i,t),exp(i).to.be.eql({halfchecked:{},checked:{},value:{}})}),it("selectDirNode key: 1.3",function(){var e,t={halfchecked:{},checked:{},value:{}};new _utils2.default(k,{expandAll:!1}).selectDirNode("1.3",t,{}),exp(t).to.be.eql({halfchecked:(e={},_defineProperty(e,P("1"),1),_defineProperty(e,P("1.3"),1),e),checked:{},value:_defineProperty({},P("1.3"),!0)})}),it("selectDirNode key: 1.3.2.1 1.3.2.2 1.3.2",function(){var e,t,i,l,d,n,a,r={},p={halfchecked:{},checked:{},value:{}},o=new _utils2.default(k,{expandAll:!1});o.selectDirNode("1.3.2.1",p,r),exp(p).to.be.eql({halfchecked:(e={},_defineProperty(e,P("1"),1),_defineProperty(e,P("1.3"),1),_defineProperty(e,P("1.3.2"),1),_defineProperty(e,P("1.3.2.1"),1),e),checked:_defineProperty({},P("1.3.2.1"),!0),value:_defineProperty({},P("1.3.2.1"),!0)}),o.selectDirNode("1.3.2.2",p,r),exp(p).to.be.eql({halfchecked:(t={},_defineProperty(t,P("1"),2),_defineProperty(t,P("1.3"),2),_defineProperty(t,P("1.3.2"),2),_defineProperty(t,P("1.3.2.1"),1),_defineProperty(t,P("1.3.2.2"),1),t),checked:(i={},_defineProperty(i,P("1.3.2.1"),!0),_defineProperty(i,P("1.3.2.2"),!0),i),value:(l={},_defineProperty(l,P("1.3.2.1"),!0),_defineProperty(l,P("1.3.2.2"),!0),l)}),o.selectDirNode("1.3.2",p,r),exp(p).to.be.eql({halfchecked:(d={},_defineProperty(d,P("1"),3),_defineProperty(d,P("1.3"),3),_defineProperty(d,P("1.3.2"),3),_defineProperty(d,P("1.3.2.1"),1),_defineProperty(d,P("1.3.2.2"),1),d),checked:(n={},_defineProperty(n,P("1.3.2"),!0),_defineProperty(n,P("1.3.2.1"),!0),_defineProperty(n,P("1.3.2.2"),!0),n),value:(a={},_defineProperty(a,P("1.3.2"),!0),_defineProperty(a,P("1.3.2.1"),!0),_defineProperty(a,P("1.3.2.2"),!0),a)})}),it("selectDirNode key: 1.3.2.1 1.3.2.2 1.3.2",function(){var e,t,i,l,d,n,a,r,p,o,c,f,y,s,x,h,u={},b={halfchecked:{},checked:{},value:{}},_=new _utils2.default(k,{expandAll:!1});_.selectDirNode("1.3.2.1",b,u),exp(b).to.be.eql({halfchecked:(e={},_defineProperty(e,P("1"),1),_defineProperty(e,P("1.3"),1),_defineProperty(e,P("1.3.2"),1),_defineProperty(e,P("1.3.2.1"),1),e),checked:_defineProperty({},P("1.3.2.1"),!0),value:_defineProperty({},P("1.3.2.1"),!0)}),_.selectDirNode("1.3.2.2",b,u),exp(b).to.be.eql({halfchecked:(t={},_defineProperty(t,P("1"),2),_defineProperty(t,P("1.3"),2),_defineProperty(t,P("1.3.2"),2),_defineProperty(t,P("1.3.2.1"),1),_defineProperty(t,P("1.3.2.2"),1),t),checked:(i={},_defineProperty(i,P("1.3.2.1"),!0),_defineProperty(i,P("1.3.2.2"),!0),i),value:(l={},_defineProperty(l,P("1.3.2.1"),!0),_defineProperty(l,P("1.3.2.2"),!0),l)}),_.selectDirNode("1.3.2",b,u),exp(b).to.be.eql({halfchecked:(d={},_defineProperty(d,P("1"),3),_defineProperty(d,P("1.3"),3),_defineProperty(d,P("1.3.2"),3),_defineProperty(d,P("1.3.2.1"),1),_defineProperty(d,P("1.3.2.2"),1),d),checked:(n={},_defineProperty(n,P("1.3.2"),!0),_defineProperty(n,P("1.3.2.1"),!0),_defineProperty(n,P("1.3.2.2"),!0),n),value:(a={},_defineProperty(a,P("1.3.2"),!0),_defineProperty(a,P("1.3.2.1"),!0),_defineProperty(a,P("1.3.2.2"),!0),a)}),_.selectDirNode("1.3.1.1",b,u),exp(b).to.be.eql({halfchecked:(r={},_defineProperty(r,P("1"),4),_defineProperty(r,P("1.3"),4),_defineProperty(r,P("1.3.2"),3),_defineProperty(r,P("1.3.2.1"),1),_defineProperty(r,P("1.3.2.2"),1),_defineProperty(r,P("1.3.1"),1),_defineProperty(r,P("1.3.1.1"),1),r),checked:(p={},_defineProperty(p,P("1.3.2"),!0),_defineProperty(p,P("1.3.2.1"),!0),_defineProperty(p,P("1.3.2.2"),!0),_defineProperty(p,P("1.3.1.1"),!0),p),value:(o={},_defineProperty(o,P("1.3.2"),!0),_defineProperty(o,P("1.3.2.1"),!0),_defineProperty(o,P("1.3.2.2"),!0),_defineProperty(o,P("1.3.1.1"),!0),o)}),_.selectDirNode("1.3.1.2",b,u),exp(b).to.be.eql({halfchecked:(c={},_defineProperty(c,P("1"),5),_defineProperty(c,P("1.3"),5),_defineProperty(c,P("1.3.2"),3),_defineProperty(c,P("1.3.2.1"),1),_defineProperty(c,P("1.3.2.2"),1),_defineProperty(c,P("1.3.1"),2),_defineProperty(c,P("1.3.1.1"),1),_defineProperty(c,P("1.3.1.2"),1),c),checked:(f={},_defineProperty(f,P("1.3.2"),!0),_defineProperty(f,P("1.3.2.1"),!0),_defineProperty(f,P("1.3.2.2"),!0),_defineProperty(f,P("1.3.1.1"),!0),_defineProperty(f,P("1.3.1.2"),!0),f),value:(y={},_defineProperty(y,P("1.3.2"),!0),_defineProperty(y,P("1.3.2.1"),!0),_defineProperty(y,P("1.3.2.2"),!0),_defineProperty(y,P("1.3.1.1"),!0),_defineProperty(y,P("1.3.1.2"),!0),y)}),_.selectDirNode("1.3.1",b,u),exp(b).to.be.eql({halfchecked:(s={},_defineProperty(s,P("1"),6),_defineProperty(s,P("1.3"),6),_defineProperty(s,P("1.3.2"),3),_defineProperty(s,P("1.3.2.1"),1),_defineProperty(s,P("1.3.2.2"),1),_defineProperty(s,P("1.3.1"),3),_defineProperty(s,P("1.3.1.1"),1),_defineProperty(s,P("1.3.1.2"),1),s),checked:(x={},_defineProperty(x,P("1.3.2"),!0),_defineProperty(x,P("1.3.2.1"),!0),_defineProperty(x,P("1.3.2.2"),!0),_defineProperty(x,P("1.3.1"),!0),_defineProperty(x,P("1.3.1.1"),!0),_defineProperty(x,P("1.3.1.2"),!0),x),value:(h={},_defineProperty(h,P("1.3.2"),!0),_defineProperty(h,P("1.3.2.1"),!0),_defineProperty(h,P("1.3.2.2"),!0),_defineProperty(h,P("1.3.1"),!0),_defineProperty(h,P("1.3.1.1"),!0),_defineProperty(h,P("1.3.1.2"),!0),h)})}),it("selectNode key: 1.3.1 selectDirNode key: 1.3",function(){var e,t={halfchecked:{},checked:{},value:{}};new _utils2.default(k,{expandAll:!1}).selectNode("1.3.1.1",t,{}),exp(t).to.be.eql({halfchecked:(e={},_defineProperty(e,P("1"),1),_defineProperty(e,P("1.3"),1),_defineProperty(e,P("1.3.1"),1),_defineProperty(e,P("1.3.1.1"),1),e),checked:_defineProperty({},P("1.3.1.1"),!0),value:_defineProperty({},P("1.3.1.1"),!0)})}),it("selectNode key: 1.3.1.2  1.3.1.1 unSelectNode Key: 1.3.1.1",function(){var e,t,i,l,d,n={},a={halfchecked:{},checked:{},value:{}},r=new _utils2.default(k,{expandAll:!1});r.selectNode("1.3.1.1",a,n),exp(a).to.be.eql({halfchecked:(e={},_defineProperty(e,P("1"),1),_defineProperty(e,P("1.3"),1),_defineProperty(e,P("1.3.1"),1),_defineProperty(e,P("1.3.1.1"),1),e),checked:_defineProperty({},P("1.3.1.1"),!0),value:_defineProperty({},P("1.3.1.1"),!0)}),r.selectNode("1.3.1.2",a,n),exp(a).to.be.eql({halfchecked:(t={},_defineProperty(t,P("1"),2),_defineProperty(t,P("1.3"),2),_defineProperty(t,P("1.3.1"),2),_defineProperty(t,P("1.3.1.1"),1),_defineProperty(t,P("1.3.1.2"),1),t),checked:(i={},_defineProperty(i,P("1.3.1.1"),!0),_defineProperty(i,P("1.3.1.2"),!0),i),value:(l={},_defineProperty(l,P("1.3.1.1"),!0),_defineProperty(l,P("1.3.1.2"),!0),l)}),r.unSelectNode("1.3.1.2",a,n),exp(a).to.be.eql({halfchecked:(d={},_defineProperty(d,P("1"),1),_defineProperty(d,P("1.3"),1),_defineProperty(d,P("1.3.1"),1),_defineProperty(d,P("1.3.1.1"),1),d),checked:_defineProperty({},P("1.3.1.1"),!0),value:_defineProperty({},P("1.3.1.1"),!0)})}),it("selectNode key: 1.3.1 unSelectNode Key: 1.3.1.1  selectNode key: 1.3.1",function(){var e,t,i,l={},d={halfchecked:{},checked:{},value:{}},n=new _utils2.default(k,{expandAll:!0});n.selectNode("1.3.1",d,l),n.unSelectNode("1.3.1.1",d,l),n.selectNode("1.3.1.1",d,l),n.selectNode("1.3.1.2",d,l),exp(d).to.be.eql({halfchecked:(e={},_defineProperty(e,P("1"),3),_defineProperty(e,P("1.3"),3),_defineProperty(e,P("1.3.1"),3),_defineProperty(e,P("1.3.1.1"),1),e),checked:(t={},_defineProperty(t,P("1.3.1"),!0),_defineProperty(t,P("1.3.1.1"),!0),_defineProperty(t,P("1.3.1.2"),!0),t),value:(i={},_defineProperty(i,P("1.3.1"),!0),_defineProperty(i,P("1.3.1.1"),!0),_defineProperty(i,P("1.3.1.2"),!0),i)})}),it("selectNode key: 1.2.2 unSelectNode Key: 1.2.2.1.1 & 1.2.2.1.2 & 1.2.2.1",function(){var e,t,i,l,d,n,a,r,p,o,c={},f={halfchecked:{},checked:{},value:{}},y=new _utils2.default(k,{expandAll:!1});y.selectNode("1.2.2",f,c),exp(f).to.be.eql({halfchecked:(e={},_defineProperty(e,P("1"),5),_defineProperty(e,P("1.2"),5),_defineProperty(e,P("1.2.2"),5),_defineProperty(e,P("1.2.2.1"),3),e),checked:(t={},_defineProperty(t,P("1.2.2"),!0),_defineProperty(t,P("1.2.2.1"),!0),_defineProperty(t,P("1.2.2.1.1"),!0),_defineProperty(t,P("1.2.2.1.2"),!0),_defineProperty(t,P("1.2.2.2"),!0),t),value:(i={},_defineProperty(i,P("1.2.2"),!0),_defineProperty(i,P("1.2.2.1"),!0),_defineProperty(i,P("1.2.2.1.1"),!0),_defineProperty(i,P("1.2.2.1.2"),!0),_defineProperty(i,P("1.2.2.2"),!0),i)}),y.unSelectNode("1.2.2.1.1",f,c),exp(f).to.be.eql({halfchecked:(l={},_defineProperty(l,P("1"),4),_defineProperty(l,P("1.2"),4),_defineProperty(l,P("1.2.2"),4),_defineProperty(l,P("1.2.2.1"),2),l),checked:(d={},_defineProperty(d,P("1.2.2.2"),!0),_defineProperty(d,P("1.2.2.1.2"),!0),d),value:(n={},_defineProperty(n,P("1.2.2"),!0),_defineProperty(n,P("1.2.2.1"),!0),_defineProperty(n,P("1.2.2.1.2"),!0),_defineProperty(n,P("1.2.2.2"),!0),n)}),y.unSelectNode("1.2.2.1.2",f,c),exp(f).to.be.eql({halfchecked:(a={},_defineProperty(a,P("1"),3),_defineProperty(a,P("1.2"),3),_defineProperty(a,P("1.2.2"),3),_defineProperty(a,P("1.2.2.1"),1),a),checked:_defineProperty({},P("1.2.2.2"),!0),value:(r={},_defineProperty(r,P("1.2.2"),!0),_defineProperty(r,P("1.2.2.1"),!0),_defineProperty(r,P("1.2.2.2"),!0),r)}),y.unSelectNode("1.2.2.1",f,c),exp(f).to.be.eql({halfchecked:(p={},_defineProperty(p,P("1"),2),_defineProperty(p,P("1.2"),2),_defineProperty(p,P("1.2.2"),2),p),checked:_defineProperty({},P("1.2.2.2"),!0),value:(o={},_defineProperty(o,P("1.2.2"),!0),_defineProperty(o,P("1.2.2.2"),!0),o)})}),it(" selectNode key: 1.2 unSelectNode Key: 1.2.1 - 1.2.2.2 - 1.2.2",function(){var e,t={},i={halfchecked:{},checked:{},value:{}},l=new _utils2.default(k,{expandAll:!1});l.selectNode("1.2",i,t),l.unSelectNode("1.2.1",i,t),l.unSelectNode("1.2.2.2",i,t),l.unSelectNode("1.2.2",i,t),exp(i).to.be.eql({halfchecked:(e={},_defineProperty(e,P("1"),1),_defineProperty(e,P("1.2"),1),e),checked:{},value:_defineProperty({},P("1.2"),!0)})}),it(" selectNode key: 1.2 onlySelectLeaf: true,  unSelectNode Key:  1.2.1 - 1.2.2.2 - 1.2.2",function(){var e={},t={halfchecked:{},checked:{},value:{}},i=new _utils2.default(k,{expandAll:!1,onlySelectLeaf:!0});i.selectNode("1.2",t,e),i.unSelectNode("1.2.1",t,e),i.unSelectNode("1.2.2.2",t,e),i.unSelectNode("1.2.2",t,e),i.selectNode("1.2.1",t,e),exp(t.value).to.be.eql(_defineProperty({},P("1.2.1"),!0))}),it(" selectDirNode key: 1 onlySelectLeaf: true,  ",function(){var e={halfchecked:{},checked:{},value:{}};new _utils2.default(k,{expandAll:!1,onlySelectLeaf:!0}).selectDirNode("1",e,{}),exp(e.value).to.be.eql({})}),it(" selectDirNode key: 1 igronSelectField: disabled,  ",function(){var e={halfchecked:{},checked:{},value:{}};new _utils2.default([{key:"1",title:"1",disabled:!0}],{expandAll:!1,igronSelectField:"disabled"}).selectDirNode("1",e,{}),exp(e.value).to.be.eql({})}),it(" selectDirNode key: 1 limitCount: 1  ",function(){var e={},t={halfchecked:{},checked:{},value:{}},i=new _utils2.default(k,{expandAll:!1,limitCount:1});i.selectDirNode("1",t,e),i.selectDirNode("2",t,e),exp(t.value).to.be.eql(_defineProperty({},P("1"),!0))}),it(" selectNode key: 1 limitCount: 3  ",function(){var e,t={},i={halfchecked:{},checked:{},value:{}},l=new _utils2.default(k,{expandAll:!1,limitCount:3});l.selectNode("1",i,t),l.selectNode("2",i,t),exp(i.value).to.be.eql((_defineProperty(e={},P("1"),!0),_defineProperty(e,P("1.1"),!0),_defineProperty(e,P("1.2"),!0),e))}),it(" selectNode key: 1.2 igronSelectField: disabled,  unSelectNode Key:  1.2.1 - 1.2.2.2 - 1.2.2",function(){var e,t={halfchecked:{},checked:{},value:{}};new _utils2.default([{key:"1",title:"1"},{key:"1.1",title:"1.1",pid:"1",path:"1",isLeaf:!0,disabled:!0},{key:"1.2",title:"1.2",pid:"1",path:"1",disabled:!0},{key:"1.2.1",title:"1.2.1",pid:"1.2",path:"1/1.2",isLeaf:!0,disabled:!0},{key:"1.2.2",title:"1.2.2",pid:"1.2",path:"1/1.2"},{key:"1.2.2.1",title:"1.2.2.1",pid:"1.2.2",path:"1/1.2/1.2.2"},{key:"1.2.2.1.1",title:"1.2.2.1.1",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.1.2",title:"1.2.2.1.2",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.2",title:"1.2.2.2",pid:"1.2.2",path:"1/1.2/1.2.2",isLeaf:!0,disabled:!0}],{expandAll:!1,onlySelectLeaf:!1,igronSelectField:"disabled"}).selectNode("1.2",t,{}),exp(t.value).to.be.eql((_defineProperty(e={},P("1.2.2"),!0),_defineProperty(e,P("1.2.2.1"),!0),_defineProperty(e,P("1.2.2.1.1"),!0),_defineProperty(e,P("1.2.2.1.2"),!0),e))}),it(" selectNode key: 1.2 onlySelectLeaf: true igronSelectField: disabled,  unSelectNode Key:  1.2.1 - 1.2.2.2 - 1.2.2",function(){var e,t={halfchecked:{},checked:{},value:{}};new _utils2.default([{key:"1",title:"1"},{key:"1.1",title:"1.1",pid:"1",path:"1",isLeaf:!0,disabled:!0},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.2.1",title:"1.2.1",pid:"1.2",path:"1/1.2",isLeaf:!0,disabled:!0},{key:"1.2.2",title:"1.2.2",pid:"1.2",path:"1/1.2"},{key:"1.2.2.1",title:"1.2.2.1",pid:"1.2.2",path:"1/1.2/1.2.2"},{key:"1.2.2.1.1",title:"1.2.2.1.1",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.1.2",title:"1.2.2.1.2",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.2",title:"1.2.2.2",pid:"1.2.2",path:"1/1.2/1.2.2",isLeaf:!0,disabled:!0}],{expandAll:!1,onlySelectLeaf:!0,igronSelectField:"disabled"}).selectNode("1.2",t,{}),exp(t.value).to.be.eql((_defineProperty(e={},P("1.2.2.1.1"),!0),_defineProperty(e,P("1.2.2.1.2"),!0),e))}),it(" selectNode key: 1 onlySelectLeaf: true",function(){var e,t={halfchecked:{},checked:{},value:{}};new _utils2.default(k,{expandAll:!1,onlySelectLeaf:!0}).selectNode("1",t,{}),exp(t.value).to.be.eql((_defineProperty(e={},P("1.1"),!0),_defineProperty(e,P("1.2.1"),!0),_defineProperty(e,P("1.2.2.1.1"),!0),_defineProperty(e,P("1.2.2.1.2"),!0),_defineProperty(e,P("1.2.2.2"),!0),_defineProperty(e,P("1.3.1.1"),!0),_defineProperty(e,P("1.3.1.2"),!0),_defineProperty(e,P("1.3.2.1"),!0),_defineProperty(e,P("1.3.2.2"),!0),_defineProperty(e,P("1.3.3"),!0),e))}),it("value2SelectInfo only leafNode",function(){var e,t,i,l,d=(_defineProperty(e={},P("1.2.2.1.1"),!0),_defineProperty(e,P("1.2.2.1.2"),!0),e),n={};c.initAllNodeIndexAndTopRoot(k,n);var a=c.value2SelectInfo(Object.keys(d),[],d,n);exp(a).to.be.eql({halfchecked:(t={},_defineProperty(t,P("1"),2),_defineProperty(t,P("1.2"),2),_defineProperty(t,P("1.2.2"),2),_defineProperty(t,P("1.2.2.1"),2),_defineProperty(t,P("1.2.2.1.1"),1),_defineProperty(t,P("1.2.2.1.2"),1),t),checked:(i={},_defineProperty(i,P("1.2.2.1.1"),!0),_defineProperty(i,P("1.2.2.1.2"),!0),i),value:(l={},_defineProperty(l,P("1.2.2.1.1"),!0),_defineProperty(l,P("1.2.2.1.2"),!0),l)})}),it("value2SelectInfo leafNode & dirNdoe  halfChecked 不存在",function(){var e,t,i,l,d=(_defineProperty(e={},P("1.3.1"),!0),_defineProperty(e,P("1.2.2.1.1"),!0),_defineProperty(e,P("1.2.2.1.2"),!0),e),n={};c.initAllNodeIndexAndTopRoot(k,n);var a=c.value2SelectInfo(Object.keys(d),[],d,n);exp(a).to.be.eql({halfchecked:(t={},_defineProperty(t,P("1"),3),_defineProperty(t,P("1.3"),1),_defineProperty(t,P("1.3.1"),1),_defineProperty(t,P("1.2"),2),_defineProperty(t,P("1.2.2"),2),_defineProperty(t,P("1.2.2.1"),2),_defineProperty(t,P("1.2.2.1.1"),1),_defineProperty(t,P("1.2.2.1.2"),1),t),checked:(i={},_defineProperty(i,P("1.2.2.1.1"),!0),_defineProperty(i,P("1.2.2.1.2"),!0),i),value:(l={},_defineProperty(l,P("1.2.2.1.1"),!0),_defineProperty(l,P("1.2.2.1.2"),!0),_defineProperty(l,P("1.3.1"),!0),l)})}),it("value2SelectInfo leafNode & dirNdoe  halfChecked 已存在",function(){var e,t,i,l,d=(_defineProperty(e={},P("1.2.2.1"),!0),_defineProperty(e,P("1.2.2.1.1"),!0),_defineProperty(e,P("1.2.2.1.2"),!0),e),n={};c.initAllNodeIndexAndTopRoot(k,n);var a=c.value2SelectInfo(Object.keys(d),[],d,n);exp(a).to.be.eql({halfchecked:(t={},_defineProperty(t,P("1"),3),_defineProperty(t,P("1.2"),3),_defineProperty(t,P("1.2.2"),3),_defineProperty(t,P("1.2.2.1"),3),_defineProperty(t,P("1.2.2.1.1"),1),_defineProperty(t,P("1.2.2.1.2"),1),t),checked:(i={},_defineProperty(i,P("1.2.2.1"),!0),_defineProperty(i,P("1.2.2.1.1"),!0),_defineProperty(i,P("1.2.2.1.2"),!0),i),value:(l={},_defineProperty(l,P("1.2.2.1.1"),!0),_defineProperty(l,P("1.2.2.1.2"),!0),_defineProperty(l,P("1.2.2.1"),!0),l)})}),it("value2SelectInfo leafNode & dirNdoe  三级结点",function(){var e,t,i,l,d=(_defineProperty(e={},P("1.2.2"),!0),_defineProperty(e,P("1.2.2.1"),!0),_defineProperty(e,P("1.2.2.1.1"),!0),_defineProperty(e,P("1.2.2.1.2"),!0),_defineProperty(e,P("1.2.2.2"),!0),e),n={};c.initAllNodeIndexAndTopRoot(k,n);var a=c.value2SelectInfo(Object.keys(d),[],d,n);exp(a).to.be.eql({halfchecked:(t={},_defineProperty(t,P("1"),5),_defineProperty(t,P("1.2.2.1.1"),1),_defineProperty(t,P("1.2"),5),_defineProperty(t,P("1.2.2"),5),_defineProperty(t,P("1.2.2.1"),3),_defineProperty(t,P("1.2.2.1.2"),1),_defineProperty(t,P("1.2.2.2"),1),t),checked:(i={},_defineProperty(i,P("1.2.2"),!0),_defineProperty(i,P("1.2.2.1"),!0),_defineProperty(i,P("1.2.2.1.1"),!0),_defineProperty(i,P("1.2.2.1.2"),!0),_defineProperty(i,P("1.2.2.2"),!0),i),value:(l={},_defineProperty(l,P("1.2.2"),!0),_defineProperty(l,P("1.2.2.1"),!0),_defineProperty(l,P("1.2.2.1.1"),!0),_defineProperty(l,P("1.2.2.1.2"),!0),_defineProperty(l,P("1.2.2.2"),!0),l)})}),it("value2SelectInfo 配合查询  query: 1.3.1 选择 1  query: 1.3.1.a",function(){var e,t,i,l,d={id2ExtendInfo:{}},n={halfchecked:{},checked:{},value:{}};c.search(d,"1.3.1"),c.selectNode("1",n,d.id2ExtendInfo),c.search(d,"1.3.1.a");var a=c.value2SelectInfo(Object.keys(n.value),[],n.value,d.id2ExtendInfo);exp(a).to.be.eql({halfchecked:{},checked:{},value:(e={},_defineProperty(e,P("1"),!0),_defineProperty(e,P("1.3"),!0),_defineProperty(e,P("1.3.1"),!0),_defineProperty(e,P("1.3.1.1"),!0),_defineProperty(e,P("1.3.1.2"),!0),e)}),c.search(d,""),a=c.value2SelectInfo(Object.keys(n.value),[],n.value,d.id2ExtendInfo),exp(a).to.be.eql({halfchecked:(t={},_defineProperty(t,P("1"),5),_defineProperty(t,P("1.3"),4),_defineProperty(t,P("1.3.1"),3),_defineProperty(t,P("1.3.1.1"),1),_defineProperty(t,P("1.3.1.2"),1),t),checked:(i={},_defineProperty(i,P("1.3.1"),!0),_defineProperty(i,P("1.3.1.1"),!0),_defineProperty(i,P("1.3.1.2"),!0),i),value:(l={},_defineProperty(l,P("1"),!0),_defineProperty(l,P("1.3"),!0),_defineProperty(l,P("1.3.1"),!0),_defineProperty(l,P("1.3.1.1"),!0),_defineProperty(l,P("1.3.1.2"),!0),l)})}),it("value2SelectInfo 跨级松散",function(){var e,t,i,l=(_defineProperty(e={},P("1"),!0),_defineProperty(e,P("1.3"),!0),_defineProperty(e,P("1.3.1"),!0),_defineProperty(e,P("1.3.1.1"),!0),_defineProperty(e,P("1.3.1.2"),!0),e),d=c.value2SelectInfo(Object.keys(l),[],l,{});exp(d).to.be.eql({halfchecked:(t={},_defineProperty(t,P("1"),5),_defineProperty(t,P("1.3"),4),_defineProperty(t,P("1.3.1"),3),_defineProperty(t,P("1.3.1.1"),1),_defineProperty(t,P("1.3.1.2"),1),t),checked:(i={},_defineProperty(i,P("1.3.1"),!0),_defineProperty(i,P("1.3.1.1"),!0),_defineProperty(i,P("1.3.1.2"),!0),i),value:l})}),it("value2SelectInfo 空对象",function(){var e=c.value2SelectInfo([],[],{},{});exp(e).to.be.eql({halfchecked:{},checked:{},value:{}})}),it("value2SelectInfo only leafNode",function(){var e,t,i,l,d=(_defineProperty(e={},P("1.2.2.1.1"),!0),_defineProperty(e,P("1.2.2.1.2"),!0),e),n={};c.initAllNodeIndexAndTopRoot(k,n);var a=c.value2SelectInfo(Object.keys(d),[],d,n);exp(a).to.be.eql({halfchecked:(t={},_defineProperty(t,P("1"),2),_defineProperty(t,P("1.2"),2),_defineProperty(t,P("1.2.2"),2),_defineProperty(t,P("1.2.2.1"),2),_defineProperty(t,P("1.2.2.1.1"),1),_defineProperty(t,P("1.2.2.1.2"),1),t),checked:(i={},_defineProperty(i,P("1.2.2.1.1"),!0),_defineProperty(i,P("1.2.2.1.2"),!0),i),value:(l={},_defineProperty(l,P("1.2.2.1.1"),!0),_defineProperty(l,P("1.2.2.1.2"),!0),l)})}),it("value2SelectInfo  三级父目录 只有一个子节点",function(){var e,t,i,l,d=(_defineProperty(e={},P("4"),!0),_defineProperty(e,P("5"),!0),_defineProperty(e,P("6"),!0),_defineProperty(e,P("7"),!0),e),n=(c=new _utils2.default([{key:"0",title:"0"},{key:"1",title:"0.0",pid:"0",path:"0"},{key:"2",title:"0.0.0",pid:"1",path:"0/1"},{key:"3",title:"0.0.0.0",pid:"2",isLeaf:!0,path:"0/1/2"},{key:"4",title:"1"},{key:"5",title:"1.0",pid:"4",path:"4"},{key:"6",title:"1.0.0",pid:"5",path:"4/5"},{key:"7",title:"1.0.0.0",pid:"6",isLeaf:!0,path:"4/5/6"}],{expandAll:!0})).value2SelectInfo(Object.keys(d),[],d,{});exp(n).to.be.eql({halfchecked:(t={},_defineProperty(t,P("4"),4),_defineProperty(t,P("5"),3),_defineProperty(t,P("6"),2),_defineProperty(t,P("7"),1),t),checked:(i={},_defineProperty(i,P("4"),!0),_defineProperty(i,P("5"),!0),_defineProperty(i,P("6"),!0),_defineProperty(i,P("7"),!0),i),value:(l={},_defineProperty(l,P("4"),!0),_defineProperty(l,P("5"),!0),_defineProperty(l,P("6"),!0),_defineProperty(l,P("7"),!0),l)})}),it("value2SelectInfo  选择根目录下的叶子结点",function(){var e=_defineProperty({},P("4"),!0),t=(c=new _utils2.default(k,{expandAll:!0})).value2SelectInfo(Object.keys(e),[],e,{});exp(t).to.be.eql({halfchecked:{},checked:_defineProperty({},P("4"),!0),value:_defineProperty({},P("4"),!0)})}),it("value2SelectInfo  存在不包含在树形数据的值 显示值在displayValue里有的",function(){var e,t,i=(_defineProperty(e={},P("4"),!0),_defineProperty(e,P("100"),!0),e),l={},d=(c=new _utils2.default(k,{expandAll:!0})).value2SelectInfo(Object.keys(i),["4","我"],i,l);exp(d).to.be.eql({halfchecked:{},checked:_defineProperty({},P("4"),!0),value:(t={},_defineProperty(t,P("4"),!0),_defineProperty(t,P("100"),!0),t)}),exp(c.getTitle(Object.keys(i),l)).to.be.eql(["4","我"])}),it("value2SelectInfo  存在不包含在树形数据的值 显示值在displayValue没有的 displayValue就是value 缺失一个displayValue",function(){var e,t,i=(_defineProperty(e={},P("4"),!0),_defineProperty(e,P("100"),!0),e),l={},d=(c=new _utils2.default(k,{expandAll:!0})).value2SelectInfo(Object.keys(i),["4"],i,l);exp(d).to.be.eql({halfchecked:{},checked:_defineProperty({},P("4"),!0),value:(t={},_defineProperty(t,P("4"),!0),_defineProperty(t,P("100"),!0),t)}),exp(c.getTitle(["4","100"],l)).to.be.eql(["4","100"])}),it("value2SelectInfo  存在不包含在树形数据的值 显示值在displayValue没有的 displayValue就是value 缺失多个displayValue",function(){var e,t,i=(_defineProperty(e={},P("4"),!0),_defineProperty(e,P("100"),!0),_defineProperty(e,P("101"),!0),_defineProperty(e,P("102"),!0),e),l={},d=(c=new _utils2.default(k,{expandAll:!0})).value2SelectInfo(Object.keys(i),["4"],i,l);exp(d).to.be.eql({halfchecked:{},checked:_defineProperty({},P("4"),!0),value:(t={},_defineProperty(t,P("4"),!0),_defineProperty(t,P("100"),!0),_defineProperty(t,P("101"),!0),_defineProperty(t,P("102"),!0),t)}),exp(c.getTitle(Object.keys(i),l)).to.be.eql(["4","100","101","102"])}),it("value2SelectInfo  存在不包含在树形数据的值 显示值在displayValue没有的 displayValue就是value 缺失多个displayValue",function(){var e,t,i=(_defineProperty(e={},P("4"),!0),_defineProperty(e,P("100"),!0),_defineProperty(e,P("101"),!0),_defineProperty(e,P("102"),!0),e),l={},d=(c=new _utils2.default([{key:"1",title:"1"},{key:"1.1",title:"1.1",pid:"1",path:"1",isLeaf:!0},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.2.1",title:"1.2.1",pid:"1.2",path:"1/1.2",isLeaf:!0},{key:"1.2.2",title:"1.2.2",pid:"1.2",path:"1/1.2"},{key:"1.2.2.1",title:"1.2.2.1",pid:"1.2.2",path:"1/1.2/1.2.2"},{key:"1.2.2.1.1",title:"1.2.2.1.1",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.1.2",title:"1.2.2.1.2",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.2",title:"1.2.2.2",pid:"1.2.2",path:"1/1.2/1.2.2",isLeaf:!0},{key:"1.3",title:"1.3",pid:"1",path:"1"},{key:"1.3.1",title:"1.3.1",pid:"1.3",path:"1/1.3"},{key:"1.3.1.1",title:"1.3.1.1",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.1.2",title:"1.3.1.2",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.2",title:"1.3.2",pid:"1.3",path:"1/1.3"},{key:"1.3.2.1",title:"1.3.2.1",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.2.2",title:"1.3.2.2",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.3",title:"1.3.3",pid:"1.3",path:"1/1.3",isLeaf:!0},{key:"2",title:"2"},{key:"2.1",title:"2.1",pid:"2",path:"2"},{key:"2.1.1",title:"2.1.1",pid:"2.1",path:"2/2.1",isLeaf:!0},{key:"2.1.2",title:"2.1.2",pid:"2.1",path:"2/2.1"},{key:"2.1.2.1",title:"2.1.2.1",pid:"2.1.2",path:"2/2.1/2.1.2",isLeaf:!0},{key:"2.2",title:"2.2",pid:"2",path:"2"},{key:"2.2.1",title:"2.2.1",pid:"2.2",path:"2/2.2"},{key:"2.2.1.1",title:"2.2.1.1",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{key:"2.2.1.2",title:"2.2.1.2",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{key:"2.2.2",title:"2.2.2",pid:"2.2",path:"2/2.2",isLeaf:!0},{key:"3",title:"3"},{key:"3.1",title:"3.1",pid:"3",path:"3",isLeaf:!0},{key:"3.2",title:"3.2",pid:"3",path:"3",isLeaf:!0},{key:"4",title:"你好",isLeaf:!0}],{expandAll:!0})).value2SelectInfo(Object.keys(i),["4"],i,l);exp(d).to.be.eql({halfchecked:{},checked:_defineProperty({},P("4"),!0),value:(t={},_defineProperty(t,P("4"),!0),_defineProperty(t,P("100"),!0),_defineProperty(t,P("101"),!0),_defineProperty(t,P("102"),!0),t)}),exp(c.getTitle(Object.keys(i),l)).to.be.eql(["你好","100","101","102"])}),it("value2SelectInfo  displayField : 为text",function(){var e,t,i=(_defineProperty(e={},P("4"),!0),_defineProperty(e,P("100"),!0),_defineProperty(e,P("101"),!0),_defineProperty(e,P("102"),!0),e),l={},d=(c=new _utils2.default([{key:"1",text:"1"},{key:"1.1",text:"1.1",pid:"1",path:"1",isLeaf:!0},{key:"1.2",text:"1.2",pid:"1",path:"1"},{key:"1.2.1",text:"1.2.1",pid:"1.2",path:"1/1.2",isLeaf:!0},{key:"1.2.2",text:"1.2.2",pid:"1.2",path:"1/1.2"},{key:"1.2.2.1",text:"1.2.2.1",pid:"1.2.2",path:"1/1.2/1.2.2"},{key:"1.2.2.1.1",text:"1.2.2.1.1",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.1.2",text:"1.2.2.1.2",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.2",text:"1.2.2.2",pid:"1.2.2",path:"1/1.2/1.2.2",isLeaf:!0},{key:"1.3",text:"1.3",pid:"1",path:"1"},{key:"1.3.1",text:"1.3.1",pid:"1.3",path:"1/1.3"},{key:"1.3.1.1",text:"1.3.1.1",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.1.2",text:"1.3.1.2",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.2",text:"1.3.2",pid:"1.3",path:"1/1.3"},{key:"1.3.2.1",text:"1.3.2.1",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.2.2",text:"1.3.2.2",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.3",text:"1.3.3",pid:"1.3",path:"1/1.3",isLeaf:!0},{key:"2",text:"2"},{key:"2.1",text:"2.1",pid:"2",path:"2"},{key:"2.1.1",text:"2.1.1",pid:"2.1",path:"2/2.1",isLeaf:!0},{key:"2.1.2",text:"2.1.2",pid:"2.1",path:"2/2.1"},{key:"2.1.2.1",text:"2.1.2.1",pid:"2.1.2",path:"2/2.1/2.1.2",isLeaf:!0},{key:"2.2",text:"2.2",pid:"2",path:"2"},{key:"2.2.1",text:"2.2.1",pid:"2.2",path:"2/2.2"},{key:"2.2.1.1",text:"2.2.1.1",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{key:"2.2.1.2",text:"2.2.1.2",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{key:"2.2.2",text:"2.2.2",pid:"2.2",path:"2/2.2",isLeaf:!0},{key:"3",text:"3"},{key:"3.1",text:"3.1",pid:"3",path:"3",isLeaf:!0},{key:"3.2",text:"3.2",pid:"3",path:"3",isLeaf:!0},{key:"4",text:"你好",isLeaf:!0}],{expandAll:!0,displayField:"text"})).value2SelectInfo(Object.keys(i),["4"],i,l);exp(d).to.be.eql({halfchecked:{},checked:_defineProperty({},P("4"),!0),value:(t={},_defineProperty(t,P("4"),!0),_defineProperty(t,P("100"),!0),_defineProperty(t,P("101"),!0),_defineProperty(t,P("102"),!0),t)}),exp(c.getTitle(Object.keys(i),l)).to.be.eql(["你好","100","101","102"])}),it("value2SelectInfo  selectAll",function(){c=new _utils2.default(k,{expandAll:!0,displayField:"title"});var t={};k.forEach(function(e){t[e.key]=!0});var e=k.map(function(e){return e.key}),i=k.map(function(e){return e.title}),l=c.value2SelectInfo(e,i,t,{});exp(l.checked).to.be.eql(t),l=c.value2SelectInfo(Object.keys(t),i,t,{}),exp(l.checked).to.be.eql(t),l=c.value2SelectInfo(["3.2","1","1.1","1.2","1.2.1","1.2.2","1.2.2.1","1.2.2.1.1","1.2.2.1.2","1.2.2.2","1.3","1.3.1","1.3.1.1","1.3.1.2","1.3.2","1.3.2.1","1.3.2.2","1.3.3","2","2.1","2.1.1","2.1.2","2.1.2.1","2.2","2.2.1","2.2.1.1","2.2.1.2","2.2.2","3","3.1","3.2","4"],i,t,{}),exp(l.checked).to.be.eql(t)}),it("can onlySelectLeaf",function(){var e=new _utils2.default(k,{onlySelectLeaf:!0});exp(e.can(k[0])).to.be.equal(!1),exp(e.can(k[1])).to.be.equal(!0)}),it("can onlySelectLeaf",function(){for(var e=[{key:"1",title:!1},{key:"2",title:"1"},{key:"3",title:void 0},{key:"4",title:null},{key:"5",title:{}},{key:"6",title:[]},{key:"7",title:new Date},{key:"8",title:0},{key:"9",title:1},{key:"10",title:"true"},{key:"11",title:"false"},{key:"12",title:!0}],t=new _utils2.default(e,{igronSelectField:"title"}),i=0;i<e.length-1;i++){var l=e[i];exp(t.can(l),JSON.stringify(l)).to.be.true}exp(t.can(e[e.length-1])).to.be.false}),it("initAllNodeIndexAndTopRoot can & canTotal",function(){var e=VerifyOrder.create(),t=mockObject.create(c,VerifyOrderConfig.create("utils",e)).mockFunction("can");t.forever(!1);var i={};c.initAllNodeIndexAndTopRoot(k,i),k.forEach(function(e){var t=e.key;exp(i[t].can).to.be.false}),exp(t.callTimes()).to.be.equal(k.length),e.verify(function(e){var t=e.utils;k.forEach(function(e){t.can(e)})}),exp(i[c.VirtualRoot].canTotal).to.be.equal(0),exp(c.getCanTotal(i)).to.be.equal(0)})});