"use strict";var _drag=require("../rc-tree/drag"),_listener=require("@lugia/listener"),_listener2=_interopRequireDefault(_listener);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}describe("init TreeDragController",function(){var e=new _drag.TreeDragController,t=e.createTreeDrag(),r=e.getTreeDrag(t.uuid);it("TreeDrag类创建是否成功",function(){expect(r.uuid===t.uuid).toBe(!0)}),it("treeDrag实例是否保存到treeDragController中",function(){expect(Object.keys(e.treeDrags).length).toBe(1)}),it("getTreeDrag方法调用是否成功",function(){expect(e.getTreeDrag(r.uuid)).not.toBe(void 0)}),it("destroyTreeDrag方法调用是否成功",function(){e.destroyTreeDrag(r.uuid),expect(e.getTreeDrag(r.uuid)).toBe(void 0)}),it("createUUid方法调用是否成",function(){expect(Object.prototype.toString.call(e.createUUid())).toBe("[object String]")})}),describe("drag分组测试",function(){var e=new _drag.TreeDragController,t=e.createTreeDrag({groupKey:"group1"}),r=e.createTreeDrag({groupKey:"group1"});it("getGroupAllData获取分组数据",function(){expect(e.getGroupAllData().group1).not.toBeUndefined()}),it("根据分组key建获取分组信息getGroupDataByGroupKey",function(){expect(e.getGroupDataByGroupKey("group1")).not.toBeUndefined()}),it("调用destroyTreeDrag销毁不存在的拖拽类。对应该关系不变",function(){e.destroyTreeDrag("222222"),expect(e.getGroupDataByGroupKey("group1").length).toBe(2)}),it("调用destroyTreeDrag销毁拖拽类。同时移除对应的分组关系",function(){e.destroyTreeDrag(t.uuid),expect(e.getGroupDataByGroupKey("group1").length).toBe(1)}),it("拖拽实例全部销，对应分组也应该销毁",function(){e.destroyTreeDrag(r.uuid),expect(e.getGroupDataByGroupKey("group1")).toBeUndefined()})}),describe("init TreeDrag",function(){var e=(new _drag.TreeDragController).createTreeDrag();it("lister是否创建成功",function(){expect(e.listener).toBeInstanceOf(_listener2.default)}),it("collectNodeInformation调用是否成功",function(){e.collectNodeInformation({nodeName:"222",nodeRef:{getBoundingClientRect:function(){return{left:10,right:100,top:20,bottom:50,height:30}}},node:{}}),expect(e.nodesInformation[222]).not.toBeUndefined()}),it("调用collectNodeInformation方法参数有问题，数据不应该保存",function(){e.collectNodeInformation({nodeName:"333"}),expect(e.nodesInformation[333]).toBeUndefined()}),it("鼠标有键按下查看状态是否改变",function(){e.mouseDown({button:0,clientX:40,clientY:30}),expect(e.dragStart).toBe(!0)}),it("鼠标有键按下，查看是否有选中节点",function(){e.mouseDown({button:0,clientX:40,clientY:30}),expect(e.dargNode.nodeEmitName).toBe("222")}),it("deletetNodeInformation调用是否成功",function(){e.deletetNodeInformation("222"),expect(e.nodesInformation[222]).toBeUndefined()})});