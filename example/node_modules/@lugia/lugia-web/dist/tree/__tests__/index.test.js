"use strict";var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_createClass=function(){function l(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_chai=require("chai"),_chai2=_interopRequireDefault(_chai);require("jest-styled-components");var _enzyme=require("enzyme"),_enzyme2=_interopRequireDefault(_enzyme),_enzymeAdapterReact=require("enzyme-adapter-react-16"),_enzymeAdapterReact2=_interopRequireDefault(_enzymeAdapterReact),_tree=require("../tree.js"),_tree2=_interopRequireDefault(_tree),_reactTestUtils=require("@lugia/react-test-utils"),_reactTestRenderer=require("react-test-renderer"),_reactTestRenderer2=_interopRequireDefault(_reactTestRenderer),_index=require("../../consts/index"),_index2=_interopRequireDefault(_index);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _asyncToGenerator(e){return function(){var u=e.apply(this,arguments);return new Promise(function(i,r){return function t(e,a){try{var l=u[e](a),n=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});i(n)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}_enzyme2.default.configure({adapter:new _enzymeAdapterReact2.default});var exp=_chai2.default.expect,_require=require("@lugia/jverify"),mockFunction=_require.mockFunction,mockObject=_require.mockObject,VerifyOrder=_require.VerifyOrder,VerifyOrderConfig=_require.VerifyOrderConfig,rowData=[{key:"1",title:"1"},{key:"1.1",title:"1.1",pid:"1",path:"1",isLeaf:!0},{key:"1.2",title:"1.2",pid:"1",path:"1"},{key:"1.2.1",title:"1.2.1",pid:"1.2",path:"1/1.2",isLeaf:!0},{key:"1.2.2",title:"1.2.2",pid:"1.2",path:"1/1.2"},{key:"1.2.2.1",title:"1.2.2.1",pid:"1.2.2",path:"1/1.2/1.2.2"},{key:"1.2.2.1.1",title:"1.2.2.1.1",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.1.2",title:"1.2.2.1.2",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{key:"1.2.2.2",title:"1.2.2.2",pid:"1.2.2",path:"1/1.2/1.2.2",isLeaf:!0},{key:"1.3",title:"1.3",pid:"1",path:"1"},{key:"1.3.1",title:"1.3.1",pid:"1.3",path:"1/1.3"},{key:"1.3.1.1",title:"1.3.1.1",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.1.2",title:"1.3.1.2",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{key:"1.3.2",title:"1.3.2",pid:"1.3",path:"1/1.3"},{key:"1.3.2.1",title:"1.3.2.1",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.2.2",title:"1.3.2.2",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{key:"1.3.3",title:"1.3.3",pid:"1.3",path:"1/1.3",isLeaf:!0},{key:"2",title:"2"},{key:"2.1",title:"2.1",pid:"2",path:"2"},{key:"2.1.1",title:"2.1.1",pid:"2.1",path:"2/2.1",isLeaf:!0},{key:"2.1.2",title:"2.1.2",pid:"2.1",path:"2/2.1"},{key:"2.1.2.1",title:"2.1.2.1",pid:"2.1.2",path:"2/2.1/2.1.2",isLeaf:!0},{key:"2.2",title:"2.2",pid:"2",path:"2"},{key:"2.2.1",title:"2.2.1",pid:"2.2",path:"2/2.2"},{key:"2.2.1.1",title:"2.2.1.1",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{key:"2.2.1.2",title:"2.2.1.2",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{key:"2.2.2",title:"2.2.2",pid:"2.2",path:"2/2.2",isLeaf:!0},{key:"3",title:"3"},{key:"3.1",title:"3.1",pid:"3",path:"3",isLeaf:!0},{key:"3.2",title:"3.2",pid:"3",path:"3",isLeaf:!0},{key:"4",title:"4",isLeaf:!0}];describe("Tree",function(){beforeEach(function(){VerifyOrder.create()});var a=(_inherits(e,_react2.default.Component),_createClass(e,[{key:"render",value:function(){return _react2.default.createElement(_tree2.default,Object.assign({key:"tree",expandAll:!0},this.props))}}]),e);function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}function s(e){return e.find("liItem").map(function(e){return e.props().selected}).filter(function(e){return!0===e})}function c(e){return e.find(_index2.default.Checkbox).map(function(e){return e.props().checked}).filter(function(e){return!0===e})}function f(e){return e.find(_index2.default.Checkbox).map(function(e){return e.props().indeterminate}).filter(function(e){return!0===e})}function t(e){var t=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{expandAll:!0,data:rowData}));exp(s(t).length).to.be.equal(0),t.setProps({value:"1"}),t.update(),exp(s(t).length).to.be.equal(1),t.setProps({value:e}),t.update(),exp(s(t).length).to.be.equal(0)}function l(e){var t=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{mutliple:!0,expandAll:!0,data:rowData}));exp(c(t).length).to.be.equal(0),t.setProps({value:"1.1"}),t.update(),exp(c(t).length).to.be.equal(1),exp(f(t).length).to.be.equal(2),t.setProps({value:e}),t.update(),exp(c(t).length).to.be.equal(0),exp(f(t).length).to.be.equal(0)}function n(e){var a=e.igron,l=e.mutliple,n=e.half,i=e.all,r=e.sel,t=e.isLeaf,u=void 0!==t&&t,o=e.target,p=void 0===o?1:o;it("mutliple: "+l+" ,  igronSelectField: igron is "+a+" isLeaf: "+u+" target: "+p,function(){var e=[{key:"1",title:"hello1",igron:a[0]},{key:"1.1",title:"hello2",pid:"1",path:"1",isLeaf:u,igron:a[1]}],t=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{mutliple:l,expandAll:!0,data:e,igronSelectField:"igron"}));t.find(l?_index2.default.Checkbox:"titleSpan").at(p).simulate("click",{}),exp(c(t).length,"全选").to.be.equal(i),exp(f(t).length,"半选").to.be.equal(n),exp(s(t).length,"单选数").to.be.equal(r)})}function i(e,t){var a=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{data:rowData,expandAll:e,mutliple:t}));a.setProps({query:"1.3.2.1"}),a.update();function l(){return a.find("liItem").map(function(e){return e.props().title}).join(",")}exp(l()).to.be.equal("1,1.3,1.3.2,1.3.2.1"),exp(a.find("liItem").length).to.be.equal(4),a.setProps({query:"1.3.2.1.1"}),a.update(),exp(a.find("liItem").length).to.be.equal(0),a.setProps({query:"1.3"}),a.update(),exp(l()).to.be.equal("1,1.3,1.3.1,1.3.1.1,1.3.1.2,1.3.2,1.3.2.1,1.3.2.2"),exp(a.find("liItem").length).to.be.equal(8)}function r(e,t,a){var l=a?"open":"close";exp(e.find("switcherButton").at(t).props().expandedState===l,"1 目前为展开").to.be.true}it("props: query: 2.1.2.1 expandAll: true mutliple: false",function(){var e=_react2.default.createElement(_tree2.default,{expandAll:!0,showLine:!0,query:"2.1.2.1",data:rowData}),t=(0,_enzyme.mount)(e);expect(_reactTestRenderer2.default.create(e).toJSON()).toMatchSnapshot();var a=t.find("titleSpan");exp(a.length).to.be.equal(4),exp(a.at(0).text()).to.be.equal("2"),exp(a.at(1).text()).to.be.equal("2.1"),exp(a.at(2).text()).to.be.equal("2.1.2"),exp(a.slice(3,4).text()).to.be.equal("2.1.2.1")}),it("props: query: 2.1.2.1 expandAll: false mutliple: true",function(){(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{expandAll:!0,mutliple:!0,showLine:!0,data:rowData}))}),it("props: defaultValue: 1 mutliple: true onChange监听",_asyncToGenerator(_regenerator2.default.mark(function e(){var a,l,n,i,r,u,o;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _inherits(t,_react2.default.Component),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement(_tree2.default,Object.assign({expandAll:!0},this.props))}}]),a=t,l=void 0,n=new Promise(function(t){var a=[];l=function(e){a.push(e),2===a.length&&t(a)}}),i=_react2.default.createElement(a,{defaultValue:"1",data:rowData,mutliple:!0,onChange:l}),r=(0,_enzyme.mount)(i),expect(_reactTestRenderer2.default.create(i).toJSON()).toMatchSnapshot(),(u=r.find(_index2.default.Checkbox)).at(1).simulate("click",{}),u.at(1).simulate("click",{}),u.at(3).simulate("click",{}),e.next=12,n;case 12:o=e.sent,exp(o).to.be.eql([["1","1.1"],["1"],["1","1.2.1"]]);case 14:case"end":return e.stop()}function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}},e,void 0)}))),it("props: value: 1 mutliple: true onChange监听 limit",_asyncToGenerator(_regenerator2.default.mark(function e(){var a,l,n,i,r,u,o;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _inherits(t,_react2.default.Component),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement(_tree2.default,Object.assign({value:"1",expandAll:!0},this.props))}}]),a=t,l=void 0,n=new Promise(function(t){var a=[];l=function(e){a.push(e),2===a.length&&t(a)}}),i=_react2.default.createElement(a,{defaultValue:"2",data:rowData,mutliple:!0,onChange:l}),r=(0,_enzyme.mount)(i),expect(_reactTestRenderer2.default.create(i).toJSON()).toMatchSnapshot(),(u=r.find(_index2.default.Checkbox)).at(1).simulate("click",{}),u.at(1).simulate("click",{}),u.at(3).simulate("click",{}),e.next=12,n;case 12:o=e.sent,exp(o).to.be.eql([["1","1.1"],["1"],["1","1.2.1"]]);case 14:case"end":return e.stop()}function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}},e,void 0)}))),it("props: defaultValue: 1,1.1,1.2  mutliple: false",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(a,{data:rowData,defaultValue:"1,1.1,1.2"}));expect(s(e).length).toBe(0),e=(0,_enzyme.mount)(_react2.default.createElement(a,{data:rowData,defaultValue:["1"]})),expect(e.find("liItem").at(0).props().selected).toBe(!0),expect(s(e).length).toBe(1)}),it("props: value 1  mutliple: false",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(a,{data:rowData,value:"1"})),t=e.find("liItem");expect(s(e).length).toBe(1),expect(t.at(0).props().selected).toBe(!0),expect(t.at(1).props().selected).toBe(!1),expect(t.at(2).props().selected).toBe(!1)}),it("props: defaultValue: 1,1.1,1.2 & value 1  mutliple: false",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(a,{data:rowData,defaultValue:"1",value:"1.2"})),t=e.find("liItem");expect(s(e).length).toBe(1),expect(t.at(2).props().selected).toBe(!0)}),it("props: defaultValue: 1 mutliple: false onChange监听",_asyncToGenerator(_regenerator2.default.mark(function e(){var a,l,n,i,r,u;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _inherits(t,_react2.default.Component),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement(_tree2.default,Object.assign({expandAll:!0},this.props))}}]),a=t,l=void 0,n=new Promise(function(t){var a=[];l=function(e){a.push(e),2===a.length&&t(a)}}),i=(0,_enzyme.mount)(_react2.default.createElement(a,{defaultValue:"1",data:rowData,mutliple:!1,onChange:l})),(r=function(){return i.find("titleSpan")})().at(1).simulate("click",{}),i.update(),expect(i.find("liItem").at(1).props().selected).toBe(!0),r().at(1).simulate("click",{}),r().at(3).simulate("click",{}),i.update(),e.next=13,n;case 13:u=e.sent,expect(s(i).length).toBe(1),exp(u).to.be.eql([["1.1"],[""],["1.2.1"]]);case 16:case"end":return e.stop()}function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}},e,void 0)}))),it("props: value: 1 mutliple: false onChange监听 limit",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,n,a,i,r,u,o,p,s;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){expect(u().at(0).props().selected).toBe(!0),expect(u().at(1).props().selected).toBe(!1),expect(u().at(3).props().selected).toBe(!1)},_inherits(l,_react2.default.Component),_createClass(l,[{key:"render",value:function(){var e=this.state.value;return[_react2.default.createElement(_tree2.default,Object.assign({value:e,expandAll:!0},this.props)),_react2.default.createElement("button",{onClick:this.onClick})]}}]),t=l,n=void 0,a=new Promise(function(t){var a=[];n=function(e){a.push(e),2===a.length&&t(a)}}),i=_react2.default.createElement(t,{value:"1",data:rowData,onChange:n}),r=(0,_enzyme.mount)(i),expect(_reactTestRenderer2.default.create(i).toJSON()).toMatchSnapshot(),u=function(){return r.find("liItem")},(p=function(){return r.find("titleSpan")})().at(1).simulate("click",{}),o(),p().at(1).simulate("click",{}),o(),p().at(3).simulate("click",{}),o(),e.next=17,a;case 17:s=e.sent,exp(s).to.be.eql([["1.1"],["1.1"],["1.2.1"]]);case 19:case"end":return e.stop()}function l(e){_classCallCheck(this,l);var t=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));t.onClick=function(){t.setState({value:"1.1"})};var a=e.value;return t.state={value:a},t}},e,void 0)}))),it("props: value: 1 mutliple: false 重新设置value属性",function(){var e=(_inherits(l,_react2.default.Component),_createClass(l,[{key:"render",value:function(){var e=this.state.value;return[_react2.default.createElement(_tree2.default,{data:rowData,expandAll:!0,value:e}),_react2.default.createElement("button",{onClick:this.onClick})]}}]),l);function l(e){_classCallCheck(this,l);var t=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));t.onClick=function(){t.setState({value:"1.1"})};var a=e.value;return t.state={value:a},t}var t=(0,_enzyme.mount)(_react2.default.createElement(e,{value:"1"}));exp(t.find("liItem").at(0).props().selected).to.be.true,exp(s(t).length).to.be.equal(1),t.find("button").simulate("click"),exp(s(t).length).to.be.equal(1),exp(t.find("liItem").at(0).props().selected).to.be.false,exp(t.find("liItem").at(1).props().selected).to.be.true}),it("mutliple: false change props.value ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{expandAll:!0,data:rowData}));exp(s(e).length).to.be.equal(0),e.setProps({value:"1"}),e.update(),exp(s(e).length).to.be.equal(1),e.setProps({value:"1.1"}),e.update(),exp(s(e).length).to.be.equal(1)}),it('mutliple: false change props.value 1 => ""  ',function(){t("")}),it("mutliple: false change props.value 1 => undefined  ",function(){t(void 0)}),it('mutliple: true change props.value 1 => ""  ',function(){l("")}),it("mutliple: true change props.value 1 => undefined  ",function(){l(void 0)}),it("props: defaultValue: 1,1.1,1.2  mutliple: true",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(a,{data:rowData,defaultValue:"1,1.1,1.2".split(","),mutliple:!0})).find(_index2.default.Checkbox);exp(e.at(0).props().indeterminate).to.be.true,exp(e.at(1).props().checked).to.be.true,exp(e.at(2).props().indeterminate).to.be.true}),it("props: value 1  mutliple: true",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(a,{data:rowData,value:"1",mutliple:!0})).find(_index2.default.Checkbox);exp(e.at(0).props().indeterminate).to.be.true,exp(e.at(1).props().checked).to.be.false,exp(e.at(2).props().indeterminate).to.be.false}),it("props: defaultValue: 1,1.1,1.2 & value 1  mutliple: true",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(a,{data:rowData,defaultValue:"1,1.1,1.2",value:"1",mutliple:!0})).find(_index2.default.Checkbox);exp(e.at(0).props().indeterminate).to.be.true,exp(e.at(1).props().checked).to.be.false,exp(e.at(2).props().indeterminate).to.be.false}),it("props: defaultValue: 1  mutliple: false",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(a,{defaultValue:"1",data:rowData,mutliple:!1}));exp(s(e).length).to.be.equal(1),exp(e.find("liItem").first().props().selected).to.be.true}),it("props: defaultValue: 1,1.1,1.2  mutliple: false",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(a,{data:rowData,defaultValue:"1,1.1,1.2",mutliple:!1}));exp(s(e).length).to.be.equal(0),exp(e.find("liItem").first().props().selected).to.be.false}),it("mutliple: true ,  onlySelectLeaf: true",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise(function(t){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{mutliple:!0,expandAll:!0,data:rowData,onChange:function(e){t(e)},onlySelectLeaf:!0}));e.find(_index2.default.Checkbox).at(5).simulate("click",{}),exp(s(e).length).to.be.equal(0),exp(c(e).length).to.be.equal(3),exp(f(e).length).to.be.equal(3)}),e.t0=exp,e.next=4,t;case 4:e.t1=e.sent,e.t2=["1.2.2.1.1","1.2.2.1.2"],(0,e.t0)(e.t1).to.be.eql(e.t2);case 7:case"end":return e.stop()}},e,void 0)}))),it("mutliple: true ,  limitCount: 1",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise(function(a){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{mutliple:!0,expandAll:!0,data:rowData,onChange:function(e,t){a({value:e,displayValue:t})},limitCount:1}));e.find(_index2.default.Checkbox).at(5).simulate("click",{}),e.update()}),e.next=3,t;case 3:a=e.sent,exp(a).to.be.eql({value:["1.2.2.1"],displayValue:["1.2.2.1"]});case 5:case"end":return e.stop()}},e,void 0)}))),it("mutliple: false ,  onlySelectLeaf: true",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{mutliple:!1,expandAll:!0,data:rowData,onlySelectLeaf:!0}));e.find("titleSpan").at(5).simulate("click",{}),e.update(),exp(c(e).length).to.be.equal(0),exp(c(e).length,"全选结点必须为0").to.be.equal(0),exp(f(e).length,"半选书必须为0").to.be.equal(0),exp(s(e).length,"单选数应该为0").to.be.equal(0)}),n({igron:[void 0,void 0],mutliple:!1,half:0,all:0,sel:1}),n({igron:[null,null],mutliple:!1,half:0,all:0,sel:1}),n({igron:["",""],mutliple:!1,half:0,all:0,sel:1}),n({igron:[1,1],mutliple:!1,half:0,all:0,sel:1}),n({igron:[0,0],mutliple:!1,half:0,all:0,sel:1}),n({igron:[!0,!0],mutliple:!1,half:0,all:0,sel:0}),n({igron:[void 0,void 0],mutliple:!1,half:0,all:0,sel:1,target:0}),n({igron:[null,null],mutliple:!1,half:0,all:0,sel:1,target:0}),n({igron:["",""],mutliple:!1,half:0,all:0,sel:1,target:0}),n({igron:[1,1],mutliple:!1,half:0,all:0,sel:1,target:0}),n({igron:[0,0],mutliple:!1,half:0,all:0,sel:1,target:0}),n({igron:[!0,!0],mutliple:!1,half:0,all:0,sel:0,target:0}),n({igron:[void 0,void 0],mutliple:!0,half:2,all:1,sel:0,target:0}),n({igron:[!0,!0],mutliple:!0,half:0,all:0,sel:0,target:0}),n({igron:[!1,!0],mutliple:!0,half:1,all:0,sel:0,target:0}),n({igron:[void 0,void 0],mutliple:!0,half:2,all:1,sel:0,isLeaf:!0}),n({igron:[null,null],mutliple:!0,half:2,all:1,sel:0,isLeaf:!0}),n({igron:["",""],mutliple:!0,half:2,all:1,sel:0,isLeaf:!0}),n({igron:[1,1],mutliple:!0,half:0,all:0,sel:0,isLeaf:!0}),n({igron:[0,0],mutliple:!0,half:2,all:1,sel:0,isLeaf:!0}),n({igron:[!0,!0],mutliple:!0,half:0,all:0,sel:0,isLeaf:!0}),n({igron:[void 0,void 0],mutliple:!0,half:2,all:0,sel:0}),n({igron:[null,null],mutliple:!0,half:2,all:0,sel:0}),n({igron:["",""],mutliple:!0,half:2,all:0,sel:0}),n({igron:[1,1],mutliple:!0,half:0,all:0,sel:0}),n({igron:[0,0],mutliple:!0,half:2,all:0,sel:0}),n({igron:[!0,!0],mutliple:!0,half:0,all:0,sel:0}),n({igron:[void 0,void 0],mutliple:!0,half:2,all:1,sel:0,isLeaf:!0}),n({igron:[null,null],mutliple:!0,half:2,all:1,sel:0,isLeaf:!0}),n({igron:["",""],mutliple:!0,half:2,all:1,sel:0,isLeaf:!0}),n({igron:[1,1],mutliple:!0,half:0,all:0,sel:0,isLeaf:!0}),n({igron:[0,0],mutliple:!0,half:2,all:1,sel:0,isLeaf:!0}),n({igron:[!0,!0],mutliple:!0,half:0,all:0,sel:0,isLeaf:!0}),it("mutliple: true ,  value： 在不可见的位置",function(){var t={},e=(0,_reactTestUtils.createTestComponent)(_tree2.default,function(e){t=e}),a=(0,_enzyme.mount)(_react2.default.createElement(e,{value:"3.2",data:rowData,mutliple:!0,expandAll:!0}));exp(c(a).length,"全选结点必须为0").to.be.equal(0),exp(f(a).length,"半选书必须为0").to.be.equal(0),exp(s(a).length,"单选数应该为0").to.be.equal(0),t.getThemeTarget().setState({start:23},function(){}),a.update(),exp(c(a).length,"全选结点必须为0").to.be.equal(1),exp(f(a).length,"半选书必须为0").to.be.equal(2),exp(s(a).length,"单选数应该为0").to.be.equal(0);var l=a.find(_index2.default.Checkbox);console.log("chkBox.at(chkBox.length - 4).props()",l.at(l.length-4).props()),exp(l.at(l.length-4).props().indeterminate,"3被半选上").to.be.true,exp(l.at(l.length-2).props().checked,"3.2被全选上").to.be.true}),it("mutliple: false ,  value： 在不可见的位置",function(){var t={},e=(0,_reactTestUtils.createTestComponent)(_tree2.default,function(e){t=e}),a=(0,_enzyme.mount)(_react2.default.createElement(e,{value:"3.2",data:rowData,expandAll:!0}));exp(c(a).length,"全选结点必须为0").to.be.equal(0),exp(f(a).length,"半选书必须为0").to.be.equal(0),exp(s(a).length,"单选数应该为0").to.be.equal(0),t.getThemeTarget().setState({start:23},function(){}),a.update(),exp(c(a).length,"全选结点必须为0").to.be.equal(0),exp(f(a).length,"半选书必须为0").to.be.equal(0),exp(s(a).length,"单选数应该为0").to.be.equal(1);var l=a.find("titleSpan");exp(l.at(l.length-2).props().selected).to.be.true}),it("props:  expandAll:true | false,  mutliple: true , query:  1.3.2.1  & 1.3.2.1.1 & 1.3",function(){i(!0,!0),i(!1,!0)}),it("props:  expandAll:true | false,  mutliple: false , query:  1.3.2.1  & 1.3.2.1.1 & 1.3",function(){i(!0,!1),i(!1,!1)}),it("expandAll: false 折叠测试",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{data:rowData,expandAll:!0}));r(e,0,!0),exp(e.find("titleSpan").at(1).text(),"第二个结点为1.1").to.be.equal("1.1"),e.find("switcherButton").at(0).simulate("click"),e.update(),exp(e.find("titleSpan").at(1).text(),"第二个结点为2").to.be.equal("2"),r(e,0,!1),r(e,1,!0),e.find("switcherButton").at(1).simulate("click"),e.update(),r(e,1,!1),r(e,2,!0),e.find("switcherButton").at(2).simulate("click"),e.update(),r(e,2,!1),e.find("switcherButton").at(0).simulate("click"),e.update(),exp(e.find("titleSpan").at(1).text(),"第二个结点为2").to.be.equal("1.1"),r(e,0,!0)});var u="<span>查无结果</span>";it("data 为空的情况",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,null));exp(e.html().slice(0,5)+e.html().slice(30)).to.be.equal(u)});it("树报错的情况",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{data:[{key:"1",title:"A"},{key:"1.1",title:"A1.1",pid:"1",path:"1",isLeaf:!0},{key:"1.2",title:"一一一",pid:"1",path:"1",isLeaf:!0},{key:"1.1.1",title:"A1.1.1",pid:"1.1",path:"1/1.1",isLeaf:!0},{key:"1.1.1.1",title:"A1.1.1.1",pid:"1.1.1",path:"1/1.1/1.1.1",isLeaf:!0},{key:"2",title:"B"},{key:"2.1",title:"B2.1",pid:"2",path:"2",isLeaf:!0},{key:"2.1.1",title:"B2.1.1",pid:"2.1",path:"2/2.1",isLeaf:!0},{key:"2.1.1.1",title:"B2.1.1.1",pid:"2.1.1",path:"2/2.1/2.1.1",isLeaf:!0},{key:"2.1.1.1.1",title:"B2.1.1.1.1",pid:"2.1.1.1",path:"2/2.1/2.1.1/2.1.1.1",isLeaf:!0},{key:"3",title:"C"},{key:"3.1",title:"C3.1",pid:"3",path:"3",isLeaf:!0},{key:"3.1.1",title:"C3.1.1",pid:"3.1",path:"3/3.1",isLeaf:!0},{key:"4",title:"D"},{key:"4.1",title:"D4.1",pid:"4",path:"4",isLeaf:!0},{key:"4.1.1",title:"D4.1.1",pid:"4.1",path:"4/4.1",isLeaf:!0},{key:"5",title:"E"},{key:"5.1",title:"E5.1",pid:"5",path:"5",isLeaf:!0},{key:"5.1.1",title:"E5.1.1",pid:"5.1",path:"5/5.1",isLeaf:!0},{key:"6",title:"F"},{key:"6.1",title:"F6.1",pid:"6",path:"6",isLeaf:!0},{key:"6.1.1",title:"F6.1.1",pid:"6.1",path:"6/6.1",isLeaf:!0},{key:"7",title:"G"},{key:"7.1",title:"G7.1",pid:"7",path:"7",isLeaf:!0},{key:"7.1.1",title:"G7.1.1",pid:"7.1",path:"7/7.1",isLeaf:!0},{key:"7.1.1.1",title:"G7.1.1.1",pid:"7.1.1",path:"7/7.1/7.1.1",isLeaf:!0},{key:"8",title:"H"},{key:"8.1",title:"H1",pid:"8",path:"8",isLeaf:!0},{key:"9",title:"I"},{key:"9.1",title:"I1",pid:"9",path:"9",isLeaf:!0},{key:"10",title:"J"},{key:"10.1",title:"J1",pid:"10",path:"10",isLeaf:!0},{key:"11",title:"A+"},{key:"11.1",title:"A+1",pid:"11",path:"11",isLeaf:!0},{key:"12",title:"B+"},{key:"12.1",title:"B+1",pid:"12",path:"12",isLeaf:!0},{key:"13",title:"C+"},{key:"13.1",title:"C+1",pid:"13",path:"13",isLeaf:!0},{key:"14",title:"D+"},{key:"14.1",title:"D+1",pid:"14",path:"14",isLeaf:!0},{key:"15",title:"E+"},{key:"15.1",title:"E+1",pid:"15",path:"15",isLeaf:!0},{key:"16",title:"F+"},{key:"16.1",title:"F+1",pid:"16",path:"16",isLeaf:!0},{key:"17",title:"G+"},{key:"17.1",title:"G+1",pid:"17",path:"17",isLeaf:!0},{key:"18",title:"H+"},{key:"18.1",title:"H+1",pid:"18",path:"18",isLeaf:!0},{key:"19",title:"I+"},{key:"19.1",title:"I+1",pid:"19",path:"19",isLeaf:!0},{key:"20",title:"J+"},{key:"20.1",title:"J+1",pid:"20",path:"20",isLeaf:!0},{key:"21",title:"A++"},{key:"21.1",title:"A++1",pid:"21",path:"21",isLeaf:!0},{key:"22",title:"B++"},{key:"22.1",title:"B++1",pid:"22",path:"22",isLeaf:!0},{key:"23",title:"C++"},{key:"23.1",title:"C++1",pid:"23",path:"23",isLeaf:!0},{key:"24",title:"D++"},{key:"24.1",title:"D++1",pid:"24",path:"24",isLeaf:!0},{key:"25",title:"E++"},{key:"25.1",title:"E++1",pid:"25",path:"25",isLeaf:!0}],expandAll:!0,mutliple:!0}));e.setProps({start:1.5565931965863116}),exp(e.html().slice(0,5)+e.html().slice(30)).to.be.equal("<span>树形数据错误</span>")}),it("data 为[]的情况",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{data:[]}));exp(e.html().slice(0,5)+e.html().slice(30)).to.be.equal(u)}),it("重新设置熟悉为 null 的情况",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{data:rowData}));e.setProps({data:null}),e.update(),exp(e.html().slice(0,5)+e.html().slice(30)).to.be.equal(u)}),it("多选树，shift键只选当前节点，不选择子节点",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{data:rowData,expandAll:!0,mutliple:!0}));exp(c(e).length).to.be.equal(0),exp(f(e).length).to.be.equal(0),e.find(_index2.default.Checkbox).at(0).simulate("click",{shiftKey:!0}),e.update(),exp(c(e).length).to.be.equal(0),exp(f(e).length).to.be.equal(1),exp(e.find(_index2.default.Checkbox).at(0).props().indeterminate).to.be.true}),it("多选树，shift键反选节点，",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{data:rowData,expandAll:!0,mutliple:!0}));exp(c(e).length).to.be.equal(0),exp(f(e).length).to.be.equal(0),e.find(_index2.default.Checkbox).at(0).simulate("click"),e.update(),exp(c(e).length).to.be.equal(8),exp(f(e).length).to.be.equal(8),e.find(_index2.default.Checkbox).at(0).simulate("click",{shiftKey:!0}),e.update(),exp(c(e).length).to.be.equal(0),exp(f(e).length).to.be.equal(0)}),it("查询结果切换是value设置是否正确",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{data:rowData,expandAll:!0,mutliple:!0}));e.setProps({value:"3.1"}),e.update(),exp(c(e).length).to.be.equal(0),exp(f(e).length).to.be.equal(0),e.setProps({query:"3.1"}),e.update(),exp(c(e).length).to.be.equal(1),exp(e.find(_index2.default.Checkbox).at(5).props().indeterminate).to.be.true,exp(e.find(_index2.default.Checkbox).at(6).props().indeterminate).to.be.true,exp(f(e).length).to.be.equal(2),e.setProps({query:""}),e.update(),exp(c(e).length).to.be.equal(0),exp(f(e).length).to.be.equal(0)}),it("查询所有时先移动滚动条到底部，而后进行查询。最后恢复为查询全部",function(){var t={},e=(0,_reactTestUtils.createTestComponent)(_tree2.default,function(e){t=e}),a=(0,_enzyme.mount)(_react2.default.createElement(e,{value:"3.2",data:rowData,mutliple:!0,expandAll:!0}));t.getThemeTarget().setState({start:17},function(){}),a.update(),exp(t.getThemeTarget().state.start,"移动滚动条到底部失败").to.be.equal(17),a.setProps({query:"3.1"}),a.update(),exp(t.getThemeTarget().state.start,"查询后start统一移动到顶部").to.be.equal(17),a.setProps({query:""}),a.update(),exp(t.getThemeTarget().state.start,"恢复到原来的底部位置").to.be.equal(17)}),it("多次查询",function(){function e(){return l.find("liItem").map(function(e){return e.props().title}).join(",")}function t(e){return e.title}var a={config:_defineProperty({},_index2.default.Tree,{height:1100})},l=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{data:rowData,expandAll:!0,mutliple:!0}),{context:a});exp(e()).to.be.equal(rowData.map(t).join(",")),l.setProps({query:"3"});var n="1,1.3,1.3.1,1.3.1.1,1.3.1.2,1.3.2,1.3.2.1,1.3.2.2,1.3.3,3,3.1,3.2".split(",");exp(e()).to.be.equal(n.join(",")),l.setProps({value:n}),exp(c(l).length).to.be.equal(n.length);var i="1,1.2,1.2.1,1.2.2,1.2.2.1,1.2.2.1.1,1.2.2.1.2,1.2.2.2,1.3,1.3.1,1.3.1.2,1.3.2,1.3.2.1,1.3.2.2,2,2.1,2.1.1,2.1.2,2.1.2.1,2.2,2.2.1,2.2.1.1,2.2.1.2,2.2.2,3,3.2".split(",");l.setProps({query:"2"}),exp(e()).to.be.equal(i.join(","));function r(e){u[e]=!0}var u={};n.forEach(r),i.forEach(r);var o=Object.keys(u);l.setProps({value:o}),l.setProps({query:""}),l.update(),exp(e()).to.be.equal(rowData.map(t).join(",")),exp(f(l).length).to.be.equal(o.length),exp(c(l).length).to.be.equal(o.length-1)}),it("height 为200的边界情况",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{data:rowData,expandAll:!0,start:23}));exp(e.find("liItem").last().props().title).to.be.equal("4")}),it("isSelectedAll all",function(){var t={},e=(0,_reactTestUtils.createTestComponent)(_tree2.default,function(e){t=e}),a=(0,_enzyme.mount)(_react2.default.createElement(e,{data:rowData,expandAll:!0,start:23,mutliple:!0}));exp(t.getThemeTarget().isSelectAll()).to.be.false;var l=rowData.map(function(e){return e.key});a.setProps({value:l}),exp(t.getThemeTarget().isSelectAll()).to.be.true}),it("isSelectedAll onlySelectLeaf",function(){var t={},e=(0,_reactTestUtils.createTestComponent)(_tree2.default,function(e){t=e}),a=(0,_enzyme.mount)(_react2.default.createElement(e,{data:rowData,expandAll:!0,start:23,mutliple:!0,onlySelectLeaf:!0}));exp(t.getThemeTarget().isSelectAll()).to.be.false;var l=rowData.filter(function(e){return e.isLeaf}).map(function(e){return e.key});a.setProps({value:l}),exp(t.getThemeTarget().isSelectAll()).to.be.true}),it("height 为200的边界情况 超出范围",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_tree2.default,{data:rowData,expandAll:!0,start:1e3}));exp(e.find("liItem").last().props().title).to.be.equal("4")})});