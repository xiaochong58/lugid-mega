"use strict";var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_react=require("react"),_react2=_interopRequireDefault(_react),_chai=require("chai"),_chai2=_interopRequireDefault(_chai);require("jest-styled-components");var _enzyme=require("enzyme"),_enzyme2=_interopRequireDefault(_enzyme),_enzymeAdapterReact=require("enzyme-adapter-react-16"),_enzymeAdapterReact2=_interopRequireDefault(_enzymeAdapterReact),_=require("../"),_2=_interopRequireDefault(_),_demo=require("../demo"),_demo2=_interopRequireDefault(_demo),_reactTestRenderer=require("react-test-renderer"),_reactTestRenderer2=_interopRequireDefault(_reactTestRenderer),_reactTestUtils=require("@lugia/react-test-utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var i=e.apply(this,arguments);return new Promise(function(c,o){return function t(e,r){try{var n=i[e](r),a=n.value}catch(e){return void o(e)}if(!n.done)return Promise.resolve(a).then(function(e){t("next",e)},function(e){t("throw",e)});c(a)}("next")})}}var exp=_chai2.default.expect;_enzyme2.default.configure({adapter:new _enzymeAdapterReact2.default}),describe("Button",function(){function t(e){var t=1;(0,_enzyme.mount)(_react2.default.createElement(_2.default,Object.assign({type:"danger",onClick:function(){t=2}},e),"hello")).find("button").at(0).simulate("click"),expect(t).toBe(1)}it("css",function(){var e=_react2.default.createElement(_demo2.default,null);expect(_reactTestRenderer2.default.create(e).toJSON()).toMatchSnapshot()}),it("button: click",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r,n;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{type:"success"},"hello")),r=t.find("button").at(0),n=t.find("Button").at(0).instance(),expect(n.state.clicked).toBe(!1),r.simulate("click"),expect(n.state.clicked).toBe(!0),e.next=8,(0,_reactTestUtils.delay)(500);case 8:expect(n.state.clicked).toBe(!1),r.simulate("click"),expect(n.state.clicked).toBe(!0);case 11:case"end":return e.stop()}},e,void 0)}))),it("type link button: click",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r,n,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=function(){t++},n=(t=0,_enzyme.mount)(_react2.default.createElement(_2.default,{type:"link",onClick:r},"hello")),(a=n.find("button").at(0)).simulate("click"),expect(t).toBe(1),a.simulate("click"),expect(t).toBe(2);case 8:case"end":return e.stop()}},e,void 0)}))),it("type link disabled button: click",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r,n,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=function(){t++},n=(t=0,_enzyme.mount)(_react2.default.createElement(_2.default,{type:"link",disabled:!0,onClick:r},"hello")),(a=n.find("button").at(0)).simulate("click"),expect(t).toBe(0),a.simulate("click"),expect(t).toBe(0);case 8:case"end":return e.stop()}},e,void 0)}))),it("type link loading button: click",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r,n,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=function(){t++},n=(t=0,_enzyme.mount)(_react2.default.createElement(_2.default,{type:"link",loading:!0,onClick:r},"hello")),(a=n.find("button").at(0)).simulate("click"),expect(t).toBe(0),a.simulate("click"),expect(t).toBe(0);case 8:case"end":return e.stop()}},e,void 0)}))),it("button: loading",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{type:"success",loading:!0},"hello")),r=t.find("Button").at(0).instance(),expect(r.props.loading).toBe(!0);case 3:case"end":return e.stop()}},e,void 0)}))),it("button: loading delay",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{type:"success",loading:{delay:3e3}},"hello")),r=t.find("Button").at(0).instance(),expect(r.props.loading).toBe(!0),e.next=5,(0,_reactTestUtils.delay)(3e3);case 5:expect(r.props.loading).toBe(!1);case 6:case"end":return e.stop()}},e,void 0)}))),it("props: click",_asyncToGenerator(_regenerator2.default.mark(function e(){var r,t,n,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,t=new Promise(function(t){r=function(e){t(e.target)}}),n=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{type:"danger",onClick:r},"hello")),a={px:"hello"},n.find("ButtonWrap").at(0).simulate("click",{target:a}),e.t0=exp,e.next=8,t;case 8:e.t1=e.sent,e.t2=a,(0,e.t0)(e.t1).to.be.eql(e.t2);case 11:case"end":return e.stop()}},e,void 0)}))),it("props: click, loading: true",_asyncToGenerator(_regenerator2.default.mark(function e(){return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({loading:!0});case 2:case"end":return e.stop()}},e,void 0)}))),it("type link props: click, loading: true",_asyncToGenerator(_regenerator2.default.mark(function e(){return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({loading:!0,type:"link"});case 2:case"end":return e.stop()}},e,void 0)}))),it("props: click, disabled: true",_asyncToGenerator(_regenerator2.default.mark(function e(){return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({disabled:!0});case 2:case"end":return e.stop()}},e,void 0)}))),it("type link props: click, disabled: true",_asyncToGenerator(_regenerator2.default.mark(function e(){return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({disabled:!0,type:"link"});case 2:case"end":return e.stop()}},e,void 0)})))});