"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_index=require("../consts/index"),_index2=_interopRequireDefault(_index),_themeHoc=require("@lugia/theme-hoc"),_themeHoc2=_interopRequireDefault(_themeHoc),_icon=require("../icon"),_icon2=_interopRequireDefault(_icon),_objectUtils=require("@lugia/object-utils"),_tag=require("../css/tag");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var getChecked=function(e,t){return"checked"in e?e.checked:!!t&&t.checked},Tag=function(){function t(e){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.getValue=function(){var e=s.props,t=e.text,r=e.children;return t?t.toString():r||"Tag"},s.getCloseTheme=function(e){var t=(0,s.props.getPartOfThemeHocProps)(e),r=t.viewClass,n=t.theme,o=n[r],a=o.normal,i=void 0===a?{}:a,c=o.hover,l=void 0===c?{}:c;return i.margin={},i.padding={},l.margin={},{viewClass:r,theme:(0,_objectUtils.deepMerge)(_defineProperty({},r,{normal:{font:{size:16},margin:{left:5}}}),n)}},s.onClick=function(e){var t=s.state.checked;s.setState({checked:!t});var r=s.props.onClick;r&&r(e,!t)},s.state={isClose:!1,checked:getChecked(e,null)},s}return _inherits(t,_react2.default.Component),_createClass(t,[{key:"render",value:function(){var t=this,e=this.state,r=e.isClose,n=e.checked,o=this.props,a=o.getPartOfThemeProps,i=o.type,c=o.shape,l=o.closable,s=void 0!==l&&l,u={shape:c,type:i,isClose:r,closable:s,checked:n},p=a("optional"===i&&n?"CheckedTagWrap":"TagWrap",{props:u}),f=this.getValue();return"optional"===i?_react2.default.createElement(_tag.OptionalWrap,{onClick:this.onClick,themeProps:p},_react2.default.createElement(_tag.FlexBox,null,_react2.default.createElement(_tag.ItemText,{themeProps:p,ref:function(e){return t.itemText=e},type:i},f))):_react2.default.createElement(_tag.TagWrap,{onClick:this.onClick,themeProps:p},_react2.default.createElement(_tag.FlexBox,null,_react2.default.createElement(_tag.ItemText,{themeProps:p,ref:function(e){return t.itemText=e},type:i},f),s?_react2.default.createElement(_icon2.default,Object.assign({},this.getCloseTheme("CloseButton"),{singleTheme:!0,iconClass:"lugia-icon-reminder_close",onClick:this.onCloseClick.bind(this)})):null))}},{key:"onCloseClick",value:function(e){e.stopPropagation(),this.setState({isClose:!0});var t=this.props.onClose;setTimeout(function(){t&&t(e)},150)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t?{checked:getChecked(e,t)}:{}}}]),t}();Tag.displayName=_index2.default.Tag,Tag.defaultProps={getTheme:function(){return{}},closable:!1,shape:"basic",type:"customs"},exports.default=(0,_themeHoc2.default)(Tag,_index2.default.Tag,{hover:!0,active:!0});