"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOverflowSize=getOverflowSize,exports.getNewFormsSize=getNewFormsSize,exports.getMoveXY=getMoveXY,exports.fourLineChangeXY=fourLineChangeXY,exports.getPosition=getPosition,exports.dragRange=dragRange,exports.getLimitPosition=getLimitPosition,exports.getXY=getXY,exports.dragCircle=dragCircle,exports.getComponentSize=getComponentSize,exports.getDownXY=getDownXY,exports.getLockingWay=getLockingWay;var _math=require("./math"),_initialState=require("../initialState"),clickLock=_initialState.lockingWayFlag.clickLock,dragLock=_initialState.lockingWayFlag.dragLock;function getOverflowSize(t,e,i,o){return{overflowWidth:t-i,overflowHeight:e-o}}function getNewFormsSize(t,e,i,o,r,n){var a=1*i,g=1*o,m=1*t,c=1*e,s=a,h=g;"right"!==r&&"bottom"!==r&&"bottomPiece"!==r||(s=a+m,h=g+c),"left"!==r&&"top"!==r&&"topPiece"!==r||(s=a-m,h=g-c),"rightPiece"===r&&(s=a+m,h=g-c),"leftPiece"===r&&(s=a-m,h=g+c);var l=n.minWidth,u=n.minHeight,v=n.maxWidth,f=n.maxHeight;return{width:s=Math.min(Math.max(s,l),v),height:h=Math.min(Math.max(h,u),f)}}function getMoveXY(t,e,i,o){return{moveX:t-i,moveY:e-o}}function fourLineChangeXY(t,e,i,o,r,n){var a=e.endsWith("Piece"),g=t.topIsDown,m=t.rightIsDown,c=t.bottomIsDown,s=t.leftIsDown;if(g||m||c||s){var h={moveX:0,moveY:0};return(g&&!a||m&&a)&&(h=getMoveXY(0,o,0,n)),s&&(h=getMoveXY(i,0,r,0)),g&&a&&(h=getMoveXY(i,o,r,n)),h}return{moveX:0,moveY:0}}function getPosition(t,e,i,o){return{x:i-1*t,y:o-1*e}}function dragRange(t,e,i,o,r){var n=t.clientX,a=t.clientY,g="";o<=n&&(n=o);var m=i<=a;return o-20<=n&&m&&e&&(g="right"),n<=0&&(n=0),n<=20&&m&&e&&(g="left"),r<=a&&(a=r),a<=0&&(a=0),{currentX:n,currentY:a,lockDirection:g}}function getLimitPosition(t,e,i,o,r,n){var a=e.endsWith("Piece"),g=t.topIsDown,m=t.rightIsDown,c=t.bottomIsDown,s=t.leftIsDown,h=t.width,l=t.height,u=t.x,v=t.y;if(g||m||c||s){var f=i/h,w=o/l,x=u,d=v,X=u,Y=v;return(g||m&&a)&&(d=v+l*(1-w),Y=v-n*(1-l/n)),(s||c)&&(d=v+l*w,Y=v+n),(s||g&&a)&&(x=u+h*(1-f),X=u-r*(1-h/r)),m&&(x=u+h*f,X=u+r),{limitY:{minlimitY:d,maxLimitY:Y},limitX:{minlimitX:x,maxLimitX:X}}}}function getXY(t,e,i,o,r,n){var a=e.endsWith("Piece"),g=t.topIsDown,m=t.rightIsDown,c=t.bottomIsDown,s=t.leftIsDown,h=t.maxX,l=t.maxY,u=r<=0?0:r,v=n<=0?0:n,f=i.minlimitX,w=i.maxLimitX,x=o.minlimitY,d=o.maxLimitY;return h<=r&&(u=h),l<=n&&(v=l),(g||m||c||s)&&((g&&!a||g&&a||m&&a)&&(x<=n&&(v=x),n<=d&&(v=d)),(s&&a||c)&&(n<=x&&(v=x),d<=n&&(v=d)),(s||g&&a)&&(f<=r&&(u=f),r<=w&&(u=w)),m&&a&&(r<=f&&(u=f),w<=r&&(u=w))),{x:u,y:v}}function dragCircle(t){var e=t.x,i=t.maxX,o=t.isFloat,r=t.direction,n=t.width,a=void 0===n?0:n,g=t.minWidth,m="",c="",s=e;return o?s=i/2<=e?(m=1,i-(void 0===g?50:g)):c=1:("left"===r&&(s=c=0),"right"===r&&(m=0,s=i-a)),{left:""!==c?"left:"+c+"px":"",right:""!==m?"right:"+m+"px":"",x:s}}function getComponentSize(t,e,i,o,r,n,a){var g=t,m=e;(t&&!(0,_math.isNumber)(t)||(0,_math.isMinValue)(t,i))&&(g=i),(e&&!(0,_math.isNumber)(e)||(0,_math.isMinValue)(e,o))&&(m=o),(0,_math.isMaxValue)(t,r)&&(g=r),(0,_math.isMaxValue)(e,n)&&(m=n);var c=g||"auto",s=m||"auto";return a||(t||(c="auto"),e||(s="auto")),{newWidth:c,newHeight:s}}function getDownXY(t){var e=t.x,i=t.y,o=t.downX,r=t.downY,n=t.width,a=t.height,g=void 0,m=void 0;switch(t.direction){case"top":g=o,m=i;break;case"right":g=e+n,m=r;break;case"bottom":g=o,m=i+a;break;case"left":g=e,m=r;break;case"rightPiece":g=e+n,m=i;break;case"bottomPiece":g=e+n,m=i+a;break;case"leftPiece":g=e,m=i+a;break;default:g=e,m=i}return{newX:g,newY:m}}function getLockingWay(t){return{isDrag:t===dragLock,isClick:t===clickLock}}