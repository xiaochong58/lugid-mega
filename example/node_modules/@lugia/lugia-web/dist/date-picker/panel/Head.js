"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_index=require("../../icon/index"),_index2=_interopRequireDefault(_index),_styled=require("../styled/styled"),_themeConfig=require("../themeConfig/themeConfig"),_themeConfig2=_interopRequireDefault(_themeConfig);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var moment=require("moment"),Head=function(){function o(){var e,t,C;_classCallCheck(this,o);for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=C=_possibleConstructorReturn(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(a)))).changeYear=function(y){return function(){var e=C.props,t=e.onChange,r=e.showYears,a=e.mode,n=C.props,o=n.start,i=n.step;"year"===a&&void 0!==o&&(y=-1===y?-i:i);var s=moment().set({year:o}).add(y,"year").year();C.setState({year:s});var l=s-1,c={showYears:!1,start:s,title:l+"-"+(l+i-1)};if("year"!==a&&(c={year:s}),t&&t(c),r){var u=C.props,d=u.start,f=u.step,p=C.getSandE(d,f,y),h=p.startY,_=p.endY,m=p.title;t&&t({start:h,end:_,showYears:r,title:m})}}},C.getSandE=function(e,t,r){var a=t-1,n=e-a-1,o=e+a*(1+a)-1,i=o-n,s=n-i-1,l=n-1;0<r&&(l=(s=1+o)+i);var c=s+t;return{startY:c,endY:c+t-1,title:s+"-"+l}},C.headClick=function(){var e=C.state.year,t=C.props,r=t.start,a=t.showYears,n=t.step;if(!a){var o=(r-=1)+n-1,i=o-r,s=r-i-1,l=s+"-"+(r+i*(1+i)-1),c=C.props.headOnChange;c&&c({start:s+n,end:o,year:e,showYears:!0,title:l})}},C.secondHeadClick=function(){var e=C.props,t=e.secondTitle,r=e.onHeadChange;r&&r(t)},_possibleConstructorReturn(C,t)}return _inherits(o,_react.Component),_createClass(o,[{key:"render",value:function(){var e=this.state,t=e.title,r=e.secondTitle,a=this.props,n=a.themeProps,o=a.getPartOfThemeHocProps,i=a.getPartOfThemeProps,s=(0,_themeConfig2.default)({getPartOfThemeProps:i},"HeadYearText"),l=(0,_themeConfig2.default)({getPartOfThemeProps:i},"HeadWeekText"),c=o("HeadSingleArrow"),u={viewClass:c.viewClass,theme:c.theme};return _react2.default.createElement(_styled.DateHeader,{themeProps:n},_react2.default.createElement(_styled.HeaderTop,{themeProps:n},_react2.default.createElement(_styled.HeaderTopArrow,{themeProps:n,position:"left",onClick:this.changeYear(-1)},_react2.default.createElement(_index2.default,Object.assign({iconClass:"lugia-icon-direction_Left"},u))),_react2.default.createElement(_styled.HeaderTopText,{themeProps:s,onClick:this.headClick},t),_react2.default.createElement(_styled.HeaderTopText,{themeProps:l,onClick:this.secondHeadClick},r),_react2.default.createElement(_styled.HeaderTopArrow,{themeProps:n,position:"right",onClick:this.changeYear(1)},_react2.default.createElement(_index2.default,Object.assign({iconClass:"lugia-icon-direction_right"},u)))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.start,a=e.title,n=e.mode,o=e.secondTitle,i=r-1;return{year:r,title:"year"!==n?r:a||i+"-"+(11+i),secondTitle:e.isWeekInner&&o?"-"+o:""}}}]),o}();Head.displayName="Head",exports.default=Head;