"use strict";var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_createClass=function(){function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_chai=require("chai"),_chai2=_interopRequireDefault(_chai),_=require("../"),_2=_interopRequireDefault(_),_enzyme=require("enzyme"),_enzyme2=_interopRequireDefault(_enzyme),_enzymeAdapterReact=require("enzyme-adapter-react-16"),_enzymeAdapterReact2=_interopRequireDefault(_enzymeAdapterReact),_menu=require("../../menu"),_menu2=_interopRequireDefault(_menu),_dropmenuButton=require("../dropmenuButton"),_dropmenuButton2=_interopRequireDefault(_dropmenuButton),_reactTestRenderer=require("react-test-renderer"),_reactTestRenderer2=_interopRequireDefault(_reactTestRenderer),_index=require("../../consts/index"),_index2=_interopRequireDefault(_index),_theme=require("../../theme"),_theme2=_interopRequireDefault(_theme),_reactTestUtils=require("@lugia/react-test-utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var o=e.apply(this,arguments);return new Promise(function(u,i){return function t(e,r){try{var a=o[e](r),n=a.value}catch(e){return void i(e)}if(!a.done)return Promise.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});u(n)}("next")})}}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var MenuItem=_menu2.default.MenuItem;_enzyme2.default.configure({adapter:new _enzymeAdapterReact2.default});var exp=_chai2.default.expect;describe("DropMenuButton",function(){it("default",function(){var e=_reactTestRenderer2.default.create(_react2.default.createElement(_dropmenuButton2.default,null)).toJSON();expect(e).toMatchSnapshot()}),it("divided={false}",function(){var e=_reactTestRenderer2.default.create(_react2.default.createElement(_dropmenuButton2.default,{divided:!1})).toJSON();expect(e).toMatchSnapshot()}),it("type=primary,divided={true}",function(){var e=_reactTestRenderer2.default.create(_react2.default.createElement(_dropmenuButton2.default,{type:"primary",divided:!0})).toJSON();expect(e).toMatchSnapshot()}),it("type=basic",function(){var e=_reactTestRenderer2.default.create(_react2.default.createElement(_dropmenuButton2.default,{type:"basic",divided:!1})).toJSON();expect(e).toMatchSnapshot()});for(var i=[],e=0;e<10;e++)i.push(_react2.default.createElement(MenuItem,{key:e,onClick:function(e){}},e));function a(a,n,u){return _inherits(r,_react2.default.Component),_createClass(r,[{key:"render",value:function(){var e,t=this.state.menu,r=(_defineProperty(e={},_index2.default.DropMenuButton,{width:180}),_defineProperty(e,_index2.default.DropMenu,{width:160}),e);return _react2.default.createElement(_theme2.default,{config:r},_react2.default.createElement(_2.default,{onPopupVisibleChange:this.onPopupVisibleChange,menus:t,action:a,hideAction:a},_react2.default.createElement(_dropmenuButton2.default,{type:u,divided:n,onClick:this.onClick},"参数设置")))}}]),r;function r(e){_classCallCheck(this,r);var t=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.onPopupVisibleChange=function(e){t.setState({visible:e})},t.onClick=function(){t.setState({clickedState:!0})},t.state={clickedState:!1,visible:!1,menu:_react2.default.createElement(_menu2.default,{onClick:function(){}},i)},t}}function n(e){return e.find("DropMenuPullButton")}function u(e){return n(e).simulate("mouseEnter")}function o(e){return n(e).simulate("click")}function l(e,t){(function(e){return e.find(_index2.default.Menu).at(0).find(_index2.default.MenuItem)})(e).at(t).simulate("click")}function c(e){return e.find("DevidedTextContainer")}function s(e){return e.find(_index2.default.DropMenuButton).find("NoDividedContainer")}function d(e){s(e).simulate("mouseEnter")}function p(e){s(e).simulate("click")}function f(e){return e.find(_index2.default.DropMenuButton).find("BasicWrap")}function _(e){f(e).simulate("mouseEnter")}function m(e){f(e).simulate("click")}it("type: default, divided={true}; action = hover , click MenuItem && hover LeftButton",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a("hover",!0,"customs"),u(r=(0,_enzyme.mount)(_react2.default.createElement(t,null))),exp(r.state().visible).to.be.equal(!0),e.next=6,(0,_reactTestUtils.delay)(100);case 6:return r.update(),n(r).simulate("mouseLeave"),e.next=10,(0,_reactTestUtils.delay)(100);case 10:return exp(r.state().visible).to.be.equal(!1),e.next=13,(0,_reactTestUtils.delay)(200);case 13:return r.update(),u(r),exp(r.state().visible).to.be.equal(!0),e.next=18,(0,_reactTestUtils.delay)(200);case 18:return r.update(),l(r,1),e.next=22,(0,_reactTestUtils.delay)(200);case 22:exp(r.state().visible).to.be.equal(!1),c(r).simulate("mouseEnter"),exp(r.state().visible).to.be.equal(!1);case 25:case"end":return e.stop()}},e,void 0)}))),it("type: default, divided={true}, action = click , click MenuItem && click LeftButton",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a("click",!0,"default"),r=(0,_enzyme.mount)(_react2.default.createElement(t,null)),exp(r.state().visible).to.be.equal(!1),o(r),exp(r.state().visible).to.be.equal(!0),r.update(),e.next=8,(0,_reactTestUtils.delay)(300);case 8:return o(r),exp(r.state().visible).to.be.equal(!1),r.update(),e.next=13,(0,_reactTestUtils.delay)(300);case 13:return o(r),exp(r.state().visible).to.be.equal(!0),l(r,1),r.update(),e.next=19,(0,_reactTestUtils.delay)(300);case 19:return exp(r.state().visible).to.be.equal(!1),r.update(),e.next=23,(0,_reactTestUtils.delay)(300);case 23:return c(r).find("input").at(0).simulate("click"),exp(r.state().visible).to.be.equal(!1),r.update(),e.next=28,(0,_reactTestUtils.delay)(300);case 28:exp(r.state().clickedState).to.be.equal(!0);case 29:case"end":return e.stop()}},e,void 0)}))),it("type: primary, divided={false}; action = hover , click MenuItem && hover LeftButton",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a("hover",!1,"primary"),r=(0,_enzyme.mount)(_react2.default.createElement(t,null)),exp(r.state().visible).to.be.equal(!1),d(r),exp(r.state().visible).to.be.equal(!0),r.update(),e.next=8,(0,_reactTestUtils.delay)(300);case 8:return s(r).simulate("mouseLeave"),r.update(),e.next=12,(0,_reactTestUtils.delay)(300);case 12:return exp(r.state().visible).to.be.equal(!1),d(r),r.update(),e.next=17,(0,_reactTestUtils.delay)(300);case 17:exp(r.state().visible).to.be.equal(!0),l(r,1),exp(r.state().visible).to.be.equal(!1);case 20:case"end":return e.stop()}},e,void 0)}))),it("type: primary, divided={false}, action = click , click MenuItem",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a("click",!1,"primary"),r=(0,_enzyme.mount)(_react2.default.createElement(t,null)),exp(r.state().visible).to.be.equal(!1),p(r),exp(r.state().visible).to.be.equal(!0),r.update(),e.next=8,(0,_reactTestUtils.delay)(300);case 8:return p(r),r.update(),e.next=12,(0,_reactTestUtils.delay)(300);case 12:return exp(r.state().visible).to.be.equal(!1),r.update(),e.next=16,(0,_reactTestUtils.delay)(300);case 16:p(r),exp(r.state().visible).to.be.equal(!0),l(r,1),exp(r.state().visible).to.be.equal(!1);case 20:case"end":return e.stop()}},e,void 0)}))),it("type: basic, action = hover , hover MenuItem",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a("hover",!1,"basic"),r=(0,_enzyme.mount)(_react2.default.createElement(t,null)),exp(r.state().visible).to.be.equal(!1),_(r),exp(r.state().visible).to.be.equal(!0),r.update(),e.next=8,(0,_reactTestUtils.delay)(300);case 8:return f(r).simulate("mouseLeave"),r.update(),e.next=12,(0,_reactTestUtils.delay)(300);case 12:return exp(r.state().visible).to.be.equal(!1),r.update(),e.next=16,(0,_reactTestUtils.delay)(300);case 16:return _(r),exp(r.state().visible).to.be.equal(!0),r.update(),e.next=21,(0,_reactTestUtils.delay)(300);case 21:l(r,1),exp(r.state().visible).to.be.equal(!1);case 23:case"end":return e.stop()}},e,void 0)}))),it("type: basic, action = click , click MenuItem",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a("click",!1,"basic"),r=(0,_enzyme.mount)(_react2.default.createElement(t,null)),exp(r.state().visible).to.be.equal(!1),m(r),exp(r.state().visible).to.be.equal(!0),r.update(),e.next=8,(0,_reactTestUtils.delay)(300);case 8:return m(r),exp(r.state().visible).to.be.equal(!1),r.update(),e.next=13,(0,_reactTestUtils.delay)(300);case 13:m(r),exp(r.state().visible).to.be.equal(!0),l(r,1),exp(r.state().visible).to.be.equal(!1);case 17:case"end":return e.stop()}},e,void 0)})))});