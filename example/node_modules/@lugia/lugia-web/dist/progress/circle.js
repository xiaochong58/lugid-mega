"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}}(),_react=require("react"),React=_interopRequireWildcard(_react),_progressLine=require("../css/progress-line"),_progressCircle=require("../css/progress-circle"),_line=require("./line"),_stateColor=require("../css/stateColor"),_stateColor2=_interopRequireDefault(_stateColor),_circleUtils=require("../common/circleUtils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function getPolyLine(e,t,r,o){return React.createElement("polyline",{"stroke-dasharray":"5,5",points:(0,_circleUtils.getPoints)(e,t,r),style:{fill:"none",stroke:o,strokeWidth:t,transition:"all .3s"}})}var _colorsFunc=(0,_stateColor2.default)(),themeColor=_colorsFunc.themeColor,successColor=_colorsFunc.successColor,dangerColor=_colorsFunc.dangerColor,_class=function(){function s(){var e,t,p;_classCallCheck(this,s);for(var r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=p=_possibleConstructorReturn(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(o)))).getCircleInfo=function(){var e=p.props.size,t="default"===(void 0===e?"default":e),r=t?60:40,o=t?120:80;return{viewWidth:o,viewHeight:o,cx:r,cy:r,radius:t?56:37,strokeWidth:t?8:6,circleLength:t?352:233,transform:t?"matrix(0,-1,1,0,0,120)":"matrix(0,-1,1,0,0,80)"}},p.getPercentText=function(){var e=p.props,t=e.percent,r=void 0===t?0:t,o=e.format,n=e.status,s=e.size,i=void 0===s?"default":s,c=e.type,a=void 0===c?"circle":c,l=e.getIconTheme,u=e.iconClass;return(0,_line.getText)(!0,{hasFormat:p.hasFormat(),percent:r,format:o,status:(0,_line.getStatus)({status:n,percent:r}),size:i,type:a,getIconTheme:l,iconClass:u})},p.getColor=function(e,t){var r=p.props.percent,o=void 0===r?0:r;if(0===(o=(0,_progressLine.handlePercent)(o)))return e;if(t)return t;var n=p.props.status;return"error"===n?dangerColor:"success"===n||100===o?successColor:(0,p.props.getTheme)().color||themeColor},p.getTargetTheme=function(e){return(0,p.props.getPartOfThemeProps)(e)},p.getBackgroundTarget=function(e){return"circle"===e?"ProgressCircleBackground":"DashboardBackground"},_possibleConstructorReturn(p,t)}return _inherits(s,React.Component),_createClass(s,[{key:"render",value:function(){var e=this.props,t=e.percent,r=void 0===t?0:t,o=e.type,n=void 0===o?"circle":o,s=e.size,i=void 0===s?"default":s,c=e.status,a=void 0===c?"default":c,l=this.getCircleInfo(),u=l.viewWidth,p=l.viewHeight,f=l.cx,g=l.cy,h=l.radius,d=l.strokeWidth,_=l.circleLength,C=l.transform,v={cx:f,cy:g,r:h,strokeWidth:d,fill:"none"},m="circle"===n?"ProgressCircleText":"DashboardText",y=this.getTargetTheme(m);y.propsConfig={status:(0,_line.getStatus)({status:a,percent:r})};var b=this.getBackgroundTarget(n),T=this.getTargetTheme(b),P=this.getLineColor(T,"#f2f2f2"),k="circle"===n?"ProgressCircleLine":"DashboardLine",R=this.getTargetTheme(k),w=this.getLineColor(R);return React.createElement(_progressCircle.SvgInner,{size:i},"circle"===n?React.createElement("svg",{width:u,height:p},React.createElement("circle",Object.assign({},v,{stroke:P})),React.createElement("circle",Object.assign({},v,{stroke:this.getColor(P,w),transform:C,strokeLinecap:"round",strokeDasharray:(0,_progressLine.handlePercent)(r)/100*_+" "+_,style:{transition:"all .3s"}}))):React.createElement("svg",{width:u,height:p},getPolyLine(56,8,100,P),getPolyLine(56,8,(0,_progressLine.handlePercent)(r),this.getColor(P,w))),React.createElement(_progressCircle.SvgText,{themeProps:y,percent:r,status:a,size:i},this.getPercentText()))}},{key:"getLineColor",value:function(e,t){var r=t,o=(0<arguments.length&&void 0!==e?e:{}).themeConfig,n=(void 0===o?{}:o).normal,s=(void 0===n?{}:n).color;return void 0===s?r:s}},{key:"hasFormat",value:function(){return"format"in this.props}}]),s}();exports.default=_class;