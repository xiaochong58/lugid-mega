"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _class,_temp,_createClass=function(){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}}(),_props3=require("../consts/props"),_react=require("react"),React=_interopRequireWildcard(_react),_themeProvider=require("../theme-provider"),_themeProvider2=_interopRequireDefault(_themeProvider),_radio=require("./radio"),_radio2=_interopRequireDefault(_radio),_button=require("../check-button/button"),_button2=_interopRequireDefault(_button),_consts=require("../consts"),_consts2=_interopRequireDefault(_consts),_translateData=require("../common/translateData"),_theme=require("../theme"),_theme2=_interopRequireDefault(_theme),_checkboxGroup=require("../css/checkbox-group");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.default=(0,_themeProvider2.default)((_temp=_class=function(){function r(e){_classCallCheck(this,r);var b=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));b.updateMapData=function(e){var t=e.cancelItem,a=e.dataItem;b.cancelItem=t,b.dataItem=a},b.getChildDom=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=b.props,n=r.disabled,l=r.valueField,o=void 0===l?_props3.ValueField:l,i=r.displayField,u=void 0===i?_props3.DisplayField:i,s=r.styles,d=void 0===s?"default":s,p=r.childType,c=void 0===p?"default":p,h=r.size,f=void 0===h?"default":h,_=b.state.value,v={},y=a.last;t?v.cancel=!0:v.disabled=n||e.disabled;var m=e[o];return"button"===c?React.createElement(_button2.default,Object.assign({type:"radio",value:m,checked:_===m,onChange:b.handleChange(e)},v,{size:f,hasValue:b.hasValueProps()}),e[u]):React.createElement(_radio2.default,Object.assign({onChangeForGroup:b.handleChange(e),key:m,value:m,checked:m===_,styles:d},v,{last:y}),e[u])},b.handleChange=function(f){return function(e,t){var a=b.props,r=a.onChange,n=a.displayField,l=a.children,o=a.data,i=a.valueField,u=a.defaultValue,s=b.state.value;if(t!==s){var d={updateHanlder:b.updateMapData,getMapData:b.getMapData},p={props:{displayField:n,children:l,data:o,valueField:i,value:b.props.value,defaultValue:u},state:{displayValue:b.state.displayValue}},c=(0,_translateData.getItems)([s],!1,p,d).items,h={newValue:t,oldValue:s,newItem:f,event:e,oldItem:c&&c[0],newDisplayValue:t};r&&r(h),b.hasValueProps()||(b.cancelItem=[],b.setState({value:t}))}}},b.getMapData=function(){return{cancelItem:b.cancelItem,dataItem:b.dataItem}};var t=(0,_translateData.getValueAndDisplayValue)(e,null).displayValue,a=t?t[0]:[];return(0,_translateData.updateMapData)(e,a,b.updateMapData),b}return _inherits(r,React.Component),_createClass(r,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,r={props:{displayValue:a.displayValue,value:a.value,data:a.data},state:{dataLength:this.state.dataLength}};return(0,_translateData.didUpdate)(e,t,r,function(e,t){return t.displayValue},this.updateMapData)}},{key:"render",value:function(){var r=this,e=this.state.displayValue,t=void 0===e?"":e,a="string"==typeof t?[t]:[],n=this.props,l=n.cache,o=void 0===l||l,i=n.childType,u=void 0===i?"default":i,s=n.children,d=n.data,p=n.disabled,c=n.styles,h=n.getPartOfThemeProps;o||(0,_translateData.updateMapData)(this.props,a,this.updateMapData);var f={props:{children:s,data:d,disabled:p,styles:c},state:{value:this.state.value},getChildDom:function(e,t,a){return r.getChildDom(e,t,a)},handleChange:function(){return r.handleChange},hasValueProps:function(){return r.hasValueProps()},cancelItem:this.cancelItem};return React.createElement(_theme2.default,{config:this.getChildTheme()},React.createElement(_checkboxGroup.Group,{themeProps:h("Container"),childType:u},(0,_translateData.handleCreate)(f,"radio",u)))}},{key:"hasValueProps",value:function(){return"value"in this.props}},{key:"getChildTheme",value:function(){var e,t=this.props.getPartOfThemeConfig;return _defineProperty(e={},_consts2.default.Radio,t("Radio")),_defineProperty(e,_consts2.default.CheckButton,t("CheckButton")),e}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.data,r=(void 0===a?[]:a).length,n=(0,_translateData.getValueAndDisplayValue)(e,t),l=n.value,o=n.displayValue;return{value:l?l[0]:"",displayValue:o?o[0]:"",dataLength:r}}}]),r}(),_class.displayName="RadioGroup",_temp),_consts2.default.RadioGroup);