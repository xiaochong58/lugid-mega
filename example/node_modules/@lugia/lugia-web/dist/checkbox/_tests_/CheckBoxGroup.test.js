"use strict";var _react=require("react"),_react2=_interopRequireDefault(_react),_chai=require("chai"),_chai2=_interopRequireDefault(_chai);require("jest-styled-components");var _enzyme=require("enzyme"),_enzyme2=_interopRequireDefault(_enzyme),_enzymeAdapterReact=require("enzyme-adapter-react-16"),_enzymeAdapterReact2=_interopRequireDefault(_enzymeAdapterReact),_checkbox=require("../checkbox"),_checkbox2=_interopRequireDefault(_checkbox),_checkboxGroup=require("../checkbox-group"),_checkboxGroup2=_interopRequireDefault(_checkboxGroup),_demo=require("../demo"),_reactTestRenderer=require("react-test-renderer"),_reactTestRenderer2=_interopRequireDefault(_reactTestRenderer),_reactTestUtils=require("@lugia/react-test-utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var exp=_chai2.default.expect;_enzyme2.default.configure({adapter:new _enzymeAdapterReact2.default}),describe("CheckBox",function(){function u(e){return _react2.default.createElement(_checkboxGroup2.default,e,_react2.default.createElement(_checkbox2.default,{value:"1"}),_react2.default.createElement(_checkbox2.default,{value:"2"}),_react2.default.createElement(_checkbox2.default,{value:"3"}))}function c(e){return e.children().at(0).instance().state}function n(e,t){var a=e.label,l=t.label;return a<l?-1:l<a?1:0}var r=[{label:"check1",value:"11",name:"1"},{label:"check2",value:"22",name:"2"},{label:"check3",value:"33",name:"3"}];it("CheckBoxGroup CSS",function(){var e=_react2.default.createElement(_demo.CheckboxGroupDemo,null);expect(_reactTestRenderer2.default.create(e).toJSON()).toMatchSnapshot()}),it("CheckBoxGroup value | defaultValue",function(){var e=(0,_enzyme.mount)(u({value:["1"]})),t=(0,_enzyme.mount)(u({defaultValue:["1"]})),a=c(e),l=c(t);expect(a.value).toEqual(["1"]),expect(l.value).toEqual(["1"])}),it("CheckBoxGroup disabled",function(){function e(){c++}var c=0,t=(0,_enzyme.mount)(u({disabled:!0,onChange:e})),a=(0,_enzyme.mount)(u({onChange:e}));function l(e,t){for(var a=e.find("label"),l=0;l<3;l++)a.at(l).simulate("click"),expect(c).toBe(t?0:l+1)}l(t,!0),l(a)}),it("CheckBoxGroup displayValue",function(){var a={},l={},c=(0,_enzyme.mount)(_react2.default.createElement(_checkboxGroup2.default,{onChange:function(e){a=Object.assign({},l),l=Object.assign({},e)},styles:"vertical",data:r,defaultValue:["11"],displayField:"label"})).find("label");c.at(0).simulate("click");var u=[],n=[];function e(e,t){c.at(e).simulate("click"),1===t?(u.push(r[e].value),n.push(r[e])):(u.splice(0,1),n.splice(0,1)),expect(l.newValue).toEqual(u),expect(l.newItem).toEqual(n),expect(l.oldValue).toEqual(a.newValue),expect(l.oldItem).toEqual(a.newItem)}for(var t=0;t<3;t++)e(t,1);for(var o=0;o<3;o++)e(o,2)}),it("CheckBoxGroup displayValue onChange:oldItem & newItem value:onChange",function(){var t={},a={},e=(0,_enzyme.mount)(_react2.default.createElement(_checkboxGroup2.default,{onChange:function(e){t=Object.assign({},a),a=Object.assign({},e)},styles:"vertical",data:r,defaultValue:["11","44"],displayValue:["check4","check5"],displayField:"label"})),l=e.find("label");l.at(1).simulate("click"),expect(a.newValue).toEqual(["44"]),l.at(1).simulate("click"),expect(a.newValue.sort()).toEqual(["11","44"].sort()),expect(a.newItem.length).toBe(2),expect(a.oldItem).toEqual(t.newItem),l.at(2).simulate("click"),expect(a.newValue).toEqual(["11","44","22"]),expect(a.newItem.length).toBe(3),expect(a.oldItem.sort(n)).toEqual(t.newItem.sort(n)),l.at(0).find("span").at(0).simulate("click"),expect(a.newValue).toEqual(["11","22"]),expect(a.newItem.length).toBe(2),expect(a.newItem.length).toBe(2),expect(a.oldItem.sort(n)).toEqual(t.newItem.sort(n)),e.setProps({value:["11"]});var c=e.find("label");c.at(2).simulate("click");var u=e.children().at(0).instance().state;expect(a.newValue).toEqual(["11","33"]),expect(u.value).toEqual(["11"]),e.setProps({value:a.newValue}),c.at(2).simulate("click"),expect(a.oldItem).toEqual([{label:"check1",name:"1",value:"11"},{label:"check3",value:"33",name:"3"}]),expect(a.newItem).toEqual([{label:"check1",name:"1",value:"11"}]),expect(e.children().at(0).instance().state.value).toEqual(["11","33"])});var l=(0,_enzyme.mount)(_react2.default.createElement(_checkboxGroup2.default,{styles:"vertical",data:r,defaultValue:["11","44"],displayValue:["check4","check5"],displayField:"label"}));it("CheckBoxGroup: MapData props:data change-render",function(){var e=l.children().at(0).instance(),t=e.dataItem;expect(e.dataItem).toBe(t);var a=[].concat(r);l.setProps({data:a}),expect(e.dataItem).not.toBe(t),e.props.data.push({label:"aaa",value:"44"}),e.handleChange("1",[11]),expect(e.dataItem).not.toBe(t)}),it("CheckBoxGroup: MapData props:data data push item-not render",function(){var e=l.children().at(0).instance(),t=e.dataItem;e.props.data.push({label:"check1",value:"111",name:"111"}),e.handleChange("1","111"),expect(e.dataItem).not.toBe(t)});function o(e){return _react2.default.createElement(_checkboxGroup2.default,Object.assign({childType:"button",data:r,displayValue:"d"},e))}it("CheckBoxGroup: props: {childType: button, data,, value}",function(){var e=0,t=(0,_enzyme.mount)(o({value:["11"],onChange:function(){e++}})),a=t.find("hello"),l=t.children().at(0).instance();a.at(0).simulate("click"),expect(e).toBe(1),a.at(1).simulate("click"),expect(e).toBe(2),expect(l.state.value).toEqual(["11"]),t.setProps({defaultValue:"1"}),expect(l.state.value).toEqual(["11"])}),it("CheckBoxGroup: props: {childType: button, data, displayValue, defaultValue}",function(){var e=0,t=(0,_enzyme.mount)(o({defaultValue:["44"],onChange:function(){e++}})),a=t.find("hello"),l=t.children().at(0).instance();a.at(0).simulate("click"),expect(e).toBe(1),expect(l.state.value).toEqual([]),a.at(1).simulate("click"),expect(e).toBe(2),expect(l.state.value).toEqual(["11"])}),it("CheckBoxGroup: props: {childType: button, data, displayValue, value}",function(){var e=0,t=(0,_enzyme.mount)(o({value:["44"],onChange:function(){e++}})),a=t.find("hello"),l=t.find("cancel"),c=t.children().at(0).instance();l.at(0).simulate("click"),expect(e).toBe(1),expect(c.state.value).toEqual(["44"]),a.at(1).simulate("click"),expect(e).toBe(2),expect(c.state.value).toEqual(["44"])}),it("CheckBoxGroup: props: {childType: button, data, displayValue, defaultValue}  cancelItem",function(){var e=(0,_enzyme.mount)(o({defaultValue:["44"]})),t=e.find("hello"),a=e.find("cancel"),l=e.children().at(0).instance();expect(l.cancelItem).toEqual([{text:"d",value:"44"}]),a.at(0).simulate("click"),expect(l.cancelItem).toEqual([]),t.at(1).simulate("click"),expect(l.cancelItem).toEqual([])})});