"use strict";var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_chai=require("chai"),_chai2=_interopRequireDefault(_chai);require("jest-styled-components");var _enzyme=require("enzyme"),_enzyme2=_interopRequireDefault(_enzyme),_enzymeAdapterReact=require("enzyme-adapter-react-16"),_enzymeAdapterReact2=_interopRequireDefault(_enzymeAdapterReact),_reactTestUtils=require("@lugia/react-test-utils"),_=require("../"),_2=_interopRequireDefault(_),_trigger=require("../../trigger"),_trigger2=_interopRequireDefault(_trigger),_index=require("../../consts/index"),_index2=_interopRequireDefault(_index),_theme=require("../../theme"),_theme2=_interopRequireDefault(_theme),_utils=require("../../utils"),_tree=require("../../css/tree");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function _asyncToGenerator(e){return function(){var o=e.apply(this,arguments);return new Promise(function(u,l){return function t(e,a){try{var n=o[e](a),r=n.value}catch(e){return void l(e)}if(!n.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});u(r)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}_enzyme2.default.configure({adapter:new _enzymeAdapterReact2.default});var exp=_chai2.default.expect,rowData=[{value:"1",text:"1"},{value:"1.1",text:"1.1",pid:"1",path:"1",isLeaf:!0},{value:"1.2",text:"1.2",pid:"1",path:"1"},{value:"1.2.1",text:"1.2.1",pid:"1.2",path:"1/1.2",isLeaf:!0},{value:"1.2.2",text:"1.2.2",pid:"1.2",path:"1/1.2"},{value:"1.2.2.1",text:"1.2.2.1",pid:"1.2.2",path:"1/1.2/1.2.2"},{value:"1.2.2.1.1",text:"1.2.2.1.1",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{value:"1.2.2.1.2",text:"1.2.2.1.2",pid:"1.2.2.1",path:"1/1.2/1.2.2/1.2.2.1",isLeaf:!0},{value:"1.2.2.2",text:"1.2.2.2",pid:"1.2.2",path:"1/1.2/1.2.2",isLeaf:!0},{value:"1.3",text:"1.3",pid:"1",path:"1"},{value:"1.3.1",text:"1.3.1",pid:"1.3",path:"1/1.3"},{value:"1.3.1.1",text:"1.3.1.1",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{value:"1.3.1.2",text:"1.3.1.2",pid:"1.3.1",path:"1/1.3/1.3.1",isLeaf:!0},{value:"1.3.2",text:"1.3.2",pid:"1.3",path:"1/1.3"},{value:"1.3.2.1",text:"1.3.2.1",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{value:"1.3.2.2",text:"1.3.2.2",pid:"1.3.2",path:"1/1.3/1.3.2",isLeaf:!0},{value:"1.3.3",text:"1.3.3",pid:"1.3",path:"1/1.3",isLeaf:!0},{value:"2",text:"2"},{value:"2.1",text:"2.1",pid:"2",path:"2"},{value:"2.1.1",text:"2.1.1",pid:"2.1",path:"2/2.1",isLeaf:!0},{value:"2.1.2",text:"2.1.2",pid:"2.1",path:"2/2.1"},{value:"2.1.2.1",text:"2.1.2.1",pid:"2.1.2",path:"2/2.1/2.1.2",isLeaf:!0},{value:"2.2",text:"2.2",pid:"2",path:"2"},{value:"2.2.1",text:"2.2.1",pid:"2.2",path:"2/2.2"},{value:"2.2.1.1",text:"2.2.1.1",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{value:"2.2.1.2",text:"2.2.1.2",pid:"2.2.1",path:"2/2.2/2.2.1",isLeaf:!0},{value:"2.2.2",text:"2.2.2",pid:"2.2",path:"2/2.2",isLeaf:!0},{value:"3",text:"3"},{value:"3.1",text:"3.1",pid:"3",path:"3",isLeaf:!0},{value:"3.2",text:"3.2",pid:"3",path:"3",isLeaf:!0},{value:"4",text:"4",isLeaf:!0}],SelectedIcon="SelectedIcon";describe("TreeSelect",function(){function n(e,a){var n=_defineProperty({},_index2.default.TreeSelect,e),t=(_inherits(r,_react2.default.Component),_createClass(r,[{key:"render",value:function(){var t=this;return _react2.default.createElement(_theme2.default,{config:n},_react2.default.createElement(_2.default,{data:rowData,ref:function(e){return t.treeSelect=e}}))}}]),r);function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}var u=(0,_reactTestUtils.createTestComponent)(t,function(e){var t=e.treeSelect.getThemeTarget().getCurrentTheme();expect(t).toEqual(a)}),l=(0,_enzyme.mount)(_react2.default.createElement(u,null));expect(l.find(_index2.default.Theme).at(1).props().config).toEqual(a)}function e(e){var t=e.mutliple;it("canInput mutliple: "+t.toString(),function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{canSearch:!0,data:rowData,mutliple:t,canInput:!0}));p(e);b(e,"100"),v(e),t?exp(e.find(_index2.default.InputTagItem).text()).to.be.equal("100"):exp(r(e)[0]).to.be.equal("100")})}function t(t){it("selectAll expandAll"+t.toString(),function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{canSearch:!0,data:rowData,mutliple:!0,expandAll:t,canInput:!0}));p(e),g(e),exp(C(e).props().isCheckedAll).to.be.true})}it("输入框点击后，弹出面板",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData}));e.children().at(0).simulate("click"),e.update(),exp(e.find(_trigger2.default).length).to.be.equal(1)}),it("getTheme 获取下拉树各部件的样式信息 并且 配置了组件的样式， 则组件要加上自部件的样式设置",function(){var e,t={width:500},a=_defineProperty({},_index2.default.TreeSelect,t);n(t,(_defineProperty(e={},_index2.default.Tree,Object.assign({},t,{svThemeConfigTree:a},{height:(0,_utils.adjustValue)(_tree.DefaultHeight,_tree.MenuItemHeight)-2})),_defineProperty(e,_index2.default.Trigger,Object.assign({},t,{svThemeConfigTree:a})),_defineProperty(e,_index2.default.InputTag,Object.assign({},t,{svThemeConfigTree:a})),_defineProperty(e,_index2.default.Input,Object.assign({},t,{width:t.width},{svThemeConfigTree:a})),_defineProperty(e,SelectedIcon,{color:"#d9d9d9",hoverColor:"#108ee9"}),e))}),it("未指定width",function(){var e;n({},(_defineProperty(e={},_index2.default.Tree,{height:(0,_utils.adjustValue)(_tree.DefaultHeight,_tree.MenuItemHeight)-2,svThemeConfigTree:_defineProperty({},_index2.default.TreeSelect,{}),width:200}),_defineProperty(e,_index2.default.Trigger,{svThemeConfigTree:_defineProperty({},_index2.default.TreeSelect,{}),width:200}),_defineProperty(e,_index2.default.InputTag,{svThemeConfigTree:_defineProperty({},_index2.default.TreeSelect,{}),width:200}),_defineProperty(e,_index2.default.Input,{svThemeConfigTree:_defineProperty({},_index2.default.TreeSelect,{}),width:200}),_defineProperty(e,SelectedIcon,{color:"#d9d9d9",hoverColor:"#108ee9"}),e))}),it("测试查询功能 local",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,n;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{canSearch:!0,data:rowData,throttle:0})),a="helloworld",p(t),b(t,a),exp(i(t)).to.be.equal(a),exp(D(t)).to.be.equal(a),b(t,n="ligx"),exp(i(t)).to.be.equal(n),exp(D(t)).to.be.equal(n);case 10:case"end":return e.stop()}},e,void 0)}))),it("测试查询功能 remote",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{canSearch:!0,data:rowData,throttle:0,mode:"remote"})),a="helloworld",p(t),b(t,a),exp(i(t)).to.be.equal(""),exp(D(t)).to.be.equal(a);case 6:case"end":return e.stop()}},e,void 0)}))),it("选择全部",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,canSearch:!0,throttle:0,mutliple:!0,igronSelectField:"isLeaf"}));p(e),g(e)}),e({mutliple:!0}),e({mutliple:!1}),t(!0),t(!1),it("selectAll igronSelectField",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:void 0,p(t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,expandAll:!0,onChange:void 0,igronSelectField:"isLeaf",canInput:!0,canSearch:!0}))),g(t),exp(C(t).props().isCheckedAll).to.be.true,c(t,["1","1.2","1.2.2","1.2.2.1","1.3","1.3.1","1.3.2","2","2.1","2.1.2","2.2","2.2.1","3"]);case 7:case"end":return e.stop()}},e,void 0)}))),it("selectAll onlySelectLeaf",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:void 0,p(t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,expandAll:!0,onChange:void 0,onlySelectLeaf:!0,canInput:!0,canSearch:!0}))),g(t),exp(C(t).props().isCheckedAll).to.be.true,a=rowData.filter(function(e){return e.isLeaf}).map(function(e){return e.value}),c(t,a);case 7:case"end":return e.stop()}},e,void 0)}))),it("selectAll limitCount: 5",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{canSearch:!0,data:rowData,mutliple:!0,expandAll:!0,limitCount:5}))),g(t),exp(C(t).props().isCheckedAll).to.be.true,a=rowData.filter(function(e,t){return t<5}).map(function(e){return e.value}),c(t,a);case 6:case"end":return e.stop()}},e,void 0)}))),it("selectAll limitCount: 5 caninput 先选全部再输入",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,canSearch:!0,mutliple:!0,canInput:!0,expandAll:!0,limitCount:5}))),g(t),b(t,"100"),v(t),exp(C(t).props().isCheckedAll).to.be.true,a=rowData.filter(function(e,t){return t<5}).map(function(e){return e.value}),c(t,a);case 9:case"end":return e.stop()}},e,void 0)}))),it("selectAll limitCount: 5 caninput value: 我们啊 全选  然后进行刷新操作",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,n,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=["1231","lgx"],a=["我么啊啊","ab"],5,p(n=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,defaultValue:t,defaultDisplayValue:a,canInput:!0,canSearch:!0,expandAll:!0,limitCount:5}))),g(n),exp(C(n).props().isCheckedAll).to.be.true,r=rowData.filter(function(e,t){return t<3}).map(function(e){return e.value}),c(n,[].concat(t,_toConsumableArray(r)),5),n.update(),g(n),exp(C(n).props().isCheckedAll).to.be.false,c(n,t,5);case 13:case"end":return e.stop()}},e,void 0)}))),it("selectAll 默认值为顶部的值 然后进行全选 limitCount: 5",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,defaultValue:["1"],defaultDisplayValue:[],canInput:!0,canSearch:!0,expandAll:!0,limitCount:5}));p(e),g(e),exp(C(e).props().isCheckedAll).to.be.true,c(e,["1","1.1","1.2","1.2.1","1.2.2"],5),g(e),exp(C(e).props().isCheckedAll).to.be.false,c(e,[],5)});var a=(_inherits(l,_react2.default.Component),_createClass(l,[{key:"render",value:function(){var e=this.state,t=this.props,a=e.value,n=e.displayValue,r=t.limitCount;return _react2.default.createElement(_2.default,{data:rowData,mutliple:!0,value:a,onChange:this.onChange,displayValue:n,canInput:!0,canSearch:!0,expandAll:!0,limitCount:r})}}]),l);function l(e){_classCallCheck(this,l);var a=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));a.onChange=function(e){var t={value:e.newValue,displayValue:e.newDisplayValue};a.setState(t)};var t=e.value,n=void 0===t?[]:t,r=e.displayValue,u=void 0===r?[]:r;return a.state={value:n,displayValue:u},a}function c(e,t,a){if(null!=a){var n=e.find(_index2.default.TreeSelectLimitTitle).text();exp(n.trim()).to.be.eql("已选择"+t.length+"个结点,最多可选"+a+"个结点.")}exp(function(e){return e.find(_index2.default.Tree).props().value}(e)).to.be.eql(t),exp(r(e)).to.be.eql(t)}function d(e){return e.map(function(e){return e.value})}function f(e){return e.map(function(e){return e.text})}function r(e){return o(e).props().value}function u(e){return o(e).props().displayValue}function p(e){(function(e){return e.find(_index2.default.InputTagFocuInput)})(e).simulate("click")}function o(e){return e.find(_index2.default.InputTag)}function i(e){return h(e).props().query}function s(e){x(e,40)}function _(e){x(e,16)}function m(e){x(e,17)}function v(e){x(e,13)}function x(e,t){A(e).simulate("keydown",{keyCode:t})}function h(e){return e.find(_index2.default.Tree).at(0)}function y(e){e.find(_index2.default.InputTagClearButton).simulate("click")}function w(e){e.find("RefreshButton").simulate("click")}function g(e){C(e).simulate("click")}function C(e){return e.find("CheckAllButton")}function b(e,t){A(e).simulate("change",{target:{value:t}})}function D(e){return A(e).props().value}function A(e){return e.find(_index2.default.Input).find("input").at(0)}it("selectAll limitCount: 5 受限组件",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(a,{limitCount:5}));p(e),g(e),exp(C(e).props().isCheckedAll).to.be.true,c(e,["1","1.1","1.2","1.2.1","1.2.2"],5),g(e),exp(C(e).props().isCheckedAll).to.be.false,c(e,[],5)}),it(" limitCount: 5 受限组件",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(a,{limitCount:5}));p(e),g(e),exp(C(e).props().isCheckedAll).to.be.true,c(e,["1","1.1","1.2","1.2.1","1.2.2"],5),g(e),exp(C(e).props().isCheckedAll).to.be.false,c(e,[],5),c(e,[],5)}),it("selectAll limitCount: 5 受限组件 有默认值 然后刷新",function(){var e=["1"],t=(0,_enzyme.mount)(_react2.default.createElement(a,{value:e,limitCount:5}));p(t),c(t,e,5),w(t),c(t,[],5),exp(i(t)).to.be.equal(""),exp(D(t)).to.be.equal("")}),it("selectAll 默认值为中间的值 然后进行全选 limitCount: 5",function(){var e=["2.2","2.2.1.1"],t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,defaultValue:e,defaultDisplayValue:[],canInput:!0,canSearch:!0,expandAll:!0,limitCount:5}));p(t),g(t),exp(C(t).props().isCheckedAll).to.be.true,c(t,[].concat(e,["1","1.1","1.2"])),g(t),exp(C(t).props().isCheckedAll).to.be.false,c(t,[])}),it("selectAll 默认值为底部的值 然后进行全选 limitCount: 5",function(){var e=["4","3.2","3.1"],t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,defaultValue:e,defaultDisplayValue:[],canInput:!0,canSearch:!0,expandAll:!0,limitCount:5}));p(t),g(t),exp(C(t).props().isCheckedAll).to.be.true,c(t,[].concat(e,["1","1.1"])),g(t),exp(C(t).props().isCheckedAll).to.be.false,c(t,[])}),it("非受限 刷新操作",_asyncToGenerator(_regenerator2.default.mark(function e(){var a,t,n,r,u,l;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0,t=new Promise(function(t){a=function(e){t(e)}}),n=void 0,r=new Promise(function(e){n=function(){e(!0)}}),"我么啊啊",p(u=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,onRefresh:n,onChange:a,mutliple:!0,defaultValue:"我么啊啊",defaultDisplayValue:"我么啊啊",canInput:!0,canSearch:!0,expandAll:!0,limitCount:5}))),w(u),exp(i(u)).to.be.equal(""),exp(D(u)).to.be.equal(""),c(u,[]),e.t0=exp,e.next=14,r;case 14:return e.t1=e.sent,(0,e.t0)(e.t1).to.be.eql(!0),l={newValue:[],oldValue:["我么啊啊"],newItem:[],oldItem:[],newDisplayValue:[]},e.t2=expect,e.next=20,t;case 20:e.t3=e.sent,e.t4=l,(0,e.t2)(e.t3).toEqual(e.t4);case 23:case"end":return e.stop()}},e,void 0)}))),it("非受限 没有值直接刷新 操作",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,onChange:function(){throw new Error("不应触发change事件")},mutliple:!0,canSearch:!0,canInput:!0,expandAll:!0,limitCount:5}));p(e),w(e),exp(i(e)).to.be.equal(""),exp(D(e)).to.be.equal(""),c(e,[])}),it("受限组件 清空值 clickRefresh(cmp); onChange",_asyncToGenerator(_regenerator2.default.mark(function e(){var a,n,r,t,u;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0,n=new Promise(function(t){a=function(e){t(e)}}),r="我么啊啊",t=_defineProperty({},_index2.default.TreeSelect,{width:100}),u=(0,_enzyme.mount)(_react2.default.createElement(_theme2.default,{config:t},_react2.default.createElement(_2.default,{data:rowData,onChange:a,mutliple:!0,value:r,displayValue:"我么啊啊",canInput:!0,canSearch:!0,expandAll:!0}))),e.next=8,(0,_reactTestUtils.delay)(0,_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(u),y(u),c(u,[r]),e.next=5,n;case 5:t=e.sent,a={newValue:[],oldValue:["我么啊啊"],newItem:[],oldItem:[],newDisplayValue:[]},expect(t).toEqual(a),c(u,[r]);case 9:case"end":return e.stop()}},e,void 0)})));case 8:case"end":return e.stop()}},e,void 0)}))),it("非受限组件 清空值 onChange",_asyncToGenerator(_regenerator2.default.mark(function e(){var a,n,t,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 1e3,a=void 0,n=new Promise(function(t){a=function(e){t(e)}}),"我么啊啊",t=_defineProperty({},_index2.default.TreeSelect,{width:100}),r=(0,_enzyme.mount)(_react2.default.createElement(_theme2.default,{config:t},_react2.default.createElement(_2.default,{data:rowData,onChange:a,mutliple:!0,limitCount:1e3,defaultValue:"我么啊啊",defaultDisplayValue:"我么啊啊",canInput:!0,canSearch:!0,expandAll:!0}))),e.next=9,(0,_reactTestUtils.delay)(0,_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(r),y(r),c(r,[],1e3),e.next=5,n;case 5:t=e.sent,a={newValue:[],oldValue:["我么啊啊"],newItem:[],oldItem:[],newDisplayValue:[]},expect(t).toEqual(a),c(r,[],1e3);case 9:case"end":return e.stop()}},e,void 0)})));case 9:case"end":return e.stop()}},e,void 0)}))),it("受限组件 全选操作 clickRefresh(cmp); onChange",_asyncToGenerator(_regenerator2.default.mark(function e(){var a,t,n,r,u,l,o;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0,t=new Promise(function(t){a=function(e){t(e)}}),r=n="我么啊啊",p(u=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,onChange:a,mutliple:!0,value:n,displayValue:r,canInput:!0,canSearch:!0,expandAll:!0}))),g(u),c(u,[n]),e.next=10,t;case 10:l=e.sent,o={newValue:[n].concat(_toConsumableArray(d(rowData))),oldValue:[n],newItem:[].concat(rowData),oldItem:[],newDisplayValue:[r].concat(_toConsumableArray(f(rowData)))},expect(l).toEqual(o);case 13:case"end":return e.stop()}},e,void 0)}))),it("受限组件 canInput: true  手工添加项 onChange",_asyncToGenerator(_regenerator2.default.mark(function e(){var a,t,n,r,u,l,o,i;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0,t=new Promise(function(t){a=function(e){t(e)}}),r=n="我么啊啊",u=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,onChange:a,mutliple:!0,value:n,displayValue:r,canInput:!0,canSearch:!0,expandAll:!0})),l="hello",p(u),b(u,l),v(u),c(u,[n]),e.next=12,t;case 12:o=e.sent,i={newValue:[n,l],oldValue:[n],newItem:[],oldItem:[],newDisplayValue:[r,l]},expect(o).toEqual(i);case 15:case"end":return e.stop()}},e,void 0)}))),it("非受限组件 选择全部  onChange",_asyncToGenerator(_regenerator2.default.mark(function e(){var a,t,n,r,u,l,o;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0,t=new Promise(function(t){a=function(e){t(e)}}),r=n="我么啊啊",p(u=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,onChange:a,mutliple:!0,value:n,displayValue:r,canInput:!0,canSearch:!0,expandAll:!0}))),g(u),c(u,[n]),e.next=10,t;case 10:l=e.sent,o={newValue:[n].concat(_toConsumableArray(d(rowData))),oldValue:[n],newItem:[].concat(rowData),oldItem:[],newDisplayValue:[r].concat(_toConsumableArray(f(rowData)))},expect(l).toEqual(o);case 13:case"end":return e.stop()}},e,void 0)}))),it("受限组件 选择全部  onChange",_asyncToGenerator(_regenerator2.default.mark(function e(){var a,t,n,r,u,l,o,i;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0,t=new Promise(function(t){a=function(e){t(e)}}),r=n="我么啊啊",p(u=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,onChange:a,mutliple:!0,defaultValue:n,defaultDisplayValue:r,canInput:!0,canSearch:!0,expandAll:!0}))),g(u),l=[n].concat(_toConsumableArray(d(rowData))),c(u,l),e.next=11,t;case 11:o=e.sent,i={newValue:l,oldValue:[n],newItem:[].concat(rowData),oldItem:[],newDisplayValue:[r].concat(_toConsumableArray(f(rowData)))},expect(o).toEqual(i);case 14:case"end":return e.stop()}},e,void 0)}))),it("selectAll limitCount: 5 caninput 先输入再选全部",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,canSearch:!0,canInput:!0,expandAll:!0,limitCount:5}))),b(t,"100"),v(t),exp(C(t).props().isCheckedAll).to.be.false,g(t),exp(C(t).props().isCheckedAll).to.be.true,a=rowData.filter(function(e,t){return t<4}).map(function(e){return e.value}),c(t,["100"].concat(_toConsumableArray(a)));case 10:case"end":return e.stop()}},e,void 0)}))),it("多选 选择第一个 onSelect 事件",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,n,r,u,l;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,a=new Promise(function(n){var r=[];t=function(e,t){var a={};a.value=e,a.displayValue=t,r.push(a),2===r.length&&n(r)}}),p(n=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,onSelect:t,canInput:!0,expandAll:!0,limitCount:5}))),n.find(_index2.default.Checkbox).at(0).simulate("click"),r=rowData.filter(function(e,t){return t<5}).map(function(e){return e.value}),u=rowData.filter(function(e,t){return t<5}).map(function(e){return e.text}),n.find(_index2.default.Checkbox).at(0).simulate("click"),e.next=10,a;case 10:l=e.sent,expect(l).toEqual([{value:r,displayValue:u},{value:[],displayValue:[]}]);case 12:case"end":return e.stop()}},e,void 0)}))),it("单选 选择第一个 onSelect 事件",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,n,r,u,l;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,a=new Promise(function(n){var r=[];t=function(e,t){var a={};a.value=e,a.displayValue=t,r.push(a),2===r.length&&n(r)}}),p(n=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,onSelect:t,canSearch:!0,canInput:!0,expandAll:!0,limitCount:5}))),n.find("titleSpan").at(0).simulate("click"),r=rowData.filter(function(e,t){return t<1}).map(function(e){return e.value}),u=rowData.filter(function(e,t){return t<1}).map(function(e){return e.text}),n.find("titleSpan").at(0).simulate("click"),e.next=10,a;case 10:l=e.sent,expect(l).toEqual([{value:r,displayValue:u},{value:[""],displayValue:[""]}]);case 12:case"end":return e.stop()}},e,void 0)}))),it("selectAll onSelect 事件",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,n,r,u,l,o;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,a=new Promise(function(n){var r=[];t=function(e,t){var a={};a.value=e,a.displayValue=t,r.push(a),2===r.length&&n(r)}}),p(n=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,onSelect:t,canInput:!0,expandAll:!0,limitCount:5}))),g(n),r=rowData.filter(function(e,t){return t<5}).map(function(e){return e.value}),u=rowData.filter(function(e,t){return t<5}).map(function(e){return e.text}),g(n),e.next=10,a;case 10:l=e.sent,o=[{value:r,displayValue:u},{value:[],displayValue:[]}],expect(l).toEqual(o);case 13:case"end":return e.stop()}},e,void 0)}))),it("没有任何结点可以选择的情况  全选框状态应该是未选中",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[{value:"1",text:"1"},{value:"2",text:"2"},{value:"3",text:"3"},{value:"4",text:"4"},{value:"5",text:"5"},{value:"6",text:"6"},{value:"7",text:"7"},{value:"8",text:"8"},{value:"9",text:"9"},{value:"10",text:"10"},{value:"11",text:"11"},{value:"12",text:"12"},{value:"13",text:"13"},{value:"14",text:"14"},{value:"15",text:"15"},{value:"16",text:"16"},{value:"17",text:"17"},{value:"18",text:"18"},{value:"19",text:"19"},{value:"20",text:"20"},{value:"21",text:"21"},{value:"22",text:"22"},{value:"23",text:"23"},{value:"24",text:"24"},{value:"25",text:"25"},{value:"26",text:"26"},{value:"27",text:"27"},{value:"28",text:"28"},{value:"29",text:"29"},{value:"30",text:"30"},{value:"31",text:"31"},{value:"32",text:"32"},{value:"33",text:"33"},{value:"34",text:"34"},{value:"35",text:"35"},{value:"36",text:"36"},{value:"37",text:"37"},{value:"38",text:"38"},{value:"39",text:"39"},{value:"40",text:"40"},{value:"41",text:"41"},{value:"42",text:"42"},{value:"43",text:"43"},{value:"44",text:"44"},{value:"45",text:"45"},{value:"46",text:"46"},{value:"47",text:"47"},{value:"48",text:"48"},{value:"49",text:"49"},{value:"50",text:"50"},{value:"51",text:"51"},{value:"52",text:"52"},{value:"53",text:"53"},{value:"54",text:"54"},{value:"55",text:"55"}],p(a=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:t,mutliple:!0,canSearch:!0,canInput:!0,onlySelectLeaf:!0,expandAll:!0,limitCount:5}))),exp(C(a).props().isCheckedAll).to.be.false,g(a),exp(C(a).props().isCheckedAll).to.be.false,c(a,[]);case 7:case"end":return e.stop()}},e,void 0)}))),it("键盘子节点选择问题 shift选择 父节点",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,expandAll:!0}))),s(t),_(t),p(t),p(t),t.update(),c(t,["1"]);case 8:case"end":return e.stop()}},e,void 0)}))),it("键盘子节点选择问题 shift选择 子节点",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,canSearch:!0,mutliple:!0,expandAll:!0}))),s(t),s(t),_(t),c(t,["1.1"]);case 6:case"end":return e.stop()}},e,void 0)}))),it("键盘子节点选择问题 shift选择 子节点",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,expandAll:!0}))),s(t),s(t),_(t),c(t,["1.1"]);case 6:case"end":return e.stop()}},e,void 0)}))),it("键盘子节点选择问题 ctrl选择 父节点",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,expandAll:!0}))),s(t),m(t),a=rowData.filter(function(e){return"1"==e.value||e.path&&e.path.startsWith("1")}).map(function(e){return e.value}),c(t,a);case 6:case"end":return e.stop()}},e,void 0)}))),it("键盘子节点选择问题 ctrl选择 子节点",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,mutliple:!0,expandAll:!0}))),s(t),s(t),m(t),c(t,["1.1"]);case 6:case"end":return e.stop()}},e,void 0)}))),it("点击删除查询内容",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,n,a,r,u;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="hello",n=void 0,a=new Promise(function(t){var a=[];n=function(e){a.push(e),2===a.length&&t(a)}}),p(r=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,value:t,throttle:0,onQuery:n,mutliple:!0,canSearch:!0,expandAll:!0}))),b(r,u="hello"),exp(D(r)).to.be.equal(u),exp(h(r).props().query).to.be.equal(u),exp(h(r).props().value).to.be.eql([t]),r.find("ClearButton").simulate("click"),exp(D(r)).to.be.equal(""),exp(h(r).props().query).to.be.equal(""),exp(h(r).props().value).to.be.eql([t]),e.t0=exp,e.next=17,a;case 17:e.t1=e.sent,e.t2=[u,""],(0,e.t0)(e.t1).to.be.eql(e.t2);case 20:case"end":return e.stop()}},e,void 0)}))),it("弹出->输入查询条件->收齐->弹出面板 要触发onQuery为空的事件",_asyncToGenerator(_regenerator2.default.mark(function e(){var n,t,a,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"hello",n=void 0,t=new Promise(function(t){var a=[];n=function(e){a.push(e),2===a.length&&t(a)}}),a=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,value:"hello",throttle:0,onQuery:n,canSearch:!0,mutliple:!0,expandAll:!0})),r="hello",p(a),b(a,r),p(a),p(a),a.update(),e.t0=exp,e.next=13,t;case 13:e.t1=e.sent,e.t2=[r,""],(0,e.t0)(e.t1).to.be.eql(e.t2);case 16:case"end":return e.stop()}},e,void 0)}))),it("弹出->输入查询条件->刷新按钮 要触发onQuery为空的事件",_asyncToGenerator(_regenerator2.default.mark(function e(){var n,t,a,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"hello",n=void 0,t=new Promise(function(t){var a=[];n=function(e){a.push(e),2===a.length&&t(a)}}),a=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,value:"hello",throttle:0,onQuery:n,mutliple:!0,canSearch:!0,expandAll:!0})),r="hello",p(a),b(a,r),w(a),e.t0=exp,e.next=11,t;case 11:e.t1=e.sent,e.t2=[r,""],(0,e.t0)(e.t1).to.be.eql(e.t2);case 14:case"end":return e.stop()}},e,void 0)}))),it("多选  canInput: true, 弹出->输入查询条件->点击添加项->输入查询条件->查询框回车 要触发onQuery为空的事件",_asyncToGenerator(_regenerator2.default.mark(function e(){var n,t,a,r,u;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,t=new Promise(function(t){var a=[];n=function(e){a.push(e),2===a.length&&t(a)}}),a=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,canInput:!0,throttle:0,onQuery:n,mutliple:!0,canSearch:!0,expandAll:!0})),r="hello",p(a),b(a,r),v(a),c(a,[r]),b(a,u="kxy"),v(a),c(a,[r,u]),e.t0=exp,e.next=15,t;case 15:e.t1=e.sent,e.t2=[r,"",u,""],(0,e.t0)(e.t1).to.be.eql(e.t2);case 18:case"end":return e.stop()}},e,void 0)}))),it("单选  canInput: true, 弹出->输入查询条件->点击添加项->输入查询条件->查询框回车 要触发onQuery为空的事件",_asyncToGenerator(_regenerator2.default.mark(function e(){var n,t,a,r,u;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,t=new Promise(function(t){var a=[];n=function(e){a.push(e),2===a.length&&t(a)}}),a=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,canSearch:!0,canInput:!0,throttle:0,onQuery:n,expandAll:!0})),r="hello",p(a),b(a,r),v(a),c(a,[r]),b(a,u="kxy"),v(a),c(a,[u]),e.t0=exp,e.next=15,t;case 15:e.t1=e.sent,e.t2=[r,"",u,""],(0,e.t0)(e.t1).to.be.eql(e.t2);case 18:case"end":return e.stop()}},e,void 0)}))),it("单选 只value设置值",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t="hello",a=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,value:t,throttle:0,expandAll:!0})),exp(r(a)).to.be.eql([t]),exp(u(a)).to.be.eql([t]);case 4:case"end":return e.stop()}},e,void 0)}))),it("单选 value displayValue",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"0","hello",t=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,value:"0",displayValue:"hello",throttle:0,expandAll:!0})),exp(r(t)).to.be.eql(["0"]),exp(u(t)).to.be.eql(["hello"]);case 5:case"end":return e.stop()}},e,void 0)}))),it("多选 value displayValue 逗号分隔",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,n;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t="1,2,3,4",n=(0,_enzyme.mount)(_react2.default.createElement(_2.default,{data:rowData,value:t,displayValue:a,throttle:0,expandAll:!0})),exp(r(n)).to.be.eql([t]),exp(u(n)).to.be.eql([a]);case 5:case"end":return e.stop()}},e,void 0)})))});