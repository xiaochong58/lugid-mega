"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),_templateObject=_taggedTemplateLiteral(["\n    position: relative;\n  "],["\n    position: relative;\n  "]),_templateObject2=_taggedTemplateLiteral(["\n    text-align: inherit;\n    overflow: hidden;\n    white-space: nowrap;\n  "],["\n    text-align: inherit;\n    overflow: hidden;\n    white-space: nowrap;\n  "]),_templateObject3=_taggedTemplateLiteral(["\n    line-height: 1.5;\n  "],["\n    line-height: 1.5;\n  "]),_templateObject4=_taggedTemplateLiteral(["\n    position: absolute;\n    top: 0;\n  "],["\n    position: absolute;\n    top: 0;\n  "]),_templateObject5=_taggedTemplateLiteral(["\n    position: relative;\n    text-align: center;\n  "],["\n    position: relative;\n    text-align: center;\n  "]),_templateObject6=_taggedTemplateLiteral(["\n    position: relative;\n    left: ",";\n    z-index: 2;\n  "],["\n    position: relative;\n    left: ",";\n    z-index: 2;\n  "]),_templateObject7=_taggedTemplateLiteral(["\n    position: absolute;\n    left: ",";\n    z-index: 3;\n    border-radius: 50%;\n    transition: all 0.3s linear 0.1s;\n  "],["\n    position: absolute;\n    left: ",";\n    z-index: 3;\n    border-radius: 50%;\n    transition: all 0.3s linear 0.1s;\n  "]),_templateObject8=_taggedTemplateLiteral(["\n                      from {\n                        transform: rotate(0deg);\n                      }\n                      \n                      to {\n                        transform: rotate(359deg);\n                      }\n                  "],["\n                      from {\n                        transform: rotate(0deg);\n                      }\n                      \n                      to {\n                        transform: rotate(359deg);\n                      }\n                  "]),_templateObject9=_taggedTemplateLiteral(["\n                    ",";\n                    animation: "," 1s linear infinite;\n                  "],["\n                    ",";\n                    animation: "," 1s linear infinite;\n                  "]);require("../common/shirm");var _react=require("react"),React=_interopRequireWildcard(_react),_index=require("../consts/index"),_index2=_interopRequireDefault(_index),_StringUtils=require("../common/StringUtils"),_typeUtils=require("@lugia/type-utils"),_themeProvider=require("../theme-provider"),_themeProvider2=_interopRequireDefault(_themeProvider),_icon=require("../icon"),_icon2=_interopRequireDefault(_icon),_tooltip=require("../tooltip"),_tooltip2=_interopRequireDefault(_tooltip),_objectUtils=require("@lugia/object-utils"),_themeCssHoc=require("@lugia/theme-css-hoc"),_themeCssHoc2=_interopRequireDefault(_themeCssHoc),_css=require("@lugia/css"),_themeCommonDict=require("../css/theme-common-dict"),_themeCommonDict2=_interopRequireDefault(_themeCommonDict);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _taggedTemplateLiteral(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var px2remcss=_css.units.px2remcss,themeColor="$lugia-dict.@lugia/lugia-web.themeColor",successColor="$lugia-dict.@lugia/lugia-web.successColor",dangerColor="$lugia-dict.@lugia/lugia-web.dangerColor",blackColor="$lugia-dict.@lugia/lugia-web.blackColor",darkGreyColor="$lugia-dict.@lugia/lugia-web.darkGreyColor",lightGreyColor="$lugia-dict.@lugia/lugia-web.lightGreyColor",superLightColor="$lugia-dict.@lugia/lugia-web.superLightColor",ItemContainer=(0,_themeCssHoc2.default)({tag:"div",className:"TimeLineItemContainer",normal:{selectNames:[["width"],["height"],["margin"],["padding"]],getCSS:function(e,t){var i=t.propsConfig,n=i.maxWidth;if("right"!==i.mode)return"transform: translateX("+n+"px);"},defaultTheme:{width:"min-content"}},css:(0,_themeCssHoc.css)(_templateObject)}),BaseText=(0,_themeCssHoc2.default)({tag:"div",className:"TimeLineItemBaseText",normal:{selectNames:[["width"],["height"],["font"],["fontSize"],["color"]]},css:(0,_themeCssHoc.css)(_templateObject2)}),Description=(0,_themeCssHoc2.default)({tag:"div",className:"TimeLineItemBaseText",normal:{selectNames:[["width"],["height"],["font"],["fontSize"],["color"]],defaultTheme:{color:darkGreyColor}},css:(0,_themeCssHoc.css)(_templateObject3)}),Time=(0,_themeCssHoc2.default)({extend:BaseText,className:"TimeLineItemBaseText",normal:{selectNames:[["width"],["height"],["font"],["fontSize"],["color"]],defaultTheme:{color:blackColor}}}),Content=(0,_themeCssHoc2.default)({extend:BaseText,className:"TimeLineItemContent",normal:{selectNames:[["width"],["height"],["margin"],["padding"]],getCSS:function(e,t){var i=t.propsConfig.direction,n="left"===i?"right":"left";return"text-align: "+n+";"+n+":"+("left"===i?"100%":px2remcss(20))+"; "}},css:(0,_themeCssHoc.css)(_templateObject4)}),DotContainer=(0,_themeCssHoc2.default)({tag:"div",className:"TimeLineItemDotContainer",normal:{selectNames:[["width"],["height"],["margin"],["padding"]],defaultTheme:{width:20}},css:(0,_themeCssHoc.css)(_templateObject5)}),Line=(0,_themeCssHoc2.default)({tag:"div",className:"TimeLineItemLine",normal:{selectNames:[["width"],["height"],["background"]],getCSS:function(e,t){var i=e.background,n=t.propsConfig.isLast?"none":"",r=i&&i.color?i.color:(0,_themeCommonDict2.default)("superLightColor");return"display:"+n+";\n         border-left: "+px2remcss(1)+" solid "+r+";\n      "}},css:(0,_themeCssHoc.css)(_templateObject6,px2remcss(10))}),Dot=(0,_themeCssHoc2.default)({tag:"div",className:"TimeLineItemDot",normal:{selectNames:[["width"],["height"],["background"]],defaultTheme:{width:10,height:10},getThemeMeta:function(e,t){var i=e.background,n=t.propsConfig.status;return{background:{color:i&&i.color?i.color:"success"===n?successColor:"failed"===n?dangerColor:themeColor}}}},css:(0,_themeCssHoc.css)(_templateObject7,px2remcss(5.5))}),ExplainDot=(0,_themeCssHoc2.default)({tag:"div",className:"TimeLineItemExplainDot",normal:{selectNames:[["width"],["height"],["margin"],["padding"],["background"]],defaultTheme:{width:6,height:6,background:{color:lightGreyColor}}},hover:{selectNames:[["background"]],defaultTheme:{background:{color:themeColor}}},css:(0,_themeCssHoc.css)(_templateObject7,px2remcss(7.5)),option:{hover:!0}}),TimeLineItem=function(){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state={_renderHeight:!1},t.desc=React.createRef(),t}return _inherits(i,_react.Component),_createClass(i,[{key:"getHeightByType",value:function(e,t){return{height:this.descHeight&&54<this.descHeight?this.descHeight+20:"explain"===e?24:t?54:42}}},{key:"getLineHeightByType",value:function(e,t){return{height:t?"inherit":"100%"}}},{key:"componentDidMount",value:function(){if(this.desc.current){this.descHeight=this.desc.current.offsetHeight,this.descWidth=this.desc.current.offsetWidth;var e=this.props,t=e.getChildDirectionAndWidth,i=e.direction;t&&t({direction:i,width:this.descWidth}),this.setState({_renderHeight:!0})}}},{key:"render",value:function(){var e=this.props,t=e.description,i=e.time,n=e.isLast,r=e.direction,o=e.timeLineType,s=e.mode,a=e._leftMaxWidth,l="explain"!==o?i:"",c=(0,_objectUtils.deepMerge)({themeConfig:{normal:this.getHeightByType(o,this.props.description)}},this.props.getPartOfThemeProps("TimeLineItemContainer",{props:{maxWidth:a,mode:s}})),m=(0,_objectUtils.deepMerge)({themeConfig:{normal:this.getLineHeightByType(o,this.props.description)}},this.props.getPartOfThemeProps("TimeLineItemLine",{props:{isLast:n,description:t,timeLineType:o}}));return React.createElement(ItemContainer,{themeProps:c,description:t,timeLineType:o},React.createElement(DotContainer,{themeProps:this.props.themeProps},this.getDot()),React.createElement(Line,{themeProps:m}),React.createElement(Content,{themeProps:this.props.getPartOfThemeProps("TimeLineItemContentContainer",{props:{direction:r}})},React.createElement(Time,{themeProps:this.props.themeProps},l," "),this.getDescription()))}},{key:"getDot",value:function(){var e=this.props,t=e.icon,i=e.timeLineType,n=e.pending,r=e.pendingDot,o=e.isLast,s=e.time,a=e.description;if("explain"===i){var l=this.props.getPartOfThemeHocProps("TimeLineItemTip"),c=l.theme,m=l.viewClass,p=(0,_objectUtils.deepMerge)(_defineProperty({},m,{TooltipContent:{normal:{fontSize:12,background:{color:superLightColor},padding:{top:6,bottom:6,left:8,right:8}}},ChildrenContainer:{normal:{getCSS:function(){return"display:block;"}}}}),c);return React.createElement(_tooltip2.default,{theme:p,viewClass:m,placement:"right",popArrowType:"round",title:(0,_StringUtils.getString)(s),description:(0,_StringUtils.getString)(a),action:"hover"},this.getExplainDot())}var h=this.props.getPartOfThemeHocProps("TimeLineIcon"),u=h.theme,d=h.viewClass,g=(0,_objectUtils.deepMerge)(_defineProperty({},d,{normal:{getCSS:function(e,t){var i=t.propsConfig.pending,n=!0===i?1:3,r=(0,_themeCssHoc.keyframes)(_templateObject8),o="\n                position: absolute;\n                user-select: none;\n                text-align: center;\n                font-size: 1.4rem;\n                left: "+px2remcss(3.5)+";\n                z-index: "+n+";";return i?(0,_themeCssHoc.css)(_templateObject9,o,r):o}}}),u);if(!0===n&&o&&r)return _typeUtils.ObjectUtils.isString(r)?React.createElement(_icon2.default,{singleTheme:!0,viewClass:d,theme:g,propsConfig:{pending:n},iconClass:r}):r;if("icon"===i&&(0,_StringUtils.getString)(t))return React.createElement(_icon2.default,{singleTheme:!0,viewClass:d,theme:g,iconClass:t});var f=this.props.status;return React.createElement(Dot,{themeProps:this.props.getPartOfThemeProps("TimeLineDot",{props:{status:f}})})}},{key:"getExplainDot",value:function(){if("explain"===this.props.timeLineType)return React.createElement(ExplainDot,{themeProps:this.props.getPartOfThemeProps("TimeLineExplainDot")})}},{key:"getDescription",value:function(){var e=this.props,t=e.timeLineType,i=e.description;return"explain"!==t&&(0,_StringUtils.getString)(i)?React.createElement(Description,{ref:this.desc,themeProps:this.props.themeProps},i):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){}}]),i}();TimeLineItem.defaultProps={status:"normal"};var TargetTimeLineItem=(0,_themeProvider2.default)(TimeLineItem,_index2.default.TimeLineItem);exports.default=TargetTimeLineItem;