"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function r(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}(),_react=require("react"),React=_interopRequireWildcard(_react),_objectUtils=require("@lugia/object-utils"),_themeProvider=require("../theme-provider"),_themeProvider2=_interopRequireDefault(_themeProvider),_index=require("../consts/index"),_index2=_interopRequireDefault(_index),_alert=require("../css/alert"),_utilsColor=require("../css/utilsColor"),_utilsColor2=_interopRequireDefault(_utilsColor),_stateColor=require("../css/stateColor"),_stateColor2=_interopRequireDefault(_stateColor),_icon=require("../icon"),_icon2=_interopRequireDefault(_icon);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var AlertIcons={info:"lugia-icon-reminder_info_circle_o",success:"lugia-icon-reminder_check_circle_o",error:"lugia-icon-reminder_close_circle_o",warning:"lugia-icon-reminder_exclamation_circle_o"},_colorsFunc=(0,_stateColor2.default)(),themeColor=_colorsFunc.themeColor,successColor=_colorsFunc.successColor,warningColor=_colorsFunc.warningColor,dangerColor=_colorsFunc.dangerColor,TypeThemeProps={info:{normal:{color:themeColor,border:{left:{color:themeColor,style:"solid",width:4},radius:{topLeft:4,topRight:4,bottomLeft:4,bottomRight:4}},background:{color:(0,_utilsColor2.default)(themeColor,0,0,20).rgba}}},success:{normal:{color:successColor,border:{left:{color:successColor,style:"solid",width:4},radius:{topLeft:4,topRight:4,bottomLeft:4,bottomRight:4}},background:{color:(0,_utilsColor2.default)(successColor,0,0,20).rgba}}},warning:{normal:{color:warningColor,border:{left:{color:warningColor,style:"solid",width:4},radius:{topLeft:4,topRight:4,bottomLeft:4,bottomRight:4}},background:{color:(0,_utilsColor2.default)(warningColor,0,0,20).rgba}}},error:{normal:{color:dangerColor,border:{left:{color:dangerColor,style:"solid",width:4},radius:{topLeft:4,topRight:4,bottomLeft:4,bottomRight:4}},background:{color:(0,_utilsColor2.default)(dangerColor,0,0,20).rgba}}}};exports.default=(0,_themeProvider2.default)(function(){function e(){_classCallCheck(this,e);var c=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return c.getAlertIconTheme=function(){var e=c.props,t=e.getPartOfThemeHocProps,o=e.type,r=void 0===o?"info":o,n=t("AlertIcon"),i=n.viewClass,l=n.theme,s=c.isInProps("description"),a=_alert.TypeCSS[r]||_alert.TypeCSS.info;return{viewClass:i,theme:(0,_objectUtils.deepMerge)(_defineProperty({},i,{normal:{font:{size:s?20:14},cursor:"default",color:a.color,getCSS:function(){return"\n                      position: absolute;\n                      "+(0,_alert.getPosition)({hasDect:s})+";\n                    "}}}),l)}},c.getCloseText=function(){var e=c.props,t=e.closeText,o=e.type,r=void 0===o?"info":o,n=(0,e.getPartOfThemeProps)("CloseText");return n.propsConfig={textInProps:c.isInProps("closeText"),type:r},React.createElement(_alert.CloseText,{onClick:c.handleClose,themeProps:n,type:r,hasDect:c.isInProps("description")},t||React.createElement(_alert.CloseIcon,{iconClass:"lugia-icon-reminder_close"}))},c.handleClose=function(e){var t=c.props.onClose;e.preventDefault(),c.setState({animateStart:!0}),t&&t(e),setTimeout(function(){c.setState({visible:!1})},250)},c.state={visible:!0,animateStart:!1,height:0},c}return _inherits(e,React.Component),_createClass(e,[{key:"componentDidMount",value:function(){var e=this.alert&&this.alert.offsetHeight;this.setState({height:e})}},{key:"getDefaultTheme",value:function(e){return TypeThemeProps[e]?TypeThemeProps[e]:TypeThemeProps.info}},{key:"render",value:function(){var t=this,e=this.props,o=e.type,r=void 0===o?"info":o,n=e.showIcon,i=void 0!==n&&n,l=e.message,s=void 0===l?"警告提示":l,a=e.closable,c=void 0!==a&&a,u=e.description,p=e.icon,f=e.getPartOfThemeProps,h=this.state,_=h.visible,d=h.height,g=h.animateStart,m=this.isInProps("description"),C=f("Container"),b=f("AlertMessage"),y=f("AlertDescription");f("AlertIcon").propsConfig={hasDect:m,type:r};var v=this.getDefaultTheme(r);return C.themeConfig=(0,_objectUtils.deepMerge)(v,C.themeConfig),C.propsConfig.hasDect=m,C.propsConfig.showIcon=i,b.propsConfig.hasDect=m,_?React.createElement(_alert.Alert,{ref:function(e){return t.alert=e},type:r,showIcon:i,visible:_,animateStart:g,height:d,hasDect:m,themeProps:C},i?React.createElement(_icon2.default,Object.assign({iconClass:p||AlertIcons[r]},this.getAlertIconTheme(),{singleTheme:!0})):null,React.createElement(_alert.Message,{hasDect:m,showIcon:i,themeProps:b},s),React.createElement(_alert.Description,{showIcon:i,themeProps:y},u),c&&this.getCloseText()):null}},{key:"isInProps",value:function(e){return e in this.props}}]),e}(),_index2.default.Alert);