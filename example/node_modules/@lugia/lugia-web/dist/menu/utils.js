"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getExpandDataOrSelectData=void 0,exports.isRoot=isRoot,exports.getSelectedKeys=getSelectedKeys,exports.getPopupVisible=getPopupVisible,exports.getTargetOrDefaultTarget=getTargetOrDefaultTarget,exports.getTargetOrDefaultTargetLazy=getTargetOrDefaultTargetLazy,exports.getexpandedPathInProps=getexpandedPathInProps,exports.getExpandedPath=getExpandedPath,exports.recurDataAndGetSelectedKeys=recurDataAndGetSelectedKeys,exports.getCascaderKeys=getCascaderKeys,exports.letExpandpathOrSelectedKeysToArray=letExpandpathOrSelectedKeysToArray,exports.getExpandedPathFromPropsOrState=getExpandedPathFromPropsOrState,exports.getExpandedData=getExpandedData,exports.getChildData=getChildData,exports.getInitChildData=getInitChildData,exports.getInitAllChildData=getInitAllChildData,exports.mapGetAllChildData=mapGetAllChildData,exports.getTreeData=getTreeData,exports.recurTreeData=recurTreeData;var _react=require("react"),React=_interopRequireWildcard(_react);function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function _objectWithoutProperties(e,t){var a={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}var EmptyData=[];function isRoot(e){return 0===e}function getSelectedKeys(e,t){var a=e.selectedKeys,r=void 0===a?[]:a,n=e.defaultSelectedKeys;return"selectedKeys"in e?r:"defaultSelectedKeys"in e?void 0===n?[]:n:t?t.selectedKeys:[]}function getPopupVisible(e,t){var a=e.popupVisible;return!("popupVisible"in e)||(void 0===a||a)}function getTargetOrDefaultTarget(e,t,a){return e?t:a}function getTargetOrDefaultTargetLazy(e,t,a){return getTargetOrDefaultTarget(e,t,a)()}function getexpandedPathInProps(e){return"expandedPath"in e}function getExpandedPath(e,t){var a=e.expandedPath,r=void 0===a?[]:a;return getexpandedPathInProps(e)?r:t?t.expandedPath:[]}function recurDataAndGetSelectedKeys(e,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(r&&0!==r.length){var d=r[0];e&&e.forEach(function(e){var t=e.value;if(t===d){n.push(t);var a=e.children;a&&0<a.length&&(r.splice(0,1),recurDataAndGetSelectedKeys(a,r,n))}})}}function getCascaderKeys(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];return e&&0!==e.length?e[0].split(t):[]}var getExpandDataOrSelectData=exports.getExpandDataOrSelectData=letExpandpathOrSelectedKeysToArray;function letExpandpathOrSelectedKeysToArray(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],a=[];if(!e||!t||0===t.length)return a;var r=e.separator;return recurDataAndGetSelectedKeys(e.data,getCascaderKeys(t,r),a),a}function getExpandedPathFromPropsOrState(e,t){var a="expandedPath"in e,r=t.expandedPath,n=void 0===r?[]:r,d=e.expandedPath;return a?void 0===d?[]:d:n}function getExpandedData(e,t){var a=e.expandedData,r=void 0===a?[]:a,n=e.level,d=getExpandedPathFromPropsOrState(e,t);return getTargetOrDefaultTargetLazy(isRoot(n),function(){return getExpandDataOrSelectData(e,d)},function(){return r})}function getChildData(e,t){var a=e.level,r=e.allChildData;return 0===getExpandedData(e,t).length?EmptyData:getTargetOrDefaultTargetLazy(isRoot(a),function(){return getInitAllChildData(e,t)},function(){return r})[a]}function getInitChildData(e,t){return t?t?0===getExpandedPathFromPropsOrState(e,t).length?EmptyData:getChildData(e,t)||EmptyData:void 0:EmptyData}function getInitAllChildData(e,t){return mapGetAllChildData(e.data,getExpandedData(e,t),0)}function mapGetAllChildData(e,t,a){var r={};if(!t||0===t.length)return r;var n=t[a],d=e&&e.find(function(e){var t=e.value,a=e.children;return t===n&&a&&0<a.length});if(d){var i=d.children;r[a]=i,r=Object.assign({},r,mapGetAllChildData(i,t,a+1))}return r}function getTreeData(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/",a=[],r=e.data,n=e.valueField,d=void 0===n?"value":n,i=e.displayField,l=void 0===i?"text":i,o=e.pathField,p=void 0===o?"path":o,u=e.pidField,s=void 0===u?"pid":u;return r&&0<r.length&&recurTreeData(r,a,{},{displayField:l,valueField:d,pathSeparator:t,pathField:p,pidField:s}),a}function recurTreeData(e,o,t){var p=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},u=t.parentKey,a=t.parentPath,s=void 0===a?[]:a,r=p.displayField,g=void 0===r?"text":r,n=p.valueField,c=void 0===n?"value":n,h=p.pathSeparator,d=p.pathField,v=void 0===d?"path":d,i=p.pidField,f=void 0===i?"pid":i,D=p.onAdd;e&&e.forEach(function(e){var t=e.children,a=e[c],r=e[g],n=_objectWithoutProperties(e,["children",c,g]),d=Object.assign({},n);d[f]=u,d[c]=a+"",d[g]=r;var i=void 0;u?(-1===s.indexOf(u)&&s.push(u),i=[].concat(_toConsumableArray(s)),d[v]=i.join(h)):i=[];var l=d.isLeaf=!t||0===t.length;o.push(d),D&&D(d),l||recurTreeData(t,o,{parentKey:e[c]+"",parentPath:i},p)})}