"use strict";var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var u,c=e[Symbol.iterator]();!(n=(u=c.next()).done)&&(a.push(u.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_react=require("react"),_react2=_interopRequireDefault(_react);require("jest-styled-components");var _enzyme=require("enzyme"),_enzyme2=_interopRequireDefault(_enzyme),_enzymeAdapterReact=require("enzyme-adapter-react-16"),_enzymeAdapterReact2=_interopRequireDefault(_enzymeAdapterReact),_index=require("../index"),_index2=_interopRequireDefault(_index),_demo=require("../demo"),_demo2=_interopRequireDefault(_demo),_reactTestRenderer=require("react-test-renderer"),_reactTestRenderer2=_interopRequireDefault(_reactTestRenderer),_KeyCode=require("../../consts/KeyCode"),_reactTestUtils=require("@lugia/react-test-utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var c=e.apply(this,arguments);return new Promise(function(o,u){return function t(e,a){try{var n=c[e](a),r=n.value}catch(e){return void u(e)}if(!n.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});o(r)}("next")})}}_enzyme2.default.configure({adapter:new _enzymeAdapterReact2.default}),describe("Switch",function(){function l(e){return e.find("SwitchComponent").at(0).instance()}function n(e,t){return e.handleKeyDown({keyCode:t})}function e(e,o,u,c,t){var d=4<arguments.length&&void 0!==t?t:[];it("props: onchange "+e+" ",function(e){var t=0,a=d.length,n=jest.fn(function(){++t===a&&e()}),r=l((0,_enzyme.mount)(_react2.default.createElement(_index2.default,Object.assign({},o,{onChange:n}))));u?u.forEach(function(e,t){r.handleKeyDown({keyCode:e}),expect(r.state.value).toBe(c[t])}):(r.mouseup(),expect(r.state.value).toBe(c[0])),o.loading||o.disabled?(expect(n.mock.calls.length).toBe(0),e()):(expect(n.mock.calls.length).toBe(a),0===a&&e(),n.mock.calls.forEach(function(e,t){var a=_slicedToArray(e,1)[0];expect(Object.keys(a)).toEqual(["newValue","oldValue","newItem","oldItem","event"]),delete a.event,expect(a).toEqual(d[t])}))})}it("Wrapper",function(){var e=_react2.default.createElement(_demo2.default,null);expect(_reactTestRenderer2.default.create(e).toJSON()).toMatchSnapshot()}),it("small",function(){var e=l((0,_enzyme.mount)(_react2.default.createElement(_index2.default,{size:"small"})));expect(e.props.size).toBe("small")}),it("data.length=3 isInverse ",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{data:[{text:"年"},{text:"月"},{text:"日"}],isInverse:!1})),a=l(t),expect(a.state.text).toBe("月");case 3:case"end":return e.stop()}},e,void 0)}))),it("isInverse & data.length=2",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{data:[{text:"开"},{text:"关"}],isInverse:!0,defaultValue:!0})),a=l(t),expect(a.state.text).toBe("开");case 3:case"end":return e.stop()}},e,void 0)}))),it("data.length=1",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{data:[{text:"开"}],isInverse:!0})),a=l(t),expect(a.state.text).toBe("");case 3:case"end":return e.stop()}},e,void 0)}))),it("data.length=0",function(){var e=l((0,_enzyme.mount)(_react2.default.createElement(_index2.default,{data:[]})));expect(e.state.text).toBe("")}),it("data null",function(){var e=l((0,_enzyme.mount)(_react2.default.createElement(_index2.default,{data:[null]})));expect(e.state.text).toBe("")}),it("data null null",function(){var e=l((0,_enzyme.mount)(_react2.default.createElement(_index2.default,{data:[null,null]})));expect(e.state.text).toBe("")}),it("data undefined",function(){var e=l((0,_enzyme.mount)(_react2.default.createElement(_index2.default,{data:[void 0]})));expect(e.state.text).toBe("")}),it("data undefined,undefined",function(){var e=l((0,_enzyme.mount)(_react2.default.createElement(_index2.default,{data:[void 0,void 0]})));expect(e.state.text).toBe("")}),it("data null, 关",function(){var e=l((0,_enzyme.mount)(_react2.default.createElement(_index2.default,{data:[null,{text:"月"}]})));expect(e.state.text).toBe("月")}),it("displayFiled",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{displayFiled:"left",data:[{left:"年",name:"ppp"},{left:"月",name:"ww"}]})),a=l(t),expect(a.state.text).toBe("月");case 3:case"end":return e.stop()}},e,void 0)}))),it("no  displayFiled",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{data:[{left:"年",name:"ppp"},{left:"月",name:"ww"}]})),a=l(t),expect(a.state.text).toBe(void 0);case 3:case"end":return e.stop()}},e,void 0)}))),it("no  displayFiled have text",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{data:[{text:"日",left:"年",name:"ppp"},{text:"时",left:"月",name:"ww"}]})),a=l(t),expect(a.state.text).toBe("时");case 3:case"end":return e.stop()}},e,void 0)}))),it("isInverse",function(){var e=l((0,_enzyme.mount)(_react2.default.createElement(_index2.default,{isInverse:!0})));expect(e.state.text).toBe("")}),it("value",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{value:!0})),a=l(t),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("");case 4:case"end":return e.stop()}},e,void 0)}))),it("defaultValue",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{defaultValue:!0})),a=l(t),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("");case 4:case"end":return e.stop()}},e,void 0)}))),it("value& defaultValue",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{defaultValue:!1,value:!0})),a=l(t),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("");case 4:case"end":return e.stop()}},e,void 0)}))),it("disabled",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{disabled:!0})),a=l(t),expect(a.props.disabled).toBe(!0);case 3:case"end":return e.stop()}},e,void 0)}))),it("loading",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{loading:!0})),a=l(t),expect(a.props.loading).toBe(!0),t.setProps({loading:!1}),expect(a.props.loading).toBe(!1);case 5:case"end":return e.stop()}},e,void 0)}))),it(" loading={{delay:3000}}",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{loading:{delay:3e3}})),a=l(t),expect(a.props.loading).toBe(!0),e.next=5,(0,_reactTestUtils.delay)(3e3);case 5:expect(a.props.loading).toBe(!1);case 6:case"end":return e.stop()}},e,void 0)}))),it("disabled,loading",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{loading:!0,disabled:!0})),a=l(t),expect(a.props.loading).toBe(!0),expect(a.props.disabled).toBe(!0);case 4:case"end":return e.stop()}},e,void 0)}))),it("disabled,loading={{delay:3000}}",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{disabled:!0,loading:{delay:3e3}})),a=l(t),expect(a.props.loading).toBe(!0),expect(a.props.disabled).toBe(!0),e.next=6,(0,_reactTestUtils.delay)(3e3);case 6:expect(a.props.loading).toBe(!1),expect(a.props.disabled).toBe(!0);case 8:case"end":return e.stop()}},e,void 0)}))),it('keyboard onKeyDown: "ENTER","SPACE","RIGHT_ARROW","LEFT_ARROW" ',_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{autoFocus:!0,data:[{text:"年"},{text:"月"}]})),n(a=l(t),_KeyCode.ENTER),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.ENTER),expect(a.state.value).toBe(!1),expect(a.state.text).toBe("月"),n(a,_KeyCode.SPACE),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.SPACE),expect(a.state.value).toBe(!1),expect(a.state.text).toBe("月"),n(a,_KeyCode.RIGHT_ARROW),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.LEFT_ARROW),expect(a.state.value).toBe(!1),expect(a.state.text).toBe("月");case 20:case"end":return e.stop()}},e,void 0)}))),it('value && keyboard onKeyDown: "ENTER","SPACE","RIGHT_ARROW","LEFT_ARROW"',_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{autoFocus:!0,value:!0,data:[{text:"年"},{text:"月"}]})),n(a=l(t),_KeyCode.ENTER),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.ENTER),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.SPACE),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.SPACE),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.RIGHT_ARROW),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.LEFT_ARROW),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年");case 20:case"end":return e.stop()}},e,void 0)}))),it('mouseUp && value &&  keyboard onKeyDown: "ENTER","SPACE","RIGHT_ARROW","LEFT_ARROW"',_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{autoFocus:!0,value:!0,data:[{text:"年"},{text:"月"}]})),n(a=l(t),_KeyCode.ENTER),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),a.mouseup(),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.ENTER),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),a.mouseup(),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.SPACE),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),a.mouseup(),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.SPACE),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.RIGHT_ARROW),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),a.mouseup(),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.LEFT_ARROW),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年");case 32:case"end":return e.stop()}},e,void 0)}))),it('mouseUp,setProps{value:true} keyboard onKeyDown: "ENTER","SPACE","RIGHT_ARROW","LEFT_ARROW" ',_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{autoFocus:!0,data:[{text:"年"},{text:"月"}]})),(a=l(t)).mouseup(),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.ENTER),expect(a.state.value).toBe(!1),expect(a.state.text).toBe("月"),n(a,_KeyCode.ENTER),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),a.mouseup(),expect(a.state.value).toBe(!1),expect(a.state.text).toBe("月"),n(a,_KeyCode.SPACE),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),a.mouseup(),expect(a.state.value).toBe(!1),expect(a.state.text).toBe("月"),n(a,_KeyCode.SPACE),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),a.mouseup(),expect(a.state.value).toBe(!1),expect(a.state.text).toBe("月"),n(a,_KeyCode.RIGHT_ARROW),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),a.mouseup(),expect(a.state.value).toBe(!1),expect(a.state.text).toBe("月"),n(a,_KeyCode.LEFT_ARROW),expect(a.state.value).toBe(!1),expect(a.state.text).toBe("月"),t.setProps({value:!0}),n(a,_KeyCode.ENTER),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),a.mouseup(),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.ENTER),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),a.mouseup(),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.SPACE),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),a.mouseup(),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.SPACE),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.RIGHT_ARROW),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),a.mouseup(),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年"),n(a,_KeyCode.LEFT_ARROW),expect(a.state.value).toBe(!0),expect(a.state.text).toBe("年");case 66:case"end":return e.stop()}},e,void 0)}))),e("right right",{},[_KeyCode.RIGHT_ARROW,_KeyCode.RIGHT_ARROW],[!0,!0],[{newValue:!0,oldValue:!1,newItem:{text:""},oldItem:{text:""}}]),e("left left",{},[_KeyCode.LEFT_ARROW,_KeyCode.LEFT_ARROW],[!1,!1]),e("disabled,change",{disabled:!0,autoFocus:!0},[_KeyCode.ENTER,_KeyCode.LEFT_ARROW,_KeyCode.RIGHT_ARROW,_KeyCode.SPACE],[!1,!1,!1,!1]),e("loading,change",{loading:!0,autoFocus:!0},[_KeyCode.ENTER,_KeyCode.LEFT_ARROW,_KeyCode.RIGHT_ARROW,_KeyCode.SPACE],[!1,!1,!1,!1]),e("loading:{delay:3000},change",{loading:{delay:3e3},autoFocus:!0},[_KeyCode.ENTER,_KeyCode.LEFT_ARROW,_KeyCode.RIGHT_ARROW,_KeyCode.SPACE],[!1,!1,!1,!1]),e("mouseUp onChange",{data:[{text:"年"},{text:"月"}]},null,[!0],[{newValue:!0,oldValue:!1,newItem:{text:"年"},oldItem:{text:"月"}}]),e("value onChange",{value:!0,data:[{text:"年"},{text:"月"}]},null,[!0],[{newValue:!1,oldValue:!0,newItem:{text:"月"},oldItem:{text:"年"}}]),e("keyDown onChange",{data:[{text:"年"},{text:"月"}]},[_KeyCode.ENTER,_KeyCode.LEFT_ARROW,_KeyCode.RIGHT_ARROW,_KeyCode.SPACE],[!0,!1,!0,!1],[{newValue:!0,oldValue:!1,newItem:{text:"年"},oldItem:{text:"月"}},{newValue:!1,oldValue:!0,newItem:{text:"月"},oldItem:{text:"年"}},{newValue:!0,oldValue:!1,newItem:{text:"年"},oldItem:{text:"月"}},{newValue:!1,oldValue:!0,newItem:{text:"月"},oldItem:{text:"年"}}])});