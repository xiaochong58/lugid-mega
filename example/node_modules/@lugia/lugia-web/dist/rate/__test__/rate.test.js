"use strict";var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_react=require("react"),_react2=_interopRequireDefault(_react),_enzymeAdapterReact=require("enzyme-adapter-react-16"),_enzymeAdapterReact2=_interopRequireDefault(_enzymeAdapterReact),_rate=require("../rate"),_index=require("../index"),_index2=_interopRequireDefault(_index),_enzyme=require("enzyme"),_enzyme2=_interopRequireDefault(_enzyme),_reactTestRenderer=require("react-test-renderer"),_reactTestRenderer2=_interopRequireDefault(_reactTestRenderer);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var l=e.apply(this,arguments);return new Promise(function(u,o){return function t(e,a){try{var r=l[e](a),n=r.value}catch(e){return void o(e)}if(!r.done)return Promise.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});u(n)}("next")})}}require("jest-styled-components");var _require=require("@lugia/jverify"),mockObject=_require.mockObject,VerifyOrder=_require.VerifyOrder,VerifyOrderConfig=_require.VerifyOrderConfig;_enzyme2.default.configure({adapter:new _enzymeAdapterReact2.default}),describe("Rate Test",function(){function o(){return!0}function l(e){return e.children().instance()}var c={themeConfig:{},themeState:{},onLugia:function(){return!0}};function e(t,a){it("Function checkInitValue",function(){var e=(0,_rate.multipleValue)(t);expect(e).toEqual(a)})}function t(t,a,r){it("Function multipleValue",function(){var e=(0,_rate.multipleValue)(a,t);expect(e).toEqual(r)})}function a(t,a){it("Function getMultiple",function(){var e=(0,_rate.getMultiple)(t);expect(e).toEqual(a)})}function r(t,a,r,n){it("Function getClassNames",function(){var e=(0,_rate.getClassNames)(t,a,r);expect(e).toEqual(n)})}it("css",function(){var e=_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c});expect(_reactTestRenderer2.default.create(e).toJSON()).toMatchSnapshot()}),it("count=10",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,count:10}));expect(e.props().count).toEqual(10)}),it("value=4",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,value:4}));expect(l(e).state.value).toEqual(4)}),it("disabled=true",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,disabled:!0}));expect(l(e).props.disabled).toEqual(!0),expect(l(e).state.value).toEqual(0),i(e,3).simulate("click",{},3),expect(l(e).state.value).toEqual(0)}),it("allowHalf=true",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,allowHalf:!0,value:3.5}));expect(l(e).props.allowHalf).toEqual(!0),expect(l(e).state.value).toEqual(3.5)}),it("allowHalf=false value=3.5 ->3",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,allowHalf:!1,value:3.5}));expect(l(e).props.allowHalf).toEqual(!1),expect(l(e).state.value).toEqual(3)}),e({max:5,count:5,value:2},2),e({max:10,count:5,value:2},1),e({count:5,value:2},2),e({value:2},2),e({},0),e({max:10,count:5,value:4},2),t(2,{max:5,count:5},2),t(2,{max:10,count:5},4),t(2,{count:5},2),t(2,{},2),t(2,{max:15,count:5},6),a({max:10},2),a({},1),a({max:10,count:5},2),a({max:30,count:10},3),r(["default","default","default","default","default"],2,!1,["primary","primary","default","default","default"]),r(["default","default","default","default","default"],4,!1,["primary","primary","primary","primary","default"]),r(["default","default","default","default","default"],3.5,!1,["primary","primary","primary","half","default"]),r(["default","default","default","default","default"],2,!0,["danger","danger","default","default","default"]),r(["default","default","default","default","default"],4,!0,["amazed","amazed","amazed","amazed","default"]),r(["default","default","default","default","default"],3.5,!0,["amazed","amazed","amazed","half","default"]);var n=[{iconClass:{},excp:{default:"lugia-icon-financial_star",primary:"lugia-icon-financial_star",danger:"lugia-icon-financial_star",amazed:"lugia-icon-financial_star",half:"lugia-icon-finacial_half_star"}},{iconClass:{default:"A"},excp:{default:"A",primary:"A",danger:"A",amazed:"A",half:"A"}},{iconClass:{default:"A",primary:"B",danger:"C",amazed:"D",half:"E"},excp:{default:"A",primary:"B",danger:"C",amazed:"D",half:"E"}}];function u(t,a){it("Function setValue",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c}));l(e).setValue(t),expect(l(e).state.value).toEqual(a.value),expect(l(e).state.iconTypeArray).toEqual(a.iconTypeArray),expect(l(e).state.starNum).toEqual(a.starNum)})}function i(e,t){return e.find("sv_rate_Ratespan").at(t)}n.map(function(e,t){!function(t,a){it("Function getIconClass",function(){var e=(0,_rate.getIconClass)(t);expect(e).toEqual(a)})}(e.iconClass,n[t].excp)}),u({value:1,starNum:1,iconTypeArray:["primary","default","default"],current:0},{value:1,starNum:1,current:0,iconTypeArray:["primary","default","default"]}),u({value:2,starNum:2,iconTypeArray:["primary","primary","default"],current:1},{value:2,starNum:2,current:1,iconTypeArray:["primary","primary","default"]}),it("Function:onClick limit value",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return!0},a=new Promise(function(a){t=function(e){var t=e.newValue;e.oldValue;a(t)}}),(r=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,value:4,onClick:t}))).setProps({value:1}),expect(l(r).state.value).toEqual(1),i(r,2).simulate("click",{},2,!1),expect(l(r).state.value).toEqual(1),e.t0=expect,e.next=10,a;case 10:e.t1=e.sent,(0,e.t0)(e.t1).toBe(3);case 12:case"end":return e.stop()}},e,void 0)}))),it("Function:onClick limit value allowHalf",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,r,n,u;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return!0},a=new Promise(function(a){t=function(e){var t=e.newValue;e.oldValue;a(t)}}),r=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,value:4,allowHalf:!0,onClick:t})),n=VerifyOrder.create(),u=mockObject.create(l(r),VerifyOrderConfig.create("offset",n)),u.mockFunction("getOffset").forever({offsetLeft:76,offsetWidth:18}),i(r,2).simulate("click",{pageX:80},2,!0),expect(l(r).state.value).toEqual(4),e.t0=expect,e.next=12,a;case 12:return e.t1=e.sent,(0,e.t0)(e.t1).toBe(2.5),r.setProps({value:2}),expect(l(r).state.value).toEqual(2),i(r,2).simulate("click",{pageX:80},2,!0),expect(l(r).state.value).toEqual(2),e.t2=expect,e.next=21,a;case 21:e.t3=e.sent,(0,e.t2)(e.t3).toBe(2.5);case 23:case"end":return e.stop()}},e,void 0)}))),it("Function:onClick unlimit value",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return!0},a=new Promise(function(a){t=function(e){var t=e.newValue;e.oldValue;a(t)}}),i(r=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,onClick:t})),3).simulate("click",{},3,!0),expect(l(r).state.value).toEqual(4),e.t0=expect,e.next=8,a;case 8:e.t1=e.sent,(0,e.t0)(e.t1).toBe(4);case 10:case"end":return e.stop()}},e,void 0)}))),it("Function:onClick unlimit value allowHalf",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,allowHalf:!0})),a=VerifyOrder.create(),r=mockObject.create(l(t),VerifyOrderConfig.create("offset",a)),r.mockFunction("getOffset").forever({offsetLeft:76,offsetWidth:18}),i(t,2).simulate("click",{pageX:80},2,!0),expect(l(t).state.value).toEqual(2.5),i(t,0).simulate("click",{pageX:13},0,!0),expect(l(t).state.value).toEqual(.5);case 9:case"end":return e.stop()}},e,void 0)}))),it("Function:onClick unlimit -> limit  value",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return!0},a=new Promise(function(a){t=function(e){var t=e.newValue;e.oldValue;a(t)}}),i(r=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,onClick:t})),3).simulate("click",{},3),expect(l(r).state.value).toEqual(4),e.t0=expect,e.next=8,a;case 8:e.t1=e.sent,(0,e.t0)(e.t1).toBe(4),r.setProps({value:2}),expect(l(r).state.value).toEqual(2);case 12:case"end":return e.stop()}},e,void 0)}))),it("Function:onClick unlimit -> limit  value",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return!0},a=new Promise(function(a){t=function(e){var t=e.newValue;e.oldValue;a(t)}}),(r=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,onClick:t}))).setProps({value:2}),expect(l(r).state.value).toEqual(2),i(r,2).simulate("click",{},2),expect(l(r).state.value).toEqual(2),e.t0=expect,e.next=10,a;case 10:e.t1=e.sent,(0,e.t0)(e.t1).toBe(3);case 12:case"end":return e.stop()}},e,void 0)}))),it("Check disabled Status",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,disabled:!0}));expect(l(e).state.value).toEqual(0),i(e,2).simulate("click",{},2),expect(l(e).state.value).toEqual(0)}),it("Function:onMouseMove limit ",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,value:4})),l(t).onMouseMove({pageX:10},2),expect(l(t).state.value).toEqual(4);case 3:case"end":return e.stop()}},e,void 0)}))),it("Function:onMouseMoveOrClick unlimit value",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c})),l(t).onMouseMove({pageX:10},2),expect(l(t).state.value).toEqual(3);case 3:case"end":return e.stop()}},e,void 0)}))),it("Function:onMouseMoveOrClick unlimit ->limit ",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c})),l(t).onMouseMove({pageX:10},2),expect(l(t).state.value).toEqual(3),t.setProps({value:2}),l(t).onMouseMove({pageX:10},4),expect(l(t).state.value).toEqual(2);case 6:case"end":return e.stop()}},e,void 0)}))),it("Function:mouseLeave lilmit",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,value:4})),l(t).mouseLeave({}),expect(l(t).state.value).toEqual(4),expect(l(t).state.starNum).toEqual(4);case 4:case"end":return e.stop()}},e,void 0)}))),it("Function:mouseLeave unlilmit",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c})),l(t).mouseLeave({}),expect(l(t).state.value).toEqual(0),expect(l(t).state.starNum).toEqual(0);case 4:case"end":return e.stop()}},e,void 0)}))),it("Function:mouseLeave onClick unlimit value",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return!0},a=new Promise(function(a){t=function(e){var t=e.newValue;e.oldValue;a(t)}}),i(r=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,onClick:t})),3).simulate("click",{},3,!0),expect(l(r).state.value).toEqual(4),e.t0=expect,e.next=8,a;case 8:e.t1=e.sent,(0,e.t0)(e.t1).toBe(4),l(r).mouseLeave({}),expect(l(r).state.value).toEqual(4);case 12:case"end":return e.stop()}},e,void 0)}))),it("Function:mouseLeave onClick limit value",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return!0},a=new Promise(function(a){t=function(e){var t=e.newValue;e.oldValue;a(t)}}),i(r=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{getPartOfThemeProps:o,getPartOfThemeHocProps:o,themeProps:c,value:5,onClick:t})),3).simulate("click",{},3,!0),expect(l(r).state.value).toEqual(5),e.t0=expect,e.next=8,a;case 8:e.t1=e.sent,(0,e.t0)(e.t1).toBe(4),l(r).mouseLeave({}),expect(l(r).state.value).toEqual(5);case 12:case"end":return e.stop()}},e,void 0)}))),it("getClass",function(){expect((0,_rate.getClass)(100,1e3,!1)).toBe("primary"),expect((0,_rate.getClass)(100,100,!0)).toBe("primary"),expect((0,_rate.getClass)(100,200,!0)).toBe("danger"),expect((0,_rate.getClass)(200,100,!0)).toBe("amazed")}),it("calcValue",function(){expect((0,_rate.calcValue)(100,!1)).toEqual(100),expect((0,_rate.calcValue)(5.5,!1)).toEqual(5),expect((0,_rate.calcValue)(5.5,!0)).toEqual(5.5),expect((0,_rate.calcValue)(3.2,!0)).toEqual(3),expect((0,_rate.calcValue)(3.7,!0)).toEqual(3.5)})});