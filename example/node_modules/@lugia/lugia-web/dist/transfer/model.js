"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),_EventEmitter2=require("../common/EventEmitter"),_EventEmitter3=_interopRequireDefault(_EventEmitter2),_utils=require("./utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var TransferModel=function(){function s(e){_classCallCheck(this,s);var a=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));a.getCheckAllKeys=function(e){var t=a.handleSplitSelectKeys().disabledKeys;return e?[].concat(_toConsumableArray(a.canCheckKeys),_toConsumableArray(t)):t||[]},a.getMoveAfterKeysForSource=function(){var e=a.handleSplitSelectKeys(),t=e.validKeys;return{moveKey:t,disabledKeys:e.disabledKeys,nextTargetKeys:[].concat(_toConsumableArray(new Set([].concat(_toConsumableArray(a.list),_toConsumableArray(t)))))}},a.getMoveAfterKeysForTarget=function(){var e=a.handleSplitSelectKeys(),t=e.validKeys,n=e.disabledKeys,r=a.list.filter(function(e){return!t.includes(e)});return{moveKey:t,disabledKeys:n,nextTargetKeys:r}},a.getDataLength=function(e){return"Source"===a.type?e.length-a.getList().length+a.cancelItem.length:a.getList().length-a.cancelItem.length};var t=e.type,n=e.list,r=e.selectedKeys;return a.type=t,a.list=n,a.selectedKeys=r,a}return _inherits(s,_EventEmitter3.default),_createClass(s,[{key:"setMapData",value:function(e){this.mapData=e}},{key:"getMapData",value:function(){return this.mapData}},{key:"setDisplayValue",value:function(e){this.displayValue=e}},{key:"getDisplayValue",value:function(){return this.displayValue}},{key:"setTreeData",value:function(e){this.treeData=e}},{key:"getTreeData",value:function(){return this.treeData}},{key:"setCanCheckKeys",value:function(e){this.canCheckKeys=e}},{key:"getCanCheckKeys",value:function(){return this.canCheckKeys}},{key:"handleSplitSelectKeys",value:function(){return(0,_utils.splitSelectKeys)(this.mapData,this.selectedKeys)}},{key:"setCancelItem",value:function(e){this.cancelItem=e}},{key:"getCancelItem",value:function(){return this.cancelItem}},{key:"changeCancelItem",value:function(e){this.cancelItem=e,this.emit("onCancelItemChange",{data:e})}},{key:"changeSelectedKeys",value:function(e){this.selectedKeys=e,this.emit("onSelectedKeyChange",{data:e})}},{key:"changeList",value:function(e){this.list=e,this.emit("onListChange",{data:this.getTypeList()})}},{key:"getSelectedkeys",value:function(){return this.selectedKeys}},{key:"getList",value:function(){return this.list||[]}},{key:"getTypeList",value:function(){switch(this.type){case"Source":return{blackList:this.list};case"Target":return{whiteList:this.list};default:return console.error("不支持的类型"),{whiteList:this.list}}}}]),s}();exports.default=TransferModel;