"use strict";var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_react=require("react"),_react2=_interopRequireDefault(_react),_chai=require("chai"),_chai2=_interopRequireDefault(_chai);require("jest-styled-components");var _enzyme=require("enzyme"),_enzyme2=_interopRequireDefault(_enzyme),_enzymeAdapterReact=require("enzyme-adapter-react-16"),_enzymeAdapterReact2=_interopRequireDefault(_enzymeAdapterReact),_reactTestRenderer=require("react-test-renderer"),_reactTestRenderer2=_interopRequireDefault(_reactTestRenderer),_reactTestUtils=require("@lugia/react-test-utils"),_demo=require("../demo"),_demo2=_interopRequireDefault(_demo),_anchor=require("../anchor"),_anchor2=_interopRequireDefault(_anchor);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var o=e.apply(this,arguments);return new Promise(function(c,i){return function t(e,r){try{var n=o[e](r),a=n.value}catch(e){return void i(e)}if(!n.done)return Promise.resolve(a).then(function(e){t("next",e)},function(e){t("throw",e)});c(a)}("next")})}}var exp=_chai2.default.expect;_enzyme2.default.configure({adapter:new _enzymeAdapterReact2.default}),describe("Anchor",function(){it("css",function(){var e=_react2.default.createElement(_demo2.default,null);expect(_reactTestRenderer2.default.create(e).toJSON()).toMatchSnapshot()});function c(e){return e.find("Anchor").at(0).instance()}it("Anchor: setScrollActiveLink ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_anchor2.default,null)),t=c(e);t.setScrollActiveLink([]);var r=t.state.activeLink;expect(r).toBe(""),t.setScrollActiveLink([{link:"a",top:20},{link:"b",top:-20},{link:"c",top:0}]);var n=t.state.activeLink;expect(n).toBe("a")}),it("Anchor: handleLinkClick ",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r,n,a;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_anchor2.default,null)),r=c(t),n=r.isClick,expect(n).toBe(!1),r.handleLinkClick("","#a"),a=r.state.activeLink,expect(r.isClick).toBe(!0),expect(a).toBe("#a"),e.next=10,(0,_reactTestUtils.delay)(50);case 10:expect(r.isClick).toBe(!1);case 11:case"end":return e.stop()}},e,void 0)}))),it("Anchor: getId ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_anchor2.default,null)),t=c(e);expect(t.getId("#a")).toBe("a"),expect(t.getId("##a")).toBe("a"),expect(t.getId()).toBeUndefined()}),it("Anchor: updateLinks ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_anchor2.default,null)),t=c(e);t.updateLinks([1,2]);var r=t.links;expect(r).toEqual([1,2]),t.updateLinks([3,4]);var n=t.links;expect(n).toEqual([3,4])}),it("Anchor: getMaxTopLink ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_anchor2.default,null)),t=c(e),r=t.getMaxTopLink();expect(r).toBe("");var n=t.getMaxTopLink({});expect(n).toBe("");var a=t.getMaxTopLink([{top:1,link:"1"},{top:2,link:"2"}]);expect(a).toBe("2")})});