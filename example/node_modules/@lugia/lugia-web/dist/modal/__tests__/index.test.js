"use strict";var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_react=require("react"),_react2=_interopRequireDefault(_react),_reactTestRenderer=require("react-test-renderer"),_reactTestRenderer2=_interopRequireDefault(_reactTestRenderer);require("jest-styled-components");var _enzyme=require("enzyme"),_enzyme2=_interopRequireDefault(_enzyme),_chai=require("chai"),_chai2=_interopRequireDefault(_chai),_enzymeAdapterReact=require("enzyme-adapter-react-16"),_enzymeAdapterReact2=_interopRequireDefault(_enzymeAdapterReact),_reactTestUtils=require("@lugia/react-test-utils"),_demo=require("../demo"),_demo2=_interopRequireDefault(_demo),_index=require("../index"),_index2=_interopRequireDefault(_index);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var c=e.apply(this,arguments);return new Promise(function(i,o){return function t(e,r){try{var n=c[e](r),a=n.value}catch(e){return void o(e)}if(!n.done)return Promise.resolve(a).then(function(e){t("next",e)},function(e){t("throw",e)});i(a)}("next")})}}var exp=_chai2.default.expect;_enzyme2.default.configure({adapter:new _enzymeAdapterReact2.default}),describe("Modal",function(){function n(e){return e.children().at(0).instance().state}it("css",function(){var e=_react2.default.createElement(_demo2.default,null);expect(_reactTestRenderer2.default.create(e).toJSON()).toMatchSnapshot()}),it("Modal state: visible and opening and closing",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,r;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{visible:!0,title:"这是标题！"})),r=n(t),expect(r.visible).toBe(!0),expect(r.opening).toBe(!0),t.find("ButtonWrap").at(0).simulate("click"),expect(n(t).closing).toBe(!1),e.next=8,(0,_reactTestUtils.delay)(500);case 8:expect(n(t).closing).toBe(!1),expect(n(t).visible).toBe(!0),t.setProps({visible:!1}),expect(n(t).opening).toBe(!1);case 12:case"end":return e.stop()}},e,void 0)}))),it("Modal isInprops",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{visible:!0,title:"这是标题！"})).children().at(0).instance();expect(e.isInprops("visible")).toBe(!0),expect(e.isInprops("footer")).toBe(!1)})});