"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),_templateObject=_taggedTemplateLiteral(["\n    position: relative;\n    display: flex;\n    min-width: ",";\n  "],["\n    position: relative;\n    display: flex;\n    min-width: ",";\n  "]),_templateObject2=_taggedTemplateLiteral(["\n    font-size: 1.2rem;\n    display: inline-block;\n  "],["\n    font-size: 1.2rem;\n    display: inline-block;\n  "]),_templateObject3=_taggedTemplateLiteral(["\n    width: ",";\n    height: ",";\n  "],["\n    width: ",";\n    height: ",";\n  "]),_templateObject4=_taggedTemplateLiteral(["\n    position: relative;\n  "],["\n    position: relative;\n  "]),_templateObject5=_taggedTemplateLiteral(["\n    position: relative;\n    text-align: center;\n  "],["\n    position: relative;\n    text-align: center;\n  "]),_templateObject6=_taggedTemplateLiteral(["\n    display: inline-block;\n    flex: 1;\n  "],["\n    display: inline-block;\n    flex: 1;\n  "]),_templateObject7=_taggedTemplateLiteral(["\n    display: flex;\n    flex-direction: column;\n  "],["\n    display: flex;\n    flex-direction: column;\n  "]),_templateObject8=_taggedTemplateLiteral(["\n    width: 100%;\n    display: inline-flex;\n    flex: 1;\n    align-items: center;\n  "],["\n    width: 100%;\n    display: inline-flex;\n    flex: 1;\n    align-items: center;\n  "]),_templateObject9=_taggedTemplateLiteral(["\n    text-align: inherit;\n  "],["\n    text-align: inherit;\n  "]),_react=require("react"),React=_interopRequireWildcard(_react),_index=require("../consts/index"),_index2=_interopRequireDefault(_index),_avatar=require("../avatar"),_avatar2=_interopRequireDefault(_avatar),_typeUtils=require("@lugia/type-utils"),_CSSProvider=require("../theme/CSSProvider"),_CSSProvider2=_interopRequireDefault(_CSSProvider),_index3=require("../theme-provider/index"),_index4=_interopRequireDefault(_index3),_css=require("@lugia/css"),_objectUtils=require("@lugia/object-utils"),_themeUtils=require("@lugia/theme-utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _taggedTemplateLiteral(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var px2remcss=_css.units.px2remcss,themeColor="$lugia-dict.@lugia/lugia-web.themeColor",darkGreyColor="$lugia-dict.@lugia/lugia-web.darkGreyColor",lightGreyColor="$lugia-dict.@lugia/lugia-web.lightGreyColor",superLightColor="$lugia-dict.@lugia/lugia-web.superLightColor",defaultColor="$lugia-dict.@lugia/lugia-web.defaultColor",checkSizeIsNumber=function(e){var t=e;return _typeUtils.ObjectUtils.isNumber(e)&&(t=px2remcss(e)),t},getDefaultSize=function(e,t){return e?checkSizeIsNumber(e):t},isHorizontal=function(e){return"horizontal"===(0<arguments.length&&void 0!==e?e:"horizontal")},CardOutContainer=(0,_CSSProvider2.default)({tag:"div",className:"CardOutContainer",normal:{selectNames:[["width"],["height"],["background"],["boxShadow"],["overflow"],["border"],["borderRadius"],["margin"],["padding"],["opacity"]],getCSS:function(e,t){var i=t.propsConfig,r=i.imageOrientation,a=i.type,n=i.minHeight,o="avatar"!==a||isHorizontal(r)?"":"center",l=isHorizontal(r)?"row":"column";return"\n        min-height:"+(n?checkSizeIsNumber(n):px2remcss(20))+";\n        text-align:"+o+";\n        flex-direction:"+l+";"},getThemeMeta:function(e,t){return"transparent"===t.propsConfig.type?{}:{background:{color:defaultColor},border:(0,_themeUtils.getBorder)({color:lightGreyColor,width:1,style:"solid"}),borderRadius:(0,_themeUtils.getBorderRadius)(5),boxShadow:(0,_themeUtils.getBoxShadow)("0 0 6 rgba(0, 0, 50, 0.1)")}}},hover:{selectNames:[["background"],["border"],["borderRadius"],["boxShadow"],["opacity"]]},clicked:{selectNames:[["background"],["border"],["borderRadius"],["boxShadow"],["opacity"]]},css:(0,_CSSProvider.css)(_templateObject,px2remcss(50)),option:{hover:!0}}),Content=(0,_CSSProvider2.default)({tag:"div",className:"cardContent",normal:{selectNames:[["width"],["height"],["background"],["boxShadow"],["border"],["borderRadius"],["margin"],["padding"],["opacity"],["color"]],getThemeMeta:function(e,t){var i=e.width,r=e.height;return{width:i||"",height:r||""}},defaultTheme:{width:"100%"}},css:(0,_CSSProvider.css)(_templateObject2)}),DefaultChildren=(0,_CSSProvider.StaticComponent)({tag:"div",className:"cardDefaultChildren",css:(0,_CSSProvider.css)(_templateObject3,px2remcss(50),px2remcss(20))}),Image=(0,_index4.default)((0,_CSSProvider2.default)({tag:"img",className:"cardImage",normal:{selectNames:[["background"],["border"],["borderRadius"],["margin"],["padding"],["boxShadow"],["opacity"]],getCSS:function(e,t){var i=e.width,r=e.height,a=t.propsConfig.imageOrientation;return"width :"+getDefaultSize(i,"100%")+";height:"+getDefaultSize(r,"100%")+";display:"+(isHorizontal(a)?"inline-block":"block")+";\n        max-width:100%;\n        max-height:100%;\n        "}}}),"cardImage"),ImageContainer=(0,_CSSProvider2.default)({tag:"div",className:"CardImageContainer",normal:{selectNames:[["width"],["height"],["background"],["border"],["borderRadius"],["margin"],["padding"],["boxShadow"],["opacity"]],getCSS:function(e,t){var i=e.width,r=e.height,a=t.propsConfig.imageOrientation,n=isHorizontal(a),o=n?px2remcss(120):"100%",l=n?"100%":px2remcss(112);return"width :"+getDefaultSize(i,o)+";height:"+getDefaultSize(r,l)+";display :"+(n?"inline-block":"block")+";"}},css:(0,_CSSProvider.css)(_templateObject4)}),AvatarContainer=(0,_CSSProvider2.default)({tag:"div",className:"CardAvatarContainer",normal:{selectNames:[["width"],["height"],["background"],["border"],["borderRadius"],["margin"],["padding"],["boxShadow"],["opacity"]],getCSS:function(e,t){var i=e.width,r=e.height,a=t.propsConfig.imageOrientation,n=isHorizontal(a),o=n?px2remcss(120):"100%",l=n?"100%":px2remcss(112);return"width :"+getDefaultSize(i,o)+";height:"+getDefaultSize(r,l)+";display :"+(n?"inline-block":"block")+";"}},css:(0,_CSSProvider.css)(_templateObject5)}),TitleContainer=(0,_CSSProvider2.default)({tag:"div",className:"TipTitleContainer",normal:{selectNames:[["width"],["height"]],defaultTheme:{fontSize:16,width:"100%"}}}),TextContainer=(0,_CSSProvider2.default)({extend:TitleContainer,className:"TextContainer",normal:{selectNames:[["width"],["height"],["padding"]],getCSS:function(e,t){var i=t.propsConfig,r=i.imageOrientation,a=i.type,n=!isHorizontal(r);return"text-align:"+("avatar"===a&&n?"center":"")+";flex-direction:"+(n?"column":"row")+";"},defaultTheme:{height:"fit-content"}}}),Title=(0,_CSSProvider2.default)({tag:"div",className:"CardTipTitle",normal:{selectNames:[["color"],["font"],["fontSize"]],getThemeMeta:function(e,t){var i=e.font,r=t.propsConfig.type;return{font:{weight:i&&i.weight?i.weight:"tip"===r?700:500}}},defaultTheme:{fontSize:16,width:"100%"}},css:(0,_CSSProvider.css)(_templateObject6)}),TitleHeadContainer=(0,_CSSProvider2.default)({tag:"div",className:"CardTitleTipLineContainer",normal:{selectNames:[["height"],["background"],["padding"],["border"],["borderRadius"],["boxShadow"]],defaultTheme:{padding:{top:10},borderRadius:{topLeft:5,topRight:5}}},css:(0,_CSSProvider.css)(_templateObject7)}),TitleTipContainer=(0,_CSSProvider.StaticComponent)({tag:"div",className:"CardTitleTipContainer",css:(0,_CSSProvider.css)(_templateObject8)}),TitleTipLine=(0,_CSSProvider2.default)({tag:"div",className:"CardTitleTipLine",normal:{selectNames:[["width"],["height"],["background"],["border"],["borderRadius"],["lineHeight"],["margin","left"],["margin","right"]],defaultTheme:{height:20,width:5,background:{color:themeColor},borderRadius:(0,_themeUtils.getBorderRadius)(5),margin:{left:5,right:10}}}}),TitleBottomLine=(0,_CSSProvider2.default)({tag:"div",className:"CardTipBottomLine",normal:{selectNames:[["width"],["border","bottom"],["margin"]],defaultTheme:{height:1,width:"100%",border:{bottom:{style:"solid",width:1,color:superLightColor}}},getCSS:function(e,t){var i=e.border,r=(i=void 0===i?{}:i).bottom,a=(r=void 0===r?{}:r).width;return"height:"+px2remcss(a)}}}),Description=(0,_CSSProvider2.default)({tag:"div",className:"cardDescription",normal:{selectNames:[["color"],["font"],["fontSize"],["background"]],defaultTheme:{fontSize:14,color:darkGreyColor}},css:(0,_CSSProvider.css)(_templateObject9)}),Operation=(0,_CSSProvider2.default)({tag:"div",className:"CardOperation",normal:{selectNames:[["width"],["height"],["color"],["font"],["position"]],defaultTheme:{font:{weight:400,size:14},position:{right:20,top:16}}}}),Card=function(){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.type,i=e.imageOrientation,r=e.minHeight,a=void 0,n=isHorizontal(i);switch(t){case"avatar":a={themeConfig:{normal:{width:n?320:150,height:n?116:190}}};break;case"image":a={themeConfig:{normal:{width:n?320:200,height:n?112:230}}}}a=(0,_objectUtils.deepMerge)(a,this.props.getPartOfThemeProps("Container",{props:{type:t,imageOrientation:i,minHeight:r}}));var o=this.props,l=o.operation,s=o.title,c=o.description,d=o.content,p=o.children,g=l||s||c||d||p;return React.createElement(CardOutContainer,{themeProps:a},g?[this.getDetails("operation"),this.getImageContainer(),this.getInnerContent()]:React.createElement(DefaultChildren,null))}},{key:"getInnerContent",value:function(){var e=this.props,t=e.type,i=e.imageOrientation,r=e.content,a=this.props.getPartOfThemeProps("CardContent",{props:{type:t}});return React.createElement(Content,{themeProps:a,imageOrientation:i,type:t,content:r},this.getTitleTipContainer(),this.getDetails("description"),this.getContent())}},{key:"getTitleTipContainer",value:function(){var e=this.props,t=e.title,i=e.type,r=e.getPartOfThemeProps,a=this.getDetails("title");return t&&"tip"===i?React.createElement(TitleHeadContainer,{themeProps:r("CardTitleHeadContainer")},React.createElement(TitleTipContainer,null,React.createElement(TitleTipLine,{themeProps:r("CardTitleTipLine")}),a),this.getTitleBottomLine()):a}},{key:"getTitleBottomLine",value:function(){if(this.props.showTipBottomLine)return React.createElement(TitleBottomLine,{themeProps:this.props.getPartOfThemeProps("CardTipBottomLine")})}},{key:"getImageContainer",value:function(){var e=this.props,t=e.type,i=e.imageOrientation,r=this.props.getPartOfThemeProps("CardAvatar",{props:{imageOrientation:i}}),a=this.props.getPartOfThemeProps("CardImage",{props:{imageOrientation:i}});return"avatar"===t?React.createElement(AvatarContainer,{themeProps:r,imageOrientation:i},this.getAvatar()):"image"===t?React.createElement(ImageContainer,{themeProps:a,imageOrientation:i},this.getImage()):null}},{key:"getPaddingByType",value:function(e,t,i){var r=0,a=0;if("avatar"!==e||isHorizontal(i))if("tip"===e)switch(t){case"description":r=16;break;case"title":default:r=10}else r=10;else r=0;switch(t){case"content":a=16;break;case"description":a=14;break;case"title":a=13;break;default:a=0}return{padding:{left:r,top:a,right:10}}}},{key:"getThemeNormalConfig",value:function(e){return{themeConfig:{normal:e}}}},{key:"getDetails",value:function(e){var t=this.props,i=t.operation,r=t.title,a=t.description,n=t.content,o=t.children,l=t.type,s=t.imageOrientation,c=!(n&&o);switch(e){case"operation":var d=this.props.getPartOfThemeProps("CardOperation");return c&&i?React.createElement(Operation,{themeProps:d},i):null;case"title":var p=(0,_objectUtils.deepMerge)(this.getThemeNormalConfig(this.getPaddingByType(l,"title",s)),this.props.getPartOfThemeProps("CardTitle",{props:{type:l}}));return r?this.getTitle(p):null;case"description":var g=(0,_objectUtils.deepMerge)(this.getThemeNormalConfig(this.getPaddingByType(l,"description",s)),this.props.getPartOfThemeProps("CardDescription",{props:{type:l}}));return a?React.createElement(TextContainer,{themeProps:g},React.createElement(Description,{themeProps:g},a," ")):null;default:return null}}},{key:"getTitle",value:function(e){var t=this.props,i=t.title,r=t.type,a=React.createElement(Title,{themeProps:e},i);return"tip"===r?React.createElement(TitleContainer,{themeProps:e},a):React.createElement(TextContainer,{themeProps:e},a)}},{key:"getContent",value:function(){var e=this.props,t=e.content,i=e.children;return t||(i||null)}},{key:"getImage",value:function(){var e=this.props.image,t=this.props.getPartOfThemeHocProps("CardImage"),i=t.theme,r=t.viewClass;return _typeUtils.ObjectUtils.isString(e)?React.createElement(Image,{viewClass:r,theme:i,src:e}):e}},{key:"getAvatar",value:function(){var e=this.props,t=e.avatar,i=e.imageOrientation,r=this.props.getPartOfThemeHocProps("CardAvatar"),a=r.theme,n=r.viewClass,o=(0,_objectUtils.deepMerge)(_defineProperty({},n,{SrcAvatar:{normal:{getCSS:function(){return"background-color: transparent;"},getThemeMeta:function(e,t){var i=t.propsConfig.imageOrientation;return{width:60,height:60,margin:{left:isHorizontal(i)?20:0,top:10}}}}}}),a);return _typeUtils.ObjectUtils.isString(t)?React.createElement(_avatar2.default,{type:"img",viewClass:n,theme:o,shape:"circle",propsConfig:{imageOrientation:i},src:t}):t}}],[{key:"getDerivedStateFromProps",value:function(e,t){}}]),t}();Card.defaultProps={type:"simple",imageOrientation:"horizontal",showTipBottomLine:!1},exports.default=(0,_index4.default)(Card,_index2.default.Card,{hover:!0,active:!0});