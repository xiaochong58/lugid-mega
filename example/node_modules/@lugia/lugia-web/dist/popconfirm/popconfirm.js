"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),_templateObject=_taggedTemplateLiteral(["\n    position: relative;\n    display: inline-block;\n    margin-right: ",";\n    text-align: center;\n  "],["\n    position: relative;\n    display: inline-block;\n    margin-right: ",";\n    text-align: center;\n  "]),_templateObject2=_taggedTemplateLiteral(["\n    text-align: inherit;\n    white-space: nowrap;\n    overflow: hidden;\n    display: inline-block;\n  "],["\n    text-align: inherit;\n    white-space: nowrap;\n    overflow: hidden;\n    display: inline-block;\n  "]),_templateObject3=_taggedTemplateLiteral(["\n    display: block;\n  "],["\n    display: block;\n  "]),_templateObject4=_taggedTemplateLiteral(["\n    padding-top: ",";\n    display: block;\n    text-align: right;\n  "],["\n    padding-top: ",";\n    display: block;\n    text-align: right;\n  "]),_react=require("react"),React=_interopRequireWildcard(_react),_index=require("../button/index"),_index2=_interopRequireDefault(_index),_index3=require("../popover/index"),_index4=_interopRequireDefault(_index3),_index5=require("../icon/index"),_index6=_interopRequireDefault(_index5),_index7=require("../consts/index"),_index8=_interopRequireDefault(_index7),_typeUtils=require("@lugia/type-utils"),_tooltip=require("../tooltip"),_themeHoc=require("@lugia/theme-hoc"),_themeHoc2=_interopRequireDefault(_themeHoc),_CSSProvider=require("../theme/CSSProvider"),_CSSProvider2=_interopRequireDefault(_CSSProvider),_css=require("@lugia/css"),_objectUtils=require("@lugia/object-utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _taggedTemplateLiteral(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var px2remcss=_css.units.px2remcss,blackColor="$lugia-dict.@lugia/lugia-web.blackColor",IconContainer=(0,_CSSProvider.StaticComponent)({tag:"span",className:"PopconfirmIconContainer ",normal:{selectNames:[]},css:(0,_CSSProvider.css)(_templateObject,px2remcss(6))}),Title=(0,_CSSProvider2.default)({tag:"span",className:"PopconfirmTitle",normal:{selectNames:[["font"],["fontSize"],["color"],["background"]],defaultTheme:{font:{size:14,color:blackColor}}},css:(0,_CSSProvider.css)(_templateObject2)}),Content=(0,_CSSProvider2.default)({tag:"div",className:"PopconfirmContent",normal:{selectNames:[["font"],["fontSize"],["color"],["margin"],["padding"],["background"]],defaultTheme:{fontSize:12}},css:(0,_CSSProvider.css)(_templateObject3)}),Operation=(0,_CSSProvider.StaticComponent)({tag:"div",className:"PopconfirmOperation",normal:{selectNames:[]},css:(0,_CSSProvider.css)(_templateObject4,px2remcss(12))}),Popconfirm=function(){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onCancel=function(e){var t=n.props.onCancel;return n.onVisibleChange(!1),t&&t(e)},n.onConfirm=function(e){var t=n.props.onConfirm;return n.onVisibleChange(!1),t&&t(e)},n.onVisibleChange=function(e){_tooltip.processOnVisibleChange.call(n,e)},n}return _inherits(t,React.Component),_createClass(t,[{key:"getTitle",value:function(){var e=this.props.title;return e?React.createElement(Title,{themeProps:this.props.getPartOfThemeProps("PopconfirmTitle")},e):null}},{key:"getOperation",value:function(){var e=this.props,t=e.cancelText,n=void 0===t?"取消":t,r=e.okText,i=void 0===r?"确定":r,o=e.okType,a=void 0===o?"primary":o,l=this.props.getPartOfThemeHocProps("PopconfirmButton"),c=l.theme,s=l.viewClass,p=(0,_objectUtils.deepMerge)(_defineProperty({},s,{Container:{normal:{margin:{left:6}}},ButtonText:{normal:{font:{size:12}}}}),c);return React.createElement(Operation,null,React.createElement(_index2.default,{theme:p,viewClass:s,size:"small",onClick:this.onCancel},n),React.createElement(_index2.default,{theme:p,viewClass:s,type:a,size:"small",onClick:this.onConfirm},i))}},{key:"getContent",value:function(){var e=this.props.getPartOfThemeProps("Container");return React.createElement(Content,{themeProps:e},this.getIconContainer(),this.getTitle(),this.getOperation())}},{key:"getIconContainer",value:function(){var e=this.props.icon;return e?React.createElement(IconContainer,null,this.getIcon(e)):null}},{key:"getIcon",value:function(e){return _typeUtils.ObjectUtils.isString(e)?React.createElement(_index6.default,Object.assign({},this.props.getPartOfThemeHocProps("PopconfirmIcon"),{iconClass:e,singleTheme:!0})):e}},{key:"render",value:function(){var t=this,e=this.props,n=e.children,r=e.action,i=e.placement,o=void 0===i?"topLeft":i,a=e.defaultChildren,l=n||a,c=this.props.getPartOfThemeHocProps("PopconfirmContent"),s=c.theme,p=c.viewClass,u=(0,_objectUtils.deepMerge)(_defineProperty({},p,{PopoverContent:{Container:{normal:{fontSize:12}}}}),s);return React.createElement(_index4.default,{theme:u,viewClass:p,showClearButton:!1,visible:this.state.visible,action:r,onVisibleChange:this.onVisibleChange,content:this.getContent(),ref:function(e){return t.target=e},placement:o},l)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return(0,_tooltip.getStateFromProps)(e,t)}}]),t}();Popconfirm.displayName=_index8.default.Popconfirm,Popconfirm.defaultProps={defaultVisible:!1},exports.default=(0,_themeHoc2.default)(Popconfirm,_index8.default.Popconfirm);