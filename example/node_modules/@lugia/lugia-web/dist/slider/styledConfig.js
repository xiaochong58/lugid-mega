"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.themeColor=void 0,exports.getThemeProps=getThemeProps,exports.getSliderButtonThemeProps=getSliderButtonThemeProps;var _objectUtils=require("@lugia/object-utils"),_slider_public_color=require("./slider_public_color"),_slider_public_size=require("./slider_public_size"),_stateColor=require("../css/stateColor"),_stateColor2=_interopRequireDefault(_stateColor),_themeUtils=require("@lugia/theme-utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _colorsFunc=(0,_stateColor2.default)(),themeColor=_colorsFunc.themeColor;function verticalSize(e){var r=e.width,o=e.height,t=e.vertical;if(!t)return{width:r,height:o};var i=r;return t&&(r=o,o=i),{width:r,height:o}}function getThemeProps(e,r,o){var t=e.getPartOfThemeProps,i=e.vertical,l=getSliderButtonThemeProps(t,i),d=l.width,a=t("SliderContainer"),h=getSliderTrackThemeProps(t,i,r,getOverSize(d,o));return{buttonThemeProps:l,sliderPassedWayThemeProps:getSliderPassedWayThemeProps(t,h.height),sliderTrackThemeProps:h,sliderContainerThemeProps:a,sliderTipsThemeProps:getTipsThemeProps(t,l)}}function getOverSize(e,r){var o=0,t=0;return r.forEach(function(e){t+=e,0===e&&(o+=1)}),2===o?e:1===o?e/2+t:0===o?t:void 0}function getSliderTrackThemeProps(e,r,o,t){var i=e("Container"),l=i.themeConfig,d=l.normal,a=void 0===d?{}:d,h=l.hover,s=void 0===h?{}:h,c=l.active,n=void 0===c?{}:c,u=l.disabled,g=void 0===u?{}:u,_={normal:{width:_slider_public_size.rangeWidthNormal,height:_slider_public_size.rangeHeightNormal,background:{color:_slider_public_color.trackBackground},border:(0,_themeUtils.getBorder)({color:"",style:"",width:0}),borderRadius:(0,_themeUtils.getBorderRadius)(6)}},b=(0,_objectUtils.deepMerge)(_,{normal:a}),m=b.normal,p=(m=void 0===m?{}:m).width,v=m.height,f=getWidth(p,o)-t,C=getWidth(v,_slider_public_size.rangeHeightNormal),k=verticalSize({vertical:r,width:b.normal.width=f,height:b.normal.height=C}),T=k.width,P=k.height,w=Object.assign({},b,{hover:{background:{color:_slider_public_color.throughRangeBackground}},active:{background:{color:_slider_public_color.throughRangeBackground}},disabled:{background:{color:_slider_public_color.trackDisabledBackground}}}),S=(0,_objectUtils.deepMerge)(w,{normal:Object.assign({},b.normal,{width:T,height:P}),hover:s,active:n,disabled:g});return i.themeConfig=(0,_objectUtils.deepMerge)(i.themeConfig,S),{sliderTrackThemeProps:i,width:f,height:C}}function getSliderPassedWayThemeProps(e,r){var o=e("SliderPassedWay"),t=o.themeConfig,i=t.normal,l=void 0===i?{}:i,d=t.hover,a=void 0===d?{}:d,h=t.active,s=void 0===h?{}:h,c=t.disabled,n=void 0===c?{}:c,u={normal:{background:{color:themeColor},height:r}},g=(0,_objectUtils.deepMerge)(u,{normal:l}),_=g.normal,b=_.background.color,m=_.height,p=Object.assign({},g,{hover:{background:{color:(0,_stateColor2.default)(b).hoverColor},height:m},active:{background:{color:(0,_stateColor2.default)(b).hoverColor},height:m},disabled:{background:{color:_slider_public_color.btnDisabledBackground},height:m}}),v=(0,_objectUtils.deepMerge)(p,{hover:a,active:s,disabled:n});return o.themeConfig=v,{sliderPassedWayThemeProps:o}}function getSliderButtonThemeProps(e,r){var o=e("SliderButton"),t=o.themeConfig.normal,i=void 0===t?{}:t,l={normal:{width:_slider_public_size.btnWidthNormal,height:_slider_public_size.btnWidthNormal,background:{color:themeColor}}},d=(0,_objectUtils.deepMerge)(l,{normal:i}),a=d.normal,h=a.background.color,s=a.width,c=a.height,n=valueIsNumber(s),u=valueIsNumber(c);n||(s=_slider_public_size.btnWidthNormal),u||(c=_slider_public_size.btnWidthNormal);var g=verticalSize({vertical:r,width:s,height:c}),_=g.width,b=g.height,m=Object.assign({},d,{hover:{width:_+4,height:b+4,background:{color:(0,_stateColor2.default)(h).hoverColor}},active:{width:_+4,height:b+4,background:{color:(0,_stateColor2.default)(h).hoverColor}},disabled:{width:_,height:b,background:{color:_slider_public_color.btnDisabledBackground}}}),p=(0,_objectUtils.deepMerge)(m,o.themeConfig,{normal:{width:_,height:b}});return o.themeConfig=p,{sliderButtonThemeProps:o,width:s,height:c}}function getTipsThemeProps(e){var r=e("SliderTips"),o={normal:{background:{color:_slider_public_color.tipBackground},height:27,color:_slider_public_color.tipColor,borderRadius:(0,_themeUtils.getBorderRadius)(3),fontSize:14},disabled:{background:{color:_slider_public_color.btnDisabledBackground},color:"#fff"}},t=(0,_objectUtils.deepMerge)(o,r.themeConfig);return r.themeConfig=t,r}function getWidth(e,r){var o=e;if(!e)return r;if(valueIsNumber(o))return o;return/^\d+%$/.test(o)?r*(o.split("%")[0]/100):void 0}function valueIsNumber(e){return"number"==typeof e&&!isNaN(e)}exports.themeColor=themeColor;