"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._Step=exports.isHorizontal=void 0;var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),_templateObject=_taggedTemplateLiteral(["\n    display: inline-flex;\n    position: relative;\n    cursor: pointer;\n  "],["\n    display: inline-flex;\n    position: relative;\n    cursor: pointer;\n  "]),_templateObject2=_taggedTemplateLiteral(["\n    position: absolute;\n    white-space: normal;\n    display: block;\n    word-break: keep-all;\n  "],["\n    position: absolute;\n    white-space: normal;\n    display: block;\n    word-break: keep-all;\n  "]),_templateObject3=_taggedTemplateLiteral(["\n    white-space: nowrap;\n  "],["\n    white-space: nowrap;\n  "]),_templateObject4=_taggedTemplateLiteral(["\n    white-space: inherit;\n    overflow: hidden;\n  "],["\n    white-space: inherit;\n    overflow: hidden;\n  "]),_templateObject5=_taggedTemplateLiteral(["\n    display: inline-flex;\n    position: relative;\n    z-index: 10;\n  "],["\n    display: inline-flex;\n    position: relative;\n    z-index: 10;\n  "]),_templateObject6=_taggedTemplateLiteral(["\n    display: inline-flex;\n    position: relative;\n  "],["\n    display: inline-flex;\n    position: relative;\n  "]),_templateObject7=_taggedTemplateLiteral(["\n    position: relative;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  "],["\n    position: relative;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  "]),_templateObject8=_taggedTemplateLiteral(["\n    position: relative;\n  "],["\n    position: relative;\n  "]),_templateObject9=_taggedTemplateLiteral(["\n    position: relative;\n    display: inLine-block;\n    border-radius: 50%;\n  "],["\n    position: relative;\n    display: inLine-block;\n    border-radius: 50%;\n  "]),_templateObject10=_taggedTemplateLiteral(["\n    text-align: left;\n    position: relative;\n    display: inLine-block;\n  "],["\n    text-align: left;\n    position: relative;\n    display: inLine-block;\n  "]),_templateObject11=_taggedTemplateLiteral(["\n    display: inLine-block;\n    user-select: none;\n    text-align: center;\n    line-height: 1;\n  "],["\n    display: inLine-block;\n    user-select: none;\n    text-align: center;\n    line-height: 1;\n  "]),_templateObject12=_taggedTemplateLiteral(["\n    box-sizing: border-box;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 50%;\n    margin: auto;\n  "],["\n    box-sizing: border-box;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 50%;\n    margin: auto;\n  "]),_templateObject13=_taggedTemplateLiteral(["\n    height: 100%;\n    width: 100%;\n    position: relative;\n    display: flex;\n  "],["\n    height: 100%;\n    width: 100%;\n    position: relative;\n    display: flex;\n  "]),_templateObject14=_taggedTemplateLiteral(["\n    position: relative;\n    display: flex;\n    height: 100%;\n  "],["\n    position: relative;\n    display: flex;\n    height: 100%;\n  "]),_templateObject15=_taggedTemplateLiteral(["\n    text-align: center;\n    position: relative;\n    display: flex;\n  "],["\n    text-align: center;\n    position: relative;\n    display: flex;\n  "]);require("../common/shirm");var _react=require("react"),React=_interopRequireWildcard(_react),_index=require("../consts/index"),_index2=_interopRequireDefault(_index),_KeyBoardEventAdaptor=require("../common/KeyBoardEventAdaptor"),_KeyBoardEventAdaptor2=_interopRequireDefault(_KeyBoardEventAdaptor),_themeProvider=require("../theme-provider"),_themeProvider2=_interopRequireDefault(_themeProvider),_icon=require("../icon"),_icon2=_interopRequireDefault(_icon),_themeCssHoc=require("@lugia/theme-css-hoc"),_themeCssHoc2=_interopRequireDefault(_themeCssHoc),_css=require("@lugia/css"),_themeUtils=require("@lugia/theme-utils"),_objectUtils=require("@lugia/object-utils"),_themeCommonDict=require("../css/theme-common-dict"),_themeCommonDict2=_interopRequireDefault(_themeCommonDict);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _taggedTemplateLiteral(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var px2remcss=_css.units.px2remcss,themeColor="$lugia-dict.@lugia/lugia-web.themeColor",themeHoverColor="$lugia-dict.@lugia/lugia-web.themeHoverColor",successColor="$lugia-dict.@lugia/lugia-web.successColor",dangerColor="$lugia-dict.@lugia/lugia-web.dangerColor",blackColor="$lugia-dict.@lugia/lugia-web.blackColor",darkGreyColor="$lugia-dict.@lugia/lugia-web.darkGreyColor",lightGreyColor="$lugia-dict.@lugia/lugia-web.lightGreyColor",defaultColor="$lugia-dict.@lugia/lugia-web.defaultColor",isHorizontal=exports.isHorizontal=function(e){return"horizontal"===e},isNormalSize=function(e){return"normal"===e},isDotType=function(e){return"dot"===e},isFlatType=function(e){return"flat"===e},getSize=function(e,t,i,n){return t||((e?isHorizontal(i):!isHorizontal(i))?"100%":n)},StepOutContainer=(0,_themeCssHoc2.default)({tag:"div",className:"StepOutContainer",normal:{selectNames:[["width"],["height"]],getThemeMeta:function(e,t){var i=t.propsConfig,n=i.size,o=i.orientation,r=e.width,s=e.height,a=isHorizontal(o)?"width":"height";return _defineProperty({},a,"width"==a?r||(isNormalSize(n)?212:204):s||(isNormalSize(n)?82:74))}},css:(0,_themeCssHoc.css)(_templateObject)}),BaseText=(0,_themeCssHoc2.default)({tag:"div",className:"StepBaseText",normal:{selectNames:[["fontSize"],["font"],["color"],["width"],["height"],["padding"],["margin"]]},css:(0,_themeCssHoc.css)(_templateObject2)}),Title=(0,_themeCssHoc2.default)({extend:BaseText,className:"StepTitle",normal:{selectNames:[["fontSize"],["font"],["color"],["width"],["height"],["padding"],["margin"]],getCSS:function(e,t){var i=t.propsConfig,n=i.size,o=i.stepType,r=i.orientation,s=i.desAlign,a="",l="",c=isDotType(o)||"icon"===o?-20:isNormalSize(n)?-20:-25,p=isDotType(o)?20:isNormalSize(n)?35:30;return isHorizontal(r)?a="bottom:"+px2remcss(c)+";":l="transform: translateY(-50%);top:50%;left:"+px2remcss(p)+";",""+a+l+("text-align:"+(s&&"center"===s?"center":"left")+";")},defaultTheme:{fontSize:14}},css:(0,_themeCssHoc.css)(_templateObject3)}),Description=(0,_themeCssHoc2.default)({extend:BaseText,className:"StepDescription",normal:{selectNames:[["fontSize"],["font"],["color"],["width"],["height"],["padding"],["margin"]],getCSS:function(e,t){var i=t.propsConfig,n=i.size,o=i.stepType,r=i.orientation,s=i.stepContainerWidth,a=i.desAlign,l=0,c=0,p=void 0;isHorizontal(r)?(l=isDotType(o)?35:"icon"===o?45:isNormalSize(n)?50:40,p="max-width:"+px2remcss(s&&220<s?s-15:200)+";"):(l=isDotType(o)?15:(isNormalSize(n),25),c=isDotType(o)?20:isNormalSize(n)?35:30);return"top:"+px2remcss(l)+";"+(isHorizontal(r)?"":"left:"+px2remcss(c)+";")+p+("text-align:"+(a&&"center"===a?"center":"left")+";")},defaultTheme:{fontSize:12}},css:(0,_themeCssHoc.css)(_templateObject4)}),FlatLineContainer=(0,_themeCssHoc2.default)({tag:"div",className:"StepFlatLineContainer",normal:{selectNames:[["width"],["height"]],getCSS:function(e,t){var i=t.propsConfig,n=i.isFirst,o=i.stepType,r=i.orientation,s=isFlatType(o)?0:px2remcss(6),a=s,l=0;return isHorizontal(r)&&(a=0,l=s),"padding: "+a+" "+l+";"+(n?"width:0;":"flex: 1;")},getThemeMeta:function(e,t){var i=t.propsConfig.orientation,n=e.width,o=e.height;return{width:getSize(!0,n,i,32),height:getSize(!1,o,i,32)}}},css:(0,_themeCssHoc.css)(_templateObject5)}),SimpleLineContainer=(0,_themeCssHoc2.default)({tag:"div",className:"StepSimpleLineContainer",normal:{selectNames:[["width"],["height"]],getCSS:function(e,t){var i=t.propsConfig,n=i.isFirst,o=i.orientation,r=px2remcss(6),s=r,a=0;return isHorizontal(o)&&(s=0,a=r),"padding: "+s+" "+a+";"+(n?"width:0;":"flex: 1;")},getThemeMeta:function(e,t){var i=t.propsConfig.orientation,n=e.width,o=e.height,r=isHorizontal(i)?"50%":"100%";return{width:getSize(!0,n,i,r),height:getSize(!1,o,i,r)}}},css:(0,_themeCssHoc.css)(_templateObject6)}),SimpleLine=(0,_themeCssHoc2.default)({tag:"div",className:"StepSimpleLine",normal:{selectNames:[["width"],["height"],["border"]],getThemeMeta:function(e,t){var i=e.background,n=void 0===i?{}:i,o=t.propsConfig,r=o.orientation,s=o.isDashed?"dashed":"solid",a=isHorizontal(r)?"bottom":"left",l=e.height,c=e.width,p=getSize(!0,c,r,1),h=getSize(!1,l,r,1),m=isHorizontal(r)?h:p;return Object.assign({},isHorizontal(r)?{width:p}:{height:h},{border:_defineProperty({},a,{width:m,style:s,color:n.color})})}},css:(0,_themeCssHoc.css)(_templateObject7)}),FlatLine=(0,_themeCssHoc2.default)({tag:"div",className:"StepFlatLine",normal:{selectNames:[["width"],["height"],["boxShadow"]],getThemeMeta:function(e,t){var i=t.propsConfig,n=e.height,o=e.width,r=e.boxShadow,s=i.orientation,a=getSize(!0,o,s,6);return{height:getSize(!1,n,s,6),width:a,boxShadow:r||(0,_themeUtils.getBoxShadow)("0 0 2 rgba(104, 79, 255,0.3) inset")}},getCSS:function(e,t){function i(e){var t="before"===e,i=isHorizontal(s)?"top":"left",n=t?"left":"right",o=t?"top":"bottom",r=isHorizontal(s)?n:o;return"  \n           "+i+":"+px2remcss(1)+";\n           "+r+":"+px2remcss(-2)+";\n       "}var s=t.propsConfig.orientation,n=" content: '';\n        opacity: 1;\n        position: absolute;\n        width: "+px2remcss(4)+";\n        height: "+px2remcss(4)+";\n        background: "+(0,_themeCommonDict2.default)("defaultColor")+";";return"\n       &::before {\n        "+n+"\n        "+i("before")+"\n    }\n       &::after {\n        "+n+"\n        "+i("after")+"\n    }"}},css:(0,_themeCssHoc.css)(_templateObject7)}),NormalFlatLine=(0,_themeCssHoc2.default)({tag:"div",className:"StepNormalFlatLine",normal:{selectNames:[["width"],["height"],["background"]],getThemeMeta:function(e,t){var i=t.propsConfig,n=e.height,o=e.width,r=i.orientation,s=getSize(!0,o,r,6);return{height:getSize(!1,n,r,6),width:s}}},css:(0,_themeCssHoc.css)(_templateObject7)}),StepHeadContainer=(0,_themeCssHoc2.default)({tag:"div",className:"StepStepHeadContainer",normal:{selectNames:[["width"],["height"]]},css:(0,_themeCssHoc.css)(_templateObject8)}),Dot=(0,_themeCssHoc2.default)({tag:"div",className:"StepDot",normal:{selectNames:[["background"],["width"],["height"]],defaultTheme:{width:12,height:12}},css:(0,_themeCssHoc.css)(_templateObject9)}),IconContainer=(0,_themeCssHoc2.default)({tag:"div",className:"StepIconContainer",normal:{selectNames:[["fontSize"],["width"],["height"]],getThemeMeta:function(e,t){var i=t.propsConfig.size,n=e.fontSize,o=n||(isNormalSize(i)?32:24);return{width:o,height:o}}},css:(0,_themeCssHoc.css)(_templateObject10)}),StepNumber=(0,_themeCssHoc2.default)({tag:"div",className:"StepNumber",normal:{selectNames:[["color"],["font"],["fontSize"]],getThemeMeta:function(e,t){var i=t.propsConfig.size,n=e.font,o=n&&n.size?n.size:isNormalSize(i)?20:12;return{font:{weight:n&&n.weight?n.weight:700,size:o}}}},css:(0,_themeCssHoc.css)(_templateObject11)}),StepInner=(0,_themeCssHoc2.default)({tag:"div",className:"StepInner",normal:{selectNames:[["fontSize"],["width"],["height"],["background"],["border"],["boxShadow"]],getThemeMeta:function(e,t){var i=t.propsConfig,n=e.width,o=e.height,r=i.size,s=i.stepType,a=24;switch(i.stepStatus){case"finish":case"process":case"error":a=isNormalSize(r)?32:24;break;case"next":case"wait":a=isNormalSize(r)&&isFlatType(s)?32:"mini"===r&&isFlatType(s)?24:isNormalSize(r)?20:12}return{width:n||a,height:o||a}}},css:(0,_themeCssHoc.css)(_templateObject12)}),StepContainer=(0,_themeCssHoc2.default)({tag:"div",className:"StepContainer",normal:{selectNames:[["height"],["width"]],getCSS:function(e,t){var i=t.propsConfig.orientation;return"flex-direction: "+(isHorizontal(i)?"row":"column")+";"}},css:(0,_themeCssHoc.css)(_templateObject13)}),DotContainer=(0,_themeCssHoc2.default)({tag:"div",className:"StepDotContainer",normal:{selectNames:[],getCSS:function(e,t){var i=t.propsConfig.orientation;return"flex-direction: "+(isHorizontal(i)?"row":"column")+";"}},css:(0,_themeCssHoc.css)(_templateObject14)}),BaseInnerContainer=(0,_themeCssHoc2.default)({tag:"div",className:"StepBaseInnerContainer",normal:{selectNames:[["width"],["height"]]},css:(0,_themeCssHoc.css)(_templateObject15)}),StepInnerContainer=(0,_themeCssHoc2.default)({extend:BaseInnerContainer,className:"StepInnerContainer",normal:{selectNames:[["width"],["height"]],getThemeMeta:function(e,t){var i=t.propsConfig,n=e.width,o=e.height,r=i.size,s=isNormalSize(r)?32:24;return{width:n||s,height:o||s}},getCSS:function(e,t){var i=t.propsConfig,n=i.orientation,o=i.stepStatus,r=i.stepType,s=i.desAlign,a=isHorizontal(n)?"align-items: center;top: 50%;transform: translateY(-50%);":"justify-content: center;",l="center"===s?"justify-content: center;":"";return"z-index: "+(!isFlatType(r)||"wait"!==o&&"next"!==o?11:9)+";"+a+";"+l+";"}}}),DotInnerContainer=(0,_themeCssHoc2.default)({extend:BaseInnerContainer,className:"StepDotInnerContainer",normal:{selectNames:[["width"],["height"]],defaultTheme:{width:12,height:12}}}),Step=function(){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.title=React.createRef(),t.desc=React.createRef(),t}return _inherits(i,React.Component),_createClass(i,[{key:"getThemeByPartName",value:function(e){var t=this.props.getPartOfThemeProps,i=void 0;switch(this.state.stepStatus){case"finish":i=t("Finish"+e);break;case"process":i=t("Process"+e);break;case"next":i=t("Next"+e);break;case"error":i=t("Error"+e);break;case"wait":default:i=t("Wait"+e)}return i}},{key:"componentDidMount",value:function(){this.title.current&&(this.titleHeight=this.title.current.offsetHeight,this.titleWidth=this.title.current.offsetWidth),this.desc.current&&(this.descHeight=this.desc.current.offsetHeight,this.descWidth=this.desc.current.offsetWidth);var e=this.props.getChildWidths;e&&e({titleWidth:this.titleWidth,titleHeight:this.titleHeight,descWidth:this.descWidth,descHeight:this.descHeight})}},{key:"render",value:function(){var e=this.props,t=e.stepStatus,i=e.size,n=e.isFirst,o=e.orientation,r=e.stepType;if(n)return this.getStepContainer();var s=this.getThemeColorConfig("color",this.getStepStatusColor(t,r)),a=this.getThemeByPartName("StepOutContainer"),l=a.themeConfig.normal;l&&l.width&&(this.stepContainerWidth=l.width),a.propsConfig={size:i,orientation:o};var c=(0,_objectUtils.deepMerge)(s,a);return React.createElement(StepOutContainer,{themeProps:c},this.getStepContainer())}},{key:"getThemeColorConfig",value:function(e,t){return"background"===e?{background:{color:t}}:{color:t}}},{key:"getStepFontColor",value:function(e,t,i){var n=void 0;switch(e){case"error":n=dangerColor;break;case"finish":n=isFlatType(t)?themeHoverColor:"desc"===i?darkGreyColor:blackColor;break;case"process":n="desc"===i?darkGreyColor:blackColor;break;case"next":case"wait":default:n=lightGreyColor}return n}},{key:"getStepStatusColor",value:function(e,t){var i=void 0;switch(e){case"finish":i=isFlatType(t)?(0,_themeCommonDict2.default)("themeHoverColor"):(0,_themeCommonDict2.default)("successColor");break;case"process":i=isFlatType(t)?(0,_themeCommonDict2.default)("themeHoverColor"):(0,_themeCommonDict2.default)("themeColor");break;case"next":i=(0,_themeCommonDict2.default)("themeColor");break;case"wait":i=(0,_themeCommonDict2.default)("lightGreyColor");break;case"error":default:i=(0,_themeCommonDict2.default)("dangerColor")}return i}},{key:"getStepContainer",value:function(){var e=this.props,t=e.stepType,i=e.isFirst,n=e.size,o=e.orientation,r={themeConfig:{normal:_defineProperty({},isHorizontal(o)?"width":"height",isDotType(t)&&i?12:isNormalSize(n)&&i?32:"mini"===n&&i?24:"100%")}},s=this.getThemeByPartName("StepContainer");s.propsConfig={isFirst:i};var a=(0,_objectUtils.deepMerge)(r,s);return React.createElement(StepHeadContainer,{themeProps:a},this.getStepHead())}},{key:"getDesc",value:function(){var e=this.props,t=e.description,i=e.size,n=e.stepType,o=e.orientation,r=e.desAlign,s=this.state.stepStatus;if(t&&void 0!==t){var a=this.getThemeNormalConfig(this.getThemeColorConfig("color",this.getStepFontColor(s,n,"desc"))),l=this.getThemeByPartName("StepDescription");l.propsConfig={size:i,stepType:n,orientation:o,desAlign:r,stepContainerWidth:this.stepContainerWidth};var c=(0,_objectUtils.deepMerge)(a,l);return React.createElement(Description,{ref:this.desc,themeProps:c},t)}return null}},{key:"getTitle",value:function(){var e=this.props,t=e.title,i=e.size,n=e.orientation,o=e.stepType,r=e.desAlign,s=this.state.stepStatus,a=this.getThemeNormalConfig(this.getThemeColorConfig("color",this.getStepFontColor(s,o))),l=this.getThemeByPartName("StepTitle");l.propsConfig={size:i,stepType:o,orientation:n,desAlign:r};var c=(0,_objectUtils.deepMerge)(a,l);return React.createElement(Title,{ref:this.title,themeProps:c},t)}},{key:"getStepHead",value:function(){var e=this.props,t=e.stepType,i=e.orientation,n=this.state.stepStatus,o=this.getThemeByPartName("StepContainer");o.propsConfig={orientation:i};var r=this.getThemeByPartName("StepDot");if(r.propsConfig={orientation:i},isDotType(t)){var s=this.getThemeNormalConfig(this.getThemeColorConfig("background",this.getStepStatusColor(n,t))),a=(0,_objectUtils.deepMerge)(s,r);return React.createElement(DotContainer,{themeProps:a},this.matchLine(),React.createElement(DotInnerContainer,{themeProps:a},React.createElement(Dot,{themeProps:a}),this.getTitle(),this.getDesc()))}return React.createElement(StepContainer,{themeProps:o},this.matchLine(),this.getStep())}},{key:"matchLine",value:function(){var e=this.props,t=e.stepType,i=e.isFirst,n=e.orientation;if(i)return null;var o=this.getThemeByPartName("StepLine");return o.propsConfig={isFirst:i,stepType:t,orientation:n},isFlatType(t)?React.createElement(FlatLineContainer,{themeProps:o},this.getFlatLine()):React.createElement(SimpleLineContainer,{themeProps:o},this.getSimpleLine())}},{key:"getFlatLine",value:function(){var e=this.props,t=e.isDashed,i=e.stepType,n=e.orientation,o=this.state.stepStatus,r=this.getThemeNormalConfig(this.getThemeColorConfig("background",this.getStepStatusColor(o,i))),s=this.getThemeByPartName("StepFlatLine");s.propsConfig={orientation:n,isDashed:t,stepType:i,stepStatus:o};var a=(0,_objectUtils.deepMerge)(r,s);return"wait"===o||"next"===o?React.createElement(FlatLine,{themeProps:a}):React.createElement(NormalFlatLine,{themeProps:a})}},{key:"getSimpleLine",value:function(){var e=this.props,t=e.isDashed,i=e.stepType,n=e.orientation,o=this.state.stepStatus,r=this.getThemeNormalConfig(this.getThemeColorConfig("background",this.getStepStatusColor(o,i))),s=this.getThemeByPartName("StepLine");s.propsConfig={orientation:n,isDashed:t,stepType:i,stepStatus:o};var a=(0,_objectUtils.deepMerge)(r,s);return React.createElement(SimpleLine,{themeProps:a})}},{key:"getIcon",value:function(e){return"finish"===e?"lugia-icon-reminder_check":"error"===e?"lugia-icon-reminder_close":""}},{key:"getStepBackgroundColor",value:function(e,t){return"finish"!==e&&"process"!==e||!isFlatType(t)?"process"===e?themeColor:"error"===e&&isFlatType(t)?dangerColor:defaultColor:themeHoverColor}},{key:"getStep",value:function(){var e=this.props,t=e.icon,i=void 0===t?"lugia-icon-financial_cloud":t,n=e.stepType,r=e.size,o=e.orientation,s=e.desAlign,a=this.state.stepStatus,l=this.getIcon(a);if(isFlatType(n)||"simple"===n){var c=this.getThemeByPartName("StepInnerContainer");c.propsConfig={stepType:n,size:r,orientation:o,stepStatus:a,desAlign:s};var p=!isFlatType(n)||"wait"!==a&&"next"!==a?{}:this.getThemeNormalConfig({boxShadow:(0,_themeUtils.getBoxShadow)("0 0 2 rgba(104, 79, 255,0.3) inset")}),h="flat"!==n?this.getThemeNormalConfig({border:(0,_themeUtils.getBorder)({color:this.getStepStatusColor(a,n),width:1,style:"solid"})}):{},m=(0,_objectUtils.deepMerge)(p,h,this.getThemeNormalConfig(this.getThemeColorConfig("background",this.getStepBackgroundColor(a,n))),c),g=this.props.getPartOfThemeHocProps("StepInnerIcon"),u=g.theme,d=g.viewClass,f=(0,_objectUtils.deepMerge)(_defineProperty({},d,{normal:{getCSS:function(){return"  \n                display: inline-block;\n                user-select: none;\n                text-align: center;\n                font-weight: 700;\n                line-height: 1;\n                z-index: 5;"},getThemeMeta:function(e,t){var i=e.color,n=t.propsConfig,o=n.stepType,r=n.stepStatus;return{color:i||(isFlatType(o)?defaultColor:"finish"===r?successColor:"error"===r?dangerColor:themeColor),fontSize:18}}}}),u);return React.createElement(StepInnerContainer,{themeProps:c},React.createElement(StepInner,{themeProps:m,stepType:n,size:r,orientation:o,stepStatus:a},React.createElement(_icon2.default,{propsConfig:Object.assign({},this.getConfigs()),iconClass:l,theme:f,viewClass:d,singleTheme:!0}),this.getStepNumber()),this.getTitle(),this.getDesc())}if("icon"===n){var C=this.props.getPartOfThemeHocProps("StepIcon"),S=C.theme,_=C.viewClass,b=(0,_objectUtils.deepMerge)(_defineProperty({},_,{normal:{getCSS:function(){return"  \n                  position: absolute;\n                  user-select: none;\n                  text-align: center;\n                  font-weight: 700;\n                  line-height: 1;\n                  top: 50%;\n                  transform: translateY(-50%);"},getThemeMeta:function(e,t){var i=e.color,n=e.fontSize,o=t.propsConfig.stepStatus;return{fontSize:n||(isNormalSize(r)?32:24),color:i||("finish"===o?successColor:"process"===o||"next"===o?themeColor:"wait"===o?lightGreyColor:"error"===o?dangerColor:themeColor)}}}}),S);return React.createElement(IconContainer,{themeProps:this.props.getPartOfThemeProps("StepIcon",{props:{size:r}})},React.createElement(_icon2.default,{iconClass:i,propsConfig:{stepStatus:a},theme:b,viewClass:_,singleTheme:!0}),this.getTitle(),this.getDesc())}}},{key:"getStepValue",value:function(e,t){return("finish"===t||"process"===t)&&0<e?e:0}},{key:"getStepNumber",value:function(){var e=this.props,t=e.size,i=e.stepNumber,n=this.state.stepStatus,o=this.getStepValue(i,n);if("process"!==n)return null;var r=this.getThemeByPartName("StepNumber");r.propsConfig={size:t};var s=(0,_objectUtils.deepMerge)(this.getThemeNormalConfig({color:defaultColor}),r);return React.createElement(StepNumber,{size:t,themeProps:s},o)}},{key:"getThemeNormalConfig",value:function(e){return{themeConfig:{normal:e}}}},{key:"getConfigs",value:function(){return{stepType:this.props.stepType,stepStatus:this.state.stepStatus}}}],[{key:"getDerivedStateFromProps",value:function(e,t){var i=e.currentStepNumber,n=e.stepNumber,o=e.stepStatus,r=o&&void 0!==o;return r?{stepStatus:o}:{stepStatus:r?o:n<i?"finish":i===n?"process":"wait"}}}]),i}();Step.defaultProps={},Step.displayName=_index2.default.Step;var _Step=exports._Step=Step,TargetStep=(0,_themeProvider2.default)((0,_KeyBoardEventAdaptor2.default)(Step),_index2.default.Step);exports.default=TargetStep;