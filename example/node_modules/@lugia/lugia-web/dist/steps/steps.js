"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultData=void 0;var _createClass=function(){function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}}(),_templateObject=_taggedTemplateLiteral(["\n    display: inline-block;\n    position: relative;\n    font-size: 1.2rem;\n  "],["\n    display: inline-block;\n    position: relative;\n    font-size: 1.2rem;\n  "]),_templateObject2=_taggedTemplateLiteral(["\n    font-variant: tabular-nums;\n    box-sizing: border-box;\n    list-style: none;\n    display: flex;\n  "],["\n    font-variant: tabular-nums;\n    box-sizing: border-box;\n    list-style: none;\n    display: flex;\n  "]),_templateObject3=_taggedTemplateLiteral(["\n    display: ",";\n  "],["\n    display: ",";\n  "]);require("../common/shirm");var _react=require("react"),_react2=_interopRequireDefault(_react),_index=require("../consts/index"),_index2=_interopRequireDefault(_index),_KeyBoardEventAdaptor=require("../common/KeyBoardEventAdaptor"),_KeyBoardEventAdaptor2=_interopRequireDefault(_KeyBoardEventAdaptor),_themeProvider=require("../theme-provider"),_themeProvider2=_interopRequireDefault(_themeProvider),_step=require("./step"),_step2=_interopRequireDefault(_step),_ObjectUtils=require("../common/ObjectUtils"),_themeCssHoc=require("@lugia/theme-css-hoc"),_themeCssHoc2=_interopRequireDefault(_themeCssHoc),_objectUtils=require("@lugia/object-utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _taggedTemplateLiteral(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var StepsOutContainer=(0,_themeCssHoc2.default)({tag:"div",className:"StepsOutContainer",normal:{selectNames:[["width"],["height"],["margin"],["padding"],["background"],["opacity"]],getThemeMeta:function(e,t){var r=e.width,i=e.height,n=t.propsConfig.orientation,a=r&&0<r?r:"",o=i&&0<i?i:"";return(0,_step.isHorizontal)(n)?{width:a}:{height:o}}},css:(0,_themeCssHoc.css)(_templateObject)}),HStepsOutContainer=(0,_themeCssHoc2.default)({tag:"div",className:"HStepsOutContainer",normal:{selectNames:[["width"],["height"]],getCSS:function(e,t){var r=t.propsConfig.orientation;return" flex-direction: "+((0,_step.isHorizontal)(r)?"row":"column")+";"},getThemeMeta:function(e,t){var r=t.propsConfig.orientation;return(0,_step.isHorizontal)(r)?{width:"100%"}:{height:"100%"}}},css:(0,_themeCssHoc.css)(_templateObject2)}),ContentContainer=(0,_themeCssHoc2.default)({tag:"div",className:"StepsContentContainer",normal:{selectNames:[["width"],["height"]],getCSS:function(e,t){var r=t.propsConfig.orientation;return"display:"+((0,_step.isHorizontal)(r)?"block":"inline-block")+";"}}}),OrientationContainer=(0,_themeCssHoc.StaticComponent)({tag:"div",className:"StepsContentContainer",css:(0,_themeCssHoc.css)(_templateObject3,function(e){return(0,_step.isHorizontal)(e.orientation)?"block":"inline-block"})}),defaultData=exports.defaultData=[{title:"step1",stepStatus:"finish"},{title:"step2",stepStatus:"process"},{title:"step3",stepStatus:"next"},{title:"step4",stepStatus:"wait"}],Steps=function(){function t(e){_classCallCheck(this,t);var p=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return p.state={_renderAgain:!1},p.childrenLength=0,p.titleWidthArray=[],p.titleHeightArray=[],p.descWidthArray=[],p.descHeightArray=[],p.childArray=[],p.contentWidth=0,p.contentHeight=0,p.getChildWidths=function(e){var t=e.titleWidth,r=e.titleHeight,i=e.descWidth,n=e.descHeight;if(p.titleWidthArray.push(t),p.titleHeightArray.push(r),p.descWidthArray.push(i),p.descHeightArray.push(n),p.childrenLength===p.titleWidthArray.length){var a=p.getMaxNumber(p.descWidthArray),o=p.getMaxNumber(p.descHeightArray),s=p.getMaxNumber(p.titleWidthArray),l=p.getMaxNumber(p.titleHeightArray);p.contentWidth=a&&s<a?a:s,p.contentHeight=o?l+o:l}p.setState({_renderAgain:!0})},p}return _inherits(t,_react.Component),_createClass(t,[{key:"render",value:function(){var e=this.props.orientation,t=this.props.getPartOfThemeProps("StepsOutContainer",{props:{orientation:e}}),r=(0,_step.isHorizontal)(e)?{height:this.contentHeight}:{width:this.contentWidth},i=(0,_objectUtils.deepMerge)({themeConfig:{normal:r}},this.props.getPartOfThemeProps("StepsContentContainer",{props:{orientation:e}}));return _react2.default.createElement(StepsOutContainer,{themeProps:t,orientation:e},_react2.default.createElement("div",null,_react2.default.createElement(OrientationContainer,null,this.getHSteps()),_react2.default.createElement(ContentContainer,{themeProps:i})))}},{key:"getHSteps",value:function(){var e=this.props,t=e.orientation,r=e.stepType,i=this.props.getPartOfThemeProps("StepsContainer",{props:{orientation:t}});return _react2.default.createElement(HStepsOutContainer,{orientation:t,stepType:r,themeProps:i},this.getChildren())}},{key:"getStepsConfig",value:function(e,t){var r=this.props,i=r.orientation,n=r.stepType,a=r.size,o=r.currentStepNumber,s=r.desAlign,l=r.getPartOfThemeHocProps;return Object.assign({},l("Step"),{orientation:i,stepType:n,size:a,stepNumber:t+1,isFirst:0===t,currentStepNumber:o,desAlign:s,title:(0,_ObjectUtils.getAttributeFromObject)(e,"title",(0,_ObjectUtils.getAttributeFromObject)(e.props,"title","")),stepStatus:(0,_ObjectUtils.getAttributeFromObject)(e,"stepStatus",(0,_ObjectUtils.getAttributeFromObject)(e.props,"stepStatus",void 0)),description:(0,_ObjectUtils.getAttributeFromObject)(e,"description",(0,_ObjectUtils.getAttributeFromObject)(e.props,"description","")),icon:(0,_ObjectUtils.getAttributeFromObject)(e,"icon",(0,_ObjectUtils.getAttributeFromObject)(e.props,"icon","lugia-icon-financial_cloud")),isDashed:(0,_ObjectUtils.getAttributeFromObject)(e,"isDashed",(0,_ObjectUtils.getAttributeFromObject)(e.props,"isDashed",!1)),getChildWidths:this.getChildWidths})}},{key:"getChildren",value:function(){var r=this,e=this.props,t=e.children,i=e.data,n=e.defaultData,a=i?this.data2Step(i):Array.isArray(t)&&0<t.length?_react2.default.Children.map(t,function(e,t){return _react2.default.cloneElement(e,r.getStepsConfig(e,t))}):this.data2Step(n);return this.childrenLength=a.length,a}},{key:"getMaxNumber",value:function(e){return Math.max.apply(null,e)}},{key:"data2Step",value:function(e){var r=this;return e.map(function(e,t){return r.getStep(e,t)})}},{key:"getStep",value:function(e,t){return _react2.default.createElement(_step2.default,this.getStepsConfig(e,t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){}}]),t}();Steps.defaultProps={currentStepNumber:0,stepType:"simple",size:"normal",orientation:"horizontal",desAlign:"left",defaultData:defaultData},Steps.displayName=_index2.default.Steps;var TargetSteps=(0,_themeProvider2.default)((0,_KeyBoardEventAdaptor2.default)(Steps),_index2.default.Steps);exports.default=TargetSteps;