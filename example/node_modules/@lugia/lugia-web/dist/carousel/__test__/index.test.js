"use strict";var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_react=require("react"),_react2=_interopRequireDefault(_react);require("jest-styled-components");var _enzyme=require("enzyme"),_enzyme2=_interopRequireDefault(_enzyme),_enzymeAdapterReact=require("enzyme-adapter-react-16"),_enzymeAdapterReact2=_interopRequireDefault(_enzymeAdapterReact),_index=require("../index"),_index2=_interopRequireDefault(_index),_carousel=require("../carousel.js"),_carousel2=_interopRequireDefault(_carousel),_reactTestRenderer=require("react-test-renderer"),_reactTestRenderer2=_interopRequireDefault(_reactTestRenderer),_reactTestUtils=require("@lugia/react-test-utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var u=e.apply(this,arguments);return new Promise(function(c,l){return function t(e,r){try{var a=u[e](r),n=a.value}catch(e){return void l(e)}if(!a.done)return Promise.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});c(n)}("next")})}}_enzyme2.default.configure({adapter:new _enzymeAdapterReact2.default}),describe("Carousel",function(){function t(e){return e.find("PreButton")}function r(e){return e.find("NextButton")}function a(e){return e.find("IndicatorContainer")}function n(e,t){return function(e){return e.find("indicator")}(e).at(t)}function c(e,t){n(e,t).simulate("click")}function l(e,t){(function(e,t){return a(e).at(t)})(e,t).simulate("mouseEnter")}function u(e){t(e).at(0).simulate("click")}function o(e){r(e).at(0).simulate("click")}it("getItemWrap switchType : horizontal",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,null)).children().instance().getItemWrap({switchType:"horizontal",start:0,index:1,width:50,height:50,item:"hello world",animationTime:500});expect(_reactTestRenderer2.default.create(_react2.default.createElement("div",null,e)).toJSON()).toMatchSnapshot()}),it("getItemWrap switchType : vertical",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,null)).children().instance().getItemWrap({switchType:"vertical",start:0,index:1,width:50,height:50,item:"hello world",animationTime:500});expect(_reactTestRenderer2.default.create(_react2.default.createElement("div",null,e)).toJSON()).toMatchSnapshot()}),it("getItemWrap switchType : fade",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,null)).children().instance().getItemWrap({switchType:"fade",start:0,index:1,width:50,height:50,item:"hello world",animationTime:500});expect(_reactTestRenderer2.default.create(_react2.default.createElement("div",null,e)).toJSON()).toMatchSnapshot()}),it("isHasStart ",function(){expect((0,_carousel.isHasStart)({start:0})).toBeTruthy(),expect((0,_carousel.isHasStart)({})).toBeFalsy()}),it("getInitStart ",function(){var e=["知行合一","拙能胜巧","有求皆苦","无欲则刚"];expect((0,_carousel.getInitStart)({},0)).toBe(0),expect((0,_carousel.getInitStart)({children:e},1)).toBe(1),expect((0,_carousel.getInitStart)({children:e},-1)).toBe(0),expect((0,_carousel.getInitStart)({children:e},5)).toBe(0),expect((0,_carousel.getInitStart)({children:e},4)).toBe(4)}),it("getAnimationTime ",function(){expect(_carousel2.default.prototype.getAnimationTime({animationTime:1e3})).toBe(1e3),expect(_carousel2.default.prototype.getAnimationTime({animationTime:100})).toBe(200),expect(_carousel2.default.prototype.getAnimationTime({animationTime:2e5})).toBe(1e5),expect(_carousel2.default.prototype.getAnimationTime({animationTime:0})).toBe(200),expect(_carousel2.default.prototype.getAnimationTime({animationTime:void 0})).toBe(500)}),it("getPreStart ",function(){expect(_carousel2.default.prototype.getPreStart("pre",1,4)).toEqual({preStart:1,newStart:0}),expect(_carousel2.default.prototype.getPreStart("pre",0,4)).toEqual({preStart:4,newStart:3}),expect(_carousel2.default.prototype.getPreStart("pre",3,4)).toEqual({preStart:3,newStart:2}),expect(_carousel2.default.prototype.getPreStart("next",0,4)).toEqual({preStart:0,newStart:1}),expect(_carousel2.default.prototype.getPreStart("next",1,4)).toEqual({preStart:1,newStart:2}),expect(_carousel2.default.prototype.getPreStart("next",3,4)).toEqual({preStart:3,newStart:4}),expect(_carousel2.default.prototype.getPreStart("next",4,4)).toEqual({preStart:0,newStart:1})}),it("is Has SwitchButton,indicatorType : default ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,null,_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3")));expect(t(e).length).toBe(1),expect(r(e).length).toBe(1)}),it("is Has SwitchButton,indicatorType : outside ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{switchType:"outside"},_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3")));expect(t(e).length).toBe(1),expect(r(e).length).toBe(1)}),it("is Has SwitchButton,indicatorType : vertical ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{indicatorType:"vertical"},_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3")));expect(t(e).length).toBe(0),expect(r(e).length).toBe(0)}),it("how many indicator,childrne : 0 ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,null));expect(a(e).length).toBe(0)}),it("how many indicator,children : 3 ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,null,_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3")));expect(a(e).length).toBe(3)}),it("how many indicator,children : 3 ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{defaultStart:0},_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3")));expect(a(e).length).toBe(3)}),it("how many indicator,children : 0 ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{defaultStart:0}));expect(a(e).length).toBe(0)}),it("hover indicator defaultStart = 0 , this indicator props checked",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{defaultStart:0},_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3"),_react2.default.createElement("div",null,"4"))),expect(a(t).length).toBe(4),expect(n(t,0).props().checked).toBeTruthy(),l(t,2),e.next=6,(0,_reactTestUtils.delay)(1e3);case 6:expect(n(t,0).props().checked).toBeFalsy(),expect(n(t,2).props().checked).toBeTruthy();case 8:case"end":return e.stop()}},e,void 0)}))),it("hover indicator defaultStart = 4 , this indicator props checked",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{defaultStart:4},_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3"),_react2.default.createElement("div",null,"4"))),expect(a(t).length).toBe(4),expect(n(t,0).props().checked).toBeTruthy(),c(t,1),e.next=6,(0,_reactTestUtils.delay)(1e3);case 6:return expect(n(t,0).props().checked).toBeTruthy(),expect(n(t,1).props().checked).toBeFalsy(),l(t,2),e.next=11,(0,_reactTestUtils.delay)(1e3);case 11:expect(n(t,0).props().checked).toBeFalsy(),expect(n(t,2).props().checked).toBeTruthy();case 13:case"end":return e.stop()}},e,void 0)}))),it("click indicator  defaultStart = 0, this indicator props checked",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{action:"click",defaultStart:0},_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3"),_react2.default.createElement("div",null,"4"))),expect(a(t).length).toBe(4),expect(n(t,0).props().checked).toBeTruthy(),l(t,1),e.next=6,(0,_reactTestUtils.delay)(1e3);case 6:return expect(n(t,0).props().checked).toBeTruthy(),expect(n(t,1).props().checked).toBeFalsy(),c(t,2),e.next=11,(0,_reactTestUtils.delay)(1e3);case 11:expect(n(t,0).props().checked).toBeFalsy(),expect(n(t,2).props().checked).toBeTruthy();case 13:case"end":return e.stop()}},e,void 0)}))),it("click indicator  defaultStart = 4, this indicator props checked",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{action:"click",defaultStart:4},_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3"),_react2.default.createElement("div",null,"4"))),expect(a(t).length).toBe(4),expect(n(t,0).props().checked).toBeTruthy(),c(t,2),e.next=6,(0,_reactTestUtils.delay)(1e3);case 6:expect(n(t,0).props().checked).toBeFalsy(),expect(n(t,2).props().checked).toBeTruthy();case 8:case"end":return e.stop()}},e,void 0)}))),it("click PreButton  defaultStart = 0, this indicator props checked",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{defaultStart:0},_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3"),_react2.default.createElement("div",null,"4"))),expect(a(t).length).toBe(4),expect(n(t,0).props().checked).toBeTruthy(),u(t),e.next=6,(0,_reactTestUtils.delay)(1e3);case 6:return expect(n(t,3).props().checked).toBeTruthy(),e.next=9,(0,_reactTestUtils.delay)(1e3);case 9:return u(t),e.next=12,(0,_reactTestUtils.delay)(1e3);case 12:expect(n(t,2).props().checked).toBeTruthy();case 13:case"end":return e.stop()}},e,void 0)}))),it("click NextButton  defaultStart = 0, this indicator props checked",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{defaultStart:0},_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3"),_react2.default.createElement("div",null,"4"))),expect(a(t).length).toBe(4),expect(n(t,0).props().checked).toBeTruthy(),o(t),e.next=6,(0,_reactTestUtils.delay)(1e3);case 6:return expect(n(t,1).props().checked).toBeTruthy(),e.next=9,(0,_reactTestUtils.delay)(1e3);case 9:return o(t),e.next=12,(0,_reactTestUtils.delay)(1e3);case 12:expect(n(t,2).props().checked).toBeTruthy();case 13:case"end":return e.stop()}},e,void 0)}))),it("double click NextButton defaultStart = 3, , this indicator props checked",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{defaultStart:3},_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3"),_react2.default.createElement("div",null,"4"))),expect(a(t).length).toBe(4),expect(n(t,3).props().checked).toBeTruthy(),o(t),e.next=6,(0,_reactTestUtils.delay)(1e3);case 6:return expect(n(t,0).props().checked).toBeTruthy(),e.next=9,(0,_reactTestUtils.delay)(1e3);case 9:return o(t),o(t),e.next=13,(0,_reactTestUtils.delay)(1e3);case 13:expect(n(t,1).props().checked).toBeTruthy();case 14:case"end":return e.stop()}},e,void 0)}))),it("handleAutoPlay",_asyncToGenerator(_regenerator2.default.mark(function e(){var t;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,_enzyme.mount)(_react2.default.createElement(_index2.default,{defaultStart:0,autoPlay:!0,delay:200,animationTime:200},_react2.default.createElement("div",null,"1"),_react2.default.createElement("div",null,"2"),_react2.default.createElement("div",null,"3"),_react2.default.createElement("div",null,"4"))),expect(a(t).length).toBe(4),expect(n(t,0).props().checked).toBeTruthy(),expect(n(t,1).props().checked).toBeFalsy(),expect(n(t,2).props().checked).toBeFalsy(),expect(n(t,3).props().checked).toBeFalsy(),e.next=8,(0,_reactTestUtils.delay)(250);case 8:return t.update(),expect(n(t,0).props().checked).toBeFalsy(),expect(n(t,1).props().checked).toBeTruthy(),expect(n(t,2).props().checked).toBeFalsy(),expect(n(t,3).props().checked).toBeFalsy(),e.next=15,(0,_reactTestUtils.delay)(1e3);case 15:return t.update(),expect(n(t,0).props().checked).toBeFalsy(),expect(n(t,1).props().checked).toBeFalsy(),expect(n(t,2).props().checked).toBeTruthy,expect(n(t,3).props().checked).toBeFalsy(),e.next=22,(0,_reactTestUtils.delay)(1e3);case 22:t.update(),expect(n(t,0).props().checked).toBeFalsy(),expect(n(t,1).props().checked).toBeFalsy(),expect(n(t,2).props().checked).toBeFalsy,expect(n(t,3).props().checked).toBeTruthy();case 27:case"end":return e.stop()}},e,void 0)})))});