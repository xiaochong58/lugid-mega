"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}}();exports.getLastIndex=getLastIndex;var _react=require("react"),React=_interopRequireWildcard(_react),_paragraph=require("./paragraph"),_paragraph2=_interopRequireDefault(_paragraph),_NumberUtils=require("../common/NumberUtils"),_skeleton=require("../css/skeleton");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DefaultParagraphCount=3;function getLastIndex(e){return e-1}var Skeleton=function(){function o(){var e,t,u;_classCallCheck(this,o);for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=u=_possibleConstructorReturn(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(a)))).getTitle=function(){if(!u.props.title)return null;var e=u.props,t=e.animation,r=(0,e.getPartOfThemeProps)("Title",{props:{type:"title"}});return React.createElement(_paragraph2.default,{themeProps:r,animation:t})},u.getParagraph=function(e){if(0===e)return null;for(var t=u.props,r=t.animation,a=t.getPartOfThemeProps,n=[],o=0;o<e;o++){var i=a("Paragraph",{selector:{index:o,count:e},props:{type:"paragraph",firstItem:0===o,lastItem:u.isLastItem(e,o)}});n.push(React.createElement(_paragraph2.default,{themeProps:i,animation:r}))}return n},u.getPictrue=function(){if(!u.props.picture)return null;var e=u.props,t=e.animation,r=(0,e.getPartOfThemeProps)("Picture");return React.createElement(_skeleton.PictrueContainer,{themeProps:r},React.createElement(_skeleton.Picture,{themeProps:r},t?React.createElement(_skeleton.AnimationItem,{themeProps:r}):null))},_possibleConstructorReturn(u,t)}return _inherits(o,React.Component),_createClass(o,[{key:"render",value:function(){var e=this.props,t=e.paragraph,r=e.loading,a=e.children,n=(0,e.getPartOfThemeProps)("Wrap");return r?React.createElement(_skeleton.SkeletonWrap,{themeProps:n},React.createElement(_skeleton.SkeletonContainer,{themeProps:n},this.getAvatar(),React.createElement(_skeleton.ParagraphContainer,{themeProps:n},this.getTitle(),this.getParagraph(this.getParagraphCount(t))),this.getPictrue())):a}},{key:"getAvatar",value:function(){var e=this.props,t=e.avatar,r=e.animation;if(!t)return null;var a=this.props.getPartOfThemeProps("Avatar");return React.createElement(_skeleton.AvatarContainer,{themeProps:a},React.createElement(_skeleton.Avatar,{themeProps:a},r?React.createElement(_skeleton.AnimationItem,{themeProps:a}):null))}},{key:"addPropsConfig",value:function(e,t){var r=Object.assign({},e);return r.propsConfig=t,r}},{key:"isLastItem",value:function(e,t){return!(e<=2)&&t===getLastIndex(e)}},{key:"getParagraphCount",value:function(e){var t=0<arguments.length&&void 0!==e?e:{rows:DefaultParagraphCount};if(null===t)return DefaultParagraphCount;var r=t.rows,a=void 0===r?DefaultParagraphCount:r;return(0,_NumberUtils.toNumber)(a,DefaultParagraphCount)}}]),o}();Skeleton.defaultProps={title:!0,avatar:!0,picture:!1,loading:!0,animation:!1,paragraph:{rows:DefaultParagraphCount}},exports.default=Skeleton;