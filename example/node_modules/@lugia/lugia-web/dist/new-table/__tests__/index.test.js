"use strict";var _react=require("react"),_react2=_interopRequireDefault(_react);require("jest-styled-components");var _enzyme=require("enzyme"),_enzyme2=_interopRequireDefault(_enzyme),_enzymeAdapterReact=require("enzyme-adapter-react-16"),_enzymeAdapterReact2=_interopRequireDefault(_enzymeAdapterReact),_editTableView=require("../editTableView"),_editTableView2=_interopRequireDefault(_editTableView),_table=require("../table"),_table2=_interopRequireDefault(_table),_reactTestRenderer=require("react-test-renderer"),_reactTestRenderer2=_interopRequireDefault(_reactTestRenderer);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _require=require("@lugia/jverify"),mockObject=_require.mockObject,VerifyOrder=_require.VerifyOrder,VerifyOrderConfig=_require.VerifyOrderConfig,render=function(){return!0},defaultTableTheme={Td:{normal:{padding:0}}},columns=[{title:"姓名",dataIndex:"name",key:"name",width:100,align:"center"},{title:"Age",dataIndex:"age",key:"age"},{title:"Address",dataIndex:"address",key:"address",width:200},{title:"isIn",dataIndex:"isIn",key:"isIn",width:200,render:render}],columnsIntoData=[{name:"姓名",age:"Age",address:"Address",isIn:"isIn",isHead:!0}],columnsWidthRender=[{title:"姓名",dataIndex:"name",key:"name",width:100,align:"center",render:function(){return!0}},{title:"Age",dataIndex:"age",key:"age",render:function(){return!0}},{title:"Address",dataIndex:"address",key:"address",width:200,render:function(){return!0}},{title:"isIn",dataIndex:"isIn",key:"isIn",width:200,customRender:render,render:function(){return!0}}],data=[{name:"",age:28,key:"1",isIn:!0},{name:"Rose",age:36,address:"some where",key:"2",isIn:!0},{name:"Uzi",age:36,address:"some where",key:"3",isIn:!1},{name:"ClearLove",age:36,address:"some where",key:"4",isIn:!0},{name:"Rookie",age:36,address:"some where",key:"5",isIn:!0},{name:"TheShy",age:36,address:"some where",key:"6",isIn:!0}],dataKeyMap={columnsMap:{name:0,age:1,address:2,isIn:3},dataMap:{0:{name:"",age:28,key:"1",isIn:!0},1:{name:"Rose",age:36,address:"some where",key:"2",isIn:!0},2:{name:"Uzi",age:36,address:"some where",key:"3",isIn:!1},3:{name:"ClearLove",age:36,address:"some where",key:"4",isIn:!0},4:{name:"Rookie",age:36,address:"some where",key:"5",isIn:!0},5:{name:"TheShy",age:36,address:"some where",key:"6",isIn:!0}}},getCmp=function(e){return e.children().instance()};_enzyme2.default.configure({adapter:new _enzymeAdapterReact2.default}),describe("new-table",function(){it(" Table css ",function(){var e=_react2.default.createElement(_table2.default,{data:data,columns:columns});expect(_reactTestRenderer2.default.create(e).toJSON()).toMatchSnapshot()}),it(" EditTable css",function(){var e=_react2.default.createElement(_editTableView2.default,{data:data,columns:columns});expect(_reactTestRenderer2.default.create(e).toJSON()).toMatchSnapshot()}),it(" Table data & columns ",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_table2.default,{data:data,columns:columns}));expect(e.props().data).toEqual(data),expect(e.props().columns).toEqual(columns)}),it(" Table tableSize=middle,tableStyle=linear",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_table2.default,{data:data,columns:columns,tableSize:"middle",tableStyle:"linear"}));expect(e.props().tableSize).toEqual("middle"),expect(e.props().tableStyle).toEqual("linear")}),it(" Table tableSize=large,tableStyle=bordered",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_table2.default,{data:data,columns:columns,tableSize:"large",tableStyle:"bordered"}));expect(e.props().tableSize).toEqual("large"),expect(e.props().tableStyle).toEqual("bordered")});var a=f(getCmp((0,_enzyme.mount)(_react2.default.createElement(_editTableView2.default,{data:data,columns:columns})))).editTableListener;it(" EditTable restColumnsIntoData ",function(){expect(a.restColumnsIntoData(columns)).toEqual(columnsIntoData)}),it(" EditTable restColumnsIntoData  columns is null || undefined || []",function(){var e=a.restColumnsIntoData;expect(e(null)).toEqual([]),expect(e(void 0)).toEqual([]),expect(e([])).toEqual([])});var e={selectColumn:0,selectRow:0},t={selectColumn:0,selectRow:0},l={selectColumn:0,selectRow:1},n=a.isSelectSameItem;it(" EditTable isSelectSameItem",function(){expect(n(e,t)).toBeTruthy(),expect(n(e,l)).toBeFalsy()}),it(" EditTable isSelectSameItem currentItem  is null || undefined || {}",function(){expect(n(e,null)).toBeFalsy(),expect(n(e,void 0)).toBeFalsy(),expect(n(e,{})).toBeFalsy()}),it(" EditTable isSelectSameItem oldItem  is null || undefined || {}",function(){expect(n(null,t)).toBeFalsy(),expect(n(void 0,t)).toBeFalsy(),expect(n({},t)).toBeFalsy()});var r={viewClass:"abc",theme:{abc:{Container:{normal:{width:"100%"}}}}},o={viewClass:"abc",theme:{abc:Object.assign({Container:{normal:{width:"100%"}}},defaultTableTheme)}},s={viewClass:"abc",theme:{abc:{Container:{normal:{width:"100%"}},Td:{normal:{padding:20}}}}},d={viewClass:"abc",theme:{abc:{Container:{normal:{width:"100%"}},Td:{normal:{padding:20}}}}};it(" EditTable getThemeForTable",function(){var e=a.getThemeForTable;expect(e(r,defaultTableTheme)).toEqual(o),expect(e(s,defaultTableTheme)).toEqual(d)}),it(" EditTable restColumnsWithRender columns is null || undefined || []",function(){var e=a.restColumnsWithRender;expect(e(null)).toEqual([]),expect(e(void 0)).toEqual([]),expect(e([])).toEqual([])});var i=[{selectColumn:0,selectRow:0}],c=[{selectColumn:0,selectRow:0},{selectColumn:1,selectRow:1}],u=a.isSelected;it(" EditTable isSelected",function(){expect(u(t,i)).toBeTruthy(),expect(u(t,c)).toBeTruthy()}),it(" EditTable isSelected selectCell is null || undefined || []",function(){expect(u(t,null)).toBeFalsy(),expect(u(t,void 0)).toBeFalsy(),expect(u(t,[])).toBeFalsy()}),it(" EditTable isSelected currentItem is null || undefined || {}",function(){expect(u(null,i)).toBeFalsy(),expect(u(void 0,i)).toBeFalsy(),expect(u({},i)).toBeFalsy()});var m=a.isEditCell;it(" EditTable isEditCell",function(){expect(m(t,l)).toBeFalsy(),expect(m(t,e)).toBeTruthy()}),it(" EditTable isEditCell editCell is null || undefined || {}",function(){expect(m(t,null)).toBeFalsy(),expect(m(t,void 0)).toBeFalsy(),expect(m(t,{})).toBeFalsy()}),it(" EditTable isEditCell currentItem is null || undefined || {}",function(){expect(m(null,e)).toBeFalsy(),expect(m(void 0,e)).toBeFalsy(),expect(m({},e)).toBeFalsy()});var p={selectColumn:2,selectRow:2},y=[{selectColumn:1,selectRow:1}];it(" EditTable resetItemName ",function(){var e=p,t=a.resetItemName;expect(t(e)).toEqual({columnIndex:2,rowIndex:1})}),it(" EditTable getCellItem ",function(){var e=a.getCellItem;expect(e({newItem:p,columns:columns})).toEqual({currentCell:{address:"some where"},record:{name:"Rose",age:36,address:"some where",key:"2",isIn:!0},cellIndex:{rowIndex:1,columnIndex:2}})}),it(" EditTable resetSelectRowFromArray ",function(){var e=y,t=a.resetSelectRowFromArray;expect(t(e)).toEqual([{rowIndex:0,columnIndex:1}]);expect(t([{selectColumn:0,selectRow:1},{selectColumn:1,selectRow:1},{selectColumn:3,selectRow:2}])).toEqual([{rowIndex:0,columnIndex:0},{rowIndex:0,columnIndex:1},{rowIndex:1,columnIndex:3}])}),it(" EditTable resetSelectRow ",function(){var e=getCmp((0,_enzyme.mount)(_react2.default.createElement(_editTableView2.default,{data:data,columns:columns}))),t=f(e),a=t.mockEditTableListener,l=t.editTableListener;a.mockFunction("getKeyMaps").returned(dataKeyMap),expect(e.editTableListener.dataKeyMap).toEqual(dataKeyMap);var n={currentItem:p,newValue:[p],oldValue:y,columns:columns},r=l.resetSelectRow;expect(r(n)).toEqual({currentItem:{currentCell:{address:"some where"},record:{name:"Rose",age:36,address:"some where",key:"2",isIn:!0},cellIndex:{rowIndex:1,columnIndex:2}},newValue:[{rowIndex:1,columnIndex:2}],oldValue:[{rowIndex:0,columnIndex:1}]})});var b=a.getClearSingleSelectCell;function f(e){var t=VerifyOrder.create(),a=mockObject.create(e.editTableListener,VerifyOrderConfig.create("editTableListener",t));return{order:t,mockEditTableListener:a,editTableListener:a.target}}it(" EditTable getClearSingleSelectCell has select ",function(){expect(b({selectColumn:0,selectRow:1},[{selectColumn:0,selectRow:1},{selectColumn:2,selectRow:1},{selectColumn:3,selectRow:1}])).toEqual([{selectColumn:2,selectRow:1},{selectColumn:3,selectRow:1}])}),it(" EditTable getClearSingleSelectCell has no select ",function(){expect(b({selectColumn:0,selectRow:4},[{selectColumn:0,selectRow:1},{selectColumn:2,selectRow:1},{selectColumn:3,selectRow:1}])).toEqual([{selectColumn:0,selectRow:1},{selectColumn:2,selectRow:1},{selectColumn:3,selectRow:1}])})});