"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),_react=require("react"),React=_interopRequireWildcard(_react),_breadcrumbItem=require("./breadcrumbItem"),_breadcrumbItem2=_interopRequireDefault(_breadcrumbItem),_StringUtils=require("../common/StringUtils"),_breadcrumb=require("../css/breadcrumb"),_index=require("../consts/index"),_index2=_interopRequireDefault(_index);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function isNotHref(e){return"href"in e||"path"in e}function defaultRenderItem(o,u,c,l){return o.map(function(e,t){var r=e.href,n=e.title,a=e.isLast,i=e.icons;return React.createElement(_breadcrumbItem2.default,{index:t,separator:a?c:u,href:r,isLastItem:a,theme:l,count:o.length,icons:i},n)})}var Breadcrumb=function(){function o(){var e,t,r;_classCallCheck(this,o);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=r=_possibleConstructorReturn(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(a)))).getItemTheme=function(){return{BreadcrumbItem:(0,r.props.getPartOfThemeConfig)("BreadcrumbItem")}},_possibleConstructorReturn(r,t)}return _inherits(o,React.Component),_createClass(o,[{key:"getRealityHrefs",value:function(e,t,r){if(isNotHref(r)){var n="/"===e[0]?e:"/"+e;return n=(0,_StringUtils.replaceStr)(n,t)}}},{key:"getBreadCrumbItemConfig",value:function(e,t){var c=this,l=1<arguments.length&&void 0!==t?t:{},r=e.map(function(e){return e.path}),s=(0,_StringUtils.getHrefs)(r);return e.map(function(e,t,r){var n=e.title,a=e.href,i=void 0===a?s[t]:a,o=e.icons,u=void 0===o?{}:o;return{href:c.getRealityHrefs(i,l,e),title:(0,_StringUtils.replaceStr)(n,l),isLast:t===r.length-1,icons:u}})}},{key:"getChildConfig",value:function(e){var r=[];return e&&React.Children.forEach(e,function(e){var t=e?e.props:{};r.push(t||{})}),r}},{key:"render",value:function(){var e=void 0,t=this.props,i=t.separator,o=t.lastSeparator,r=t.routes,n=t.params,a=void 0===n?{}:n,u=t.renderItem,c=void 0===u?defaultRenderItem:u,l=t.children,s=(0,t.getPartOfThemeProps)("Container"),m=this.getItemTheme();if(r||l||(e=[React.createElement(_breadcrumbItem2.default,{theme:m,index:0,count:4,separator:i},"首页"),React.createElement(_breadcrumbItem2.default,{theme:m,index:1,count:4,separator:i},"一级面包屑"),React.createElement(_breadcrumbItem2.default,{theme:m,index:2,count:4,separator:i},"二级面包屑"),React.createElement(_breadcrumbItem2.default,{theme:m,index:3,count:4,separator:"",isLastItem:!0},"三级面包屑")]),r&&0<r.length){var f=this.getBreadCrumbItemConfig(r,a);return React.createElement(_breadcrumb.BreadcrumbContainer,{themeProps:s},React.createElement(_breadcrumb.FlexContainer,null,c(f,i,o,m)))}if(Array.isArray(l)){var d=this.getChildConfig(l),p=this.getBreadCrumbItemConfig(d,a);e=React.Children.map(l,function(e,t){if(!e)return null;var r=p[t],n=r.isLast,a=r.href;return(0,_react.cloneElement)(e,{index:t,separator:n?o:i,isLastItem:n,href:a,key:t,theme:m,count:l.length})})}else l&&(e=(0,_react.cloneElement)(l,{separator:o,isLastItem:!0,index:0,count:1,key:"one",theme:m}));return React.createElement(_breadcrumb.BreadcrumbContainer,{themeProps:s},React.createElement(_breadcrumb.FlexContainer,null,e))}}]),o}();Breadcrumb.defaultProps={separator:"/",lastSeparator:""},Breadcrumb.Item=_breadcrumbItem2.default,Breadcrumb.displayName=_index2.default.Breadcrumb,exports.default=Breadcrumb;