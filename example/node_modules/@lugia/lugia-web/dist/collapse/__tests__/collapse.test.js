"use strict";var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_react=require("react"),_react2=_interopRequireDefault(_react),_chai=require("chai"),_chai2=_interopRequireDefault(_chai);require("jest-styled-components");var _enzyme=require("enzyme"),_enzyme2=_interopRequireDefault(_enzyme),_enzymeAdapterReact=require("enzyme-adapter-react-16"),_enzymeAdapterReact2=_interopRequireDefault(_enzymeAdapterReact),_demo=require("../demo"),_collapse=require("../collapse"),_collapse2=_interopRequireDefault(_collapse),_panel=require("../panel"),_panel2=_interopRequireDefault(_panel),_reactTestRenderer=require("react-test-renderer"),_reactTestRenderer2=_interopRequireDefault(_reactTestRenderer),_reactTestUtils=require("@lugia/react-test-utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var c=e.apply(this,arguments);return new Promise(function(l,u){return function t(e,a){try{var r=c[e](a),n=r.value}catch(e){return void u(e)}if(!r.done)return Promise.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});l(n)}("next")})}}var exp=_chai2.default.expect;_enzyme2.default.configure({adapter:new _enzymeAdapterReact2.default}),describe("Collapse",function(){function o(e){return _react2.default.createElement(_collapse2.default,e,_react2.default.createElement(_panel2.default,{value:"1"},_react2.default.createElement("div",null,"PanelContent..."),_react2.default.createElement("div",null,"PanelContent...")),_react2.default.createElement(_panel2.default,{value:"2"},_react2.default.createElement("div",null,"PanelContent..."),_react2.default.createElement("div",null,"PanelContent...")))}function i(e){return e.children().at(0).instance().state}it("Collapse CSS",function(){var e=_react2.default.createElement(_demo.CollapseDemo,null);expect(_reactTestRenderer2.default.create(e).toJSON()).toMatchSnapshot()}),it("Collapse props:{activeValue} toTest state: value",function(){var e=(0,_enzyme.mount)(o({activeValue:"1"})),t=i(e);expect(t.value).toEqual(["1"]),e.setProps({activeValue:"2"});var a=i(e);expect(a.value).toEqual(["2"])}),it("Collapse props:{defaultActiveValue} toTest state: value",function(){var e=(0,_enzyme.mount)(o({defaultActiveValue:"1"})),t=i(e);expect(t.value).toEqual(["1"]),e.setProps({defaultActiveValue:"2"});var a=i(e);expect(a.value).toEqual(["1"])}),it("Collapse props:{defaultActiveValue} toTest onChange -> state: value",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,r,n;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={defaultActiveValue:"1"},a=(0,_enzyme.mount)(o(t)),r=i(a),expect(r.value).toEqual(["1"]),a.find("Panel").at(1).simulate("click"),e.next=8,(0,_reactTestUtils.delay)(1e3);case 8:n=i(a),expect(n.value).toEqual(["1","2"]);case 10:case"end":return e.stop()}},e,void 0)}))),it("Collapse props:{defaultActiveValue} toTest onChange params(newValue,oldValue) ",_asyncToGenerator(_regenerator2.default.mark(function e(){var r,n,t,a,l;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r=void 0,t={defaultActiveValue:"1",onChange:function(e){var t=e.newValue,a=e.oldValue;r=t,n=a}},a=(0,_enzyme.mount)(o(t)),(l=a.find("Panel")).at(1).simulate("click"),e.next=8,(0,_reactTestUtils.delay)(1e3);case 8:return expect(r).toEqual(["1","2"]),expect(n).toEqual(["1"]),l.at(0).simulate("click"),e.next=13,(0,_reactTestUtils.delay)(1e3);case 13:expect(r).toEqual(["2"]),expect(n).toEqual(["1","2"]);case 15:case"end":return e.stop()}},e,void 0)}))),it("Collapse props:{accordion} toTest onChange state(value) ",_asyncToGenerator(_regenerator2.default.mark(function e(){var t,a,r,n,l,u,c;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={defaultActiveValue:"1",accordion:!0},a=(0,_enzyme.mount)(o(t)),r=i(a),expect(r.value).toEqual(["1"]),(n=a.find("Panel")).at(0).simulate("click"),e.next=8,(0,_reactTestUtils.delay)(1e3);case 8:return l=i(a),expect(l.value).toEqual([]),n.at(1).simulate("click"),e.next=13,(0,_reactTestUtils.delay)(1e3);case 13:return u=i(a),expect(u.value).toEqual(["2"]),n.at(1).simulate("click"),e.next=18,(0,_reactTestUtils.delay)(1e3);case 18:c=i(a),expect(c.value).toEqual([]);case 20:case"end":return e.stop()}},e,void 0)}))),it("Collapse props:{accordion} toTest onChange params(newValue,oldValue) ",_asyncToGenerator(_regenerator2.default.mark(function e(){var r,n,t,a,l,u;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={defaultActiveValue:"1",accordion:!(n=r=void 0),onChange:function(e){var t=e.newValue,a=e.oldValue;r=t,n=a}},a=(0,_enzyme.mount)(o(t)),l=i(a),expect(l.value).toEqual(["1"]),(u=a.find("Panel")).at(0).simulate("click"),e.next=10,(0,_reactTestUtils.delay)(1e3);case 10:return expect(r).toEqual([]),expect(n).toEqual(["1"]),u.at(0).simulate("click"),e.next=15,(0,_reactTestUtils.delay)(1e3);case 15:return expect(r).toEqual(["1"]),expect(n).toEqual([]),u.at(1).simulate("click"),e.next=20,(0,_reactTestUtils.delay)(1e3);case 20:expect(r).toEqual(["2"]),expect(n).toEqual(["1"]);case 22:case"end":return e.stop()}},e,void 0)})))});